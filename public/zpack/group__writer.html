<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ZPack: Writer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ZPack
   </div>
   <div id="projectbrief">Simple, general-purpose archive file format</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Writer</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structzpack__compress__options__s.html">zpack_compress_options_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structzpack__file__s.html">zpack_file_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structzpack__writer__s.html">zpack_writer_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga5a86544ca87fb5c1e33cdf0b5274b0e5"><td class="memItemLeft" align="right" valign="top"><a id="ga5a86544ca87fb5c1e33cdf0b5274b0e5" name="ga5a86544ca87fb5c1e33cdf0b5274b0e5"></a>
typedef struct <a class="el" href="structzpack__compress__options__s.html">zpack_compress_options_s</a>&#160;</td><td class="memItemRight" valign="bottom"><b>zpack_compress_options</b></td></tr>
<tr class="separator:ga5a86544ca87fb5c1e33cdf0b5274b0e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6c7ca7f20b41d330ada51812d2df2eb"><td class="memItemLeft" align="right" valign="top"><a id="gaa6c7ca7f20b41d330ada51812d2df2eb" name="gaa6c7ca7f20b41d330ada51812d2df2eb"></a>
typedef struct <a class="el" href="structzpack__file__s.html">zpack_file_s</a>&#160;</td><td class="memItemRight" valign="bottom"><b>zpack_file</b></td></tr>
<tr class="separator:gaa6c7ca7f20b41d330ada51812d2df2eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf422270e3c04c3045886f1d5c5fe8c85"><td class="memItemLeft" align="right" valign="top"><a id="gaf422270e3c04c3045886f1d5c5fe8c85" name="gaf422270e3c04c3045886f1d5c5fe8c85"></a>
typedef struct <a class="el" href="structzpack__writer__s.html">zpack_writer_s</a>&#160;</td><td class="memItemRight" valign="bottom"><b>zpack_writer</b></td></tr>
<tr class="separator:gaf422270e3c04c3045886f1d5c5fe8c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga39566d98ea7bbe596d1618563d54b492"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#ga39566d98ea7bbe596d1618563d54b492">zpack_init_writer</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, const char *path)</td></tr>
<tr class="separator:ga39566d98ea7bbe596d1618563d54b492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96ebb3910cc2645dddb48ca95d15fdbe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#ga96ebb3910cc2645dddb48ca95d15fdbe">zpack_init_writer_cfile</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, FILE *fp)</td></tr>
<tr class="separator:ga96ebb3910cc2645dddb48ca95d15fdbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8c32c614c323da3f6064a5f5f20f9fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#gae8c32c614c323da3f6064a5f5f20f9fd">zpack_init_writer_heap</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, size_t initial_size)</td></tr>
<tr class="separator:gae8c32c614c323da3f6064a5f5f20f9fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f8e32956228b574c25c478e095a38b0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#ga8f8e32956228b574c25c478e095a38b0">zpack_write_header</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer)</td></tr>
<tr class="separator:ga8f8e32956228b574c25c478e095a38b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7894f1796091edb30b4c3e19280c15af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#ga7894f1796091edb30b4c3e19280c15af">zpack_write_header_ex</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, zpack_u16 version)</td></tr>
<tr class="separator:ga7894f1796091edb30b4c3e19280c15af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1a45622ba6eadfeeaebdda4302ffe1aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#ga1a45622ba6eadfeeaebdda4302ffe1aa">zpack_write_data_header</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer)</td></tr>
<tr class="separator:ga1a45622ba6eadfeeaebdda4302ffe1aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga131dff076899efd1240f1bf2a3513b73"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#ga131dff076899efd1240f1bf2a3513b73">zpack_write_files</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, <a class="el" href="structzpack__file__s.html">zpack_file</a> *files, zpack_u64 file_count)</td></tr>
<tr class="separator:ga131dff076899efd1240f1bf2a3513b73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd01c6449cb2dec2388b3ca759f39086"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#gafd01c6449cb2dec2388b3ca759f39086">zpack_write_files_from_archive</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, <a class="el" href="structzpack__reader__s.html">zpack_reader</a> *reader, <a class="el" href="structzpack__file__entry__s.html">zpack_file_entry</a> *entries, zpack_u64 file_count)</td></tr>
<tr class="separator:gafd01c6449cb2dec2388b3ca759f39086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacdf6b7b62e7ccc3b63324448059fa53d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#gacdf6b7b62e7ccc3b63324448059fa53d">zpack_write_file_stream</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, <a class="el" href="structzpack__compress__options__s.html">zpack_compress_options</a> *options, <a class="el" href="structzpack__stream__s.html">zpack_stream</a> *stream, void *cctx)</td></tr>
<tr class="separator:gacdf6b7b62e7ccc3b63324448059fa53d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8649b2ac70fd99196fafe73dbcd910cf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#ga8649b2ac70fd99196fafe73dbcd910cf">zpack_write_file_stream_end</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, char *filename, <a class="el" href="structzpack__compress__options__s.html">zpack_compress_options</a> *options, <a class="el" href="structzpack__stream__s.html">zpack_stream</a> *stream, void *cctx)</td></tr>
<tr class="separator:ga8649b2ac70fd99196fafe73dbcd910cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4dcb2766677908ef259f77b23b23df91"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#ga4dcb2766677908ef259f77b23b23df91">zpack_write_cdr</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer)</td></tr>
<tr class="separator:ga4dcb2766677908ef259f77b23b23df91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26edcbde95495596dae7eb52c17f006c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#ga26edcbde95495596dae7eb52c17f006c">zpack_write_cdr_ex</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, <a class="el" href="structzpack__file__entry__s.html">zpack_file_entry</a> *entries, zpack_u64 file_count)</td></tr>
<tr class="separator:ga26edcbde95495596dae7eb52c17f006c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94f6124af004b55d2f293d269b41d175"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#ga94f6124af004b55d2f293d269b41d175">zpack_write_eocdr</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer)</td></tr>
<tr class="separator:ga94f6124af004b55d2f293d269b41d175"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa40377f026d9427acf2a36fc4d9304df"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#gaa40377f026d9427acf2a36fc4d9304df">zpack_write_eocdr_ex</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, zpack_u64 cdr_offset)</td></tr>
<tr class="separator:gaa40377f026d9427acf2a36fc4d9304df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbafa0cf37d64aabbd4fb048ce4e5842"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#gafbafa0cf37d64aabbd4fb048ce4e5842">zpack_write_archive</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer, <a class="el" href="structzpack__file__s.html">zpack_file</a> *files, zpack_u64 file_count)</td></tr>
<tr class="separator:gafbafa0cf37d64aabbd4fb048ce4e5842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae02fb24b8bf1fea143d823a10e3691c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__writer.html#gae02fb24b8bf1fea143d823a10e3691c0">zpack_close_writer</a> (<a class="el" href="structzpack__writer__s.html">zpack_writer</a> *writer)</td></tr>
<tr class="separator:gae02fb24b8bf1fea143d823a10e3691c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The archive writer.<br  />
Thread safety: <b>Not thread safe.</b><br  />
Each blocks/files are expected to be written asynchronously, one after the other. Running multiple write operations at the same time will result in undefined behavior.<br  />
Note that there are no guides or restrictions on the ordering of each block while writing the archive, so make sure to follow the correct order by yourself. (or use <a class="el" href="group__writer.html#gafbafa0cf37d64aabbd4fb048ce4e5842">zpack_write_archive</a>)<br  />
(header -&gt; data header -&gt; files -&gt; cdr -&gt; eocdr) </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga39566d98ea7bbe596d1618563d54b492" name="ga39566d98ea7bbe596d1618563d54b492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga39566d98ea7bbe596d1618563d54b492">&#9670;&#160;</a></span>zpack_init_writer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_init_writer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the writer and opens a file for writing. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">path</td><td>UTF-8 formatted path to the archive. If you're on Windows, use <a class="el" href="group__utils.html#ga73d96d7db67a200f01878985d85baa67">zpack_convert_wchar_to_utf8</a> if needed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A return code (see <a class="el" href="group__common.html#ga129a232956d239f88517deba48531e45">zpack_result</a>) </dd></dl>

</div>
</div>
<a id="ga96ebb3910cc2645dddb48ca95d15fdbe" name="ga96ebb3910cc2645dddb48ca95d15fdbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga96ebb3910cc2645dddb48ca95d15fdbe">&#9670;&#160;</a></span>zpack_init_writer_cfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_init_writer_cfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the writer and sets the output file stream to fp. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">fp</td><td>The file stream. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A return code (see <a class="el" href="group__common.html#ga129a232956d239f88517deba48531e45">zpack_result</a>) </dd></dl>

</div>
</div>
<a id="gae8c32c614c323da3f6064a5f5f20f9fd" name="gae8c32c614c323da3f6064a5f5f20f9fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae8c32c614c323da3f6064a5f5f20f9fd">&#9670;&#160;</a></span>zpack_init_writer_heap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_init_writer_heap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>initial_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the writer and allocates a memory heap for writing, using the initial size provided. If the initial size is 0 or too small, it'll be set to the minimum archive size. The buffer will be resized automatically to fit the data during write operations. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">initial_size</td><td>The initial heap size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A return code (see <a class="el" href="group__common.html#ga129a232956d239f88517deba48531e45">zpack_result</a>) </dd></dl>

</div>
</div>
<a id="ga8f8e32956228b574c25c478e095a38b0" name="ga8f8e32956228b574c25c478e095a38b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8f8e32956228b574c25c478e095a38b0">&#9670;&#160;</a></span>zpack_write_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the header. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7894f1796091edb30b4c3e19280c15af" name="ga7894f1796091edb30b4c3e19280c15af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7894f1796091edb30b4c3e19280c15af">&#9670;&#160;</a></span>zpack_write_header_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_header_ex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">zpack_u16&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(Ex) Write the header.<br  />
Note: If unsure, use <a class="el" href="group__writer.html#ga8f8e32956228b574c25c478e095a38b0">zpack_write_header</a> instead. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">version</td><td>The archive's version. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__writer.html#ga8f8e32956228b574c25c478e095a38b0">zpack_write_header</a> </dd></dl>

</div>
</div>
<a id="ga1a45622ba6eadfeeaebdda4302ffe1aa" name="ga1a45622ba6eadfeeaebdda4302ffe1aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1a45622ba6eadfeeaebdda4302ffe1aa">&#9670;&#160;</a></span>zpack_write_data_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_data_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the data header. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga131dff076899efd1240f1bf2a3513b73" name="ga131dff076899efd1240f1bf2a3513b73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga131dff076899efd1240f1bf2a3513b73">&#9670;&#160;</a></span>zpack_write_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_files </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzpack__file__s.html">zpack_file</a> *&#160;</td>
          <td class="paramname"><em>files</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">zpack_u64&#160;</td>
          <td class="paramname"><em>file_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compress and write files to archive. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">files</td><td>Files to be written. </td></tr>
    <tr><td class="paramname">file_count</td><td>Number of files to be written. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gafd01c6449cb2dec2388b3ca759f39086" name="gafd01c6449cb2dec2388b3ca759f39086"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd01c6449cb2dec2388b3ca759f39086">&#9670;&#160;</a></span>zpack_write_files_from_archive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_files_from_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzpack__reader__s.html">zpack_reader</a> *&#160;</td>
          <td class="paramname"><em>reader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzpack__file__entry__s.html">zpack_file_entry</a> *&#160;</td>
          <td class="paramname"><em>entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">zpack_u64&#160;</td>
          <td class="paramname"><em>file_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy files from another archive. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">reader</td><td>The reader (for the other archive). </td></tr>
    <tr><td class="paramname">entries</td><td>Files to be written. </td></tr>
    <tr><td class="paramname">file_count</td><td>Number of files to be written. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gacdf6b7b62e7ccc3b63324448059fa53d" name="gacdf6b7b62e7ccc3b63324448059fa53d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacdf6b7b62e7ccc3b63324448059fa53d">&#9670;&#160;</a></span>zpack_write_file_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_file_stream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzpack__compress__options__s.html">zpack_compress_options</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzpack__stream__s.html">zpack_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(Streaming) Compress and write (part of) file to archive. Call this function repeatedly with new data, then call <a class="el" href="group__writer.html#ga8649b2ac70fd99196fafe73dbcd910cf">zpack_write_file_stream_end</a> when all data has been consumed to write a file. Only stream.next_in and stream.avail_in are updated after each call. The output buffer only serves as a temporary buffer before the data is written to the writer's output. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">options</td><td>Compression options. </td></tr>
    <tr><td class="paramname">stream</td><td>The stream. </td></tr>
    <tr><td class="paramname">cctx</td><td>The compression context to be used. The context's compression library must match the compression method specified in options. You can pass NULL to use the writer's built-in compression contexts. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8649b2ac70fd99196fafe73dbcd910cf" name="ga8649b2ac70fd99196fafe73dbcd910cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8649b2ac70fd99196fafe73dbcd910cf">&#9670;&#160;</a></span>zpack_write_file_stream_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_file_stream_end </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzpack__compress__options__s.html">zpack_compress_options</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzpack__stream__s.html">zpack_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(Streaming) Ends a file writing session. Flushes all data to the output and adds the file into the file entry list. stream.next_in and stream.avail_in is allowed to be empty. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">filename</td><td>Filename. </td></tr>
    <tr><td class="paramname">options</td><td>Compression options. </td></tr>
    <tr><td class="paramname">stream</td><td>The stream. </td></tr>
    <tr><td class="paramname">cctx</td><td>The compression context to be used. This context must be the one used for <a class="el" href="group__writer.html#gacdf6b7b62e7ccc3b63324448059fa53d">zpack_write_file_stream</a> to compress the file's data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4dcb2766677908ef259f77b23b23df91" name="ga4dcb2766677908ef259f77b23b23df91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4dcb2766677908ef259f77b23b23df91">&#9670;&#160;</a></span>zpack_write_cdr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_cdr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the central directory record. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga26edcbde95495596dae7eb52c17f006c" name="ga26edcbde95495596dae7eb52c17f006c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26edcbde95495596dae7eb52c17f006c">&#9670;&#160;</a></span>zpack_write_cdr_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_cdr_ex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzpack__file__entry__s.html">zpack_file_entry</a> *&#160;</td>
          <td class="paramname"><em>entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">zpack_u64&#160;</td>
          <td class="paramname"><em>file_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(Ex) Write the central directory record.<br  />
Note: If unsure, use <a class="el" href="group__writer.html#ga4dcb2766677908ef259f77b23b23df91">zpack_write_cdr</a> instead. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">entries</td><td>File entries. </td></tr>
    <tr><td class="paramname">file_count</td><td>File count. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__writer.html#ga4dcb2766677908ef259f77b23b23df91">zpack_write_cdr</a> </dd></dl>

</div>
</div>
<a id="ga94f6124af004b55d2f293d269b41d175" name="ga94f6124af004b55d2f293d269b41d175"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94f6124af004b55d2f293d269b41d175">&#9670;&#160;</a></span>zpack_write_eocdr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_eocdr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the end of central directory record. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa40377f026d9427acf2a36fc4d9304df" name="gaa40377f026d9427acf2a36fc4d9304df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa40377f026d9427acf2a36fc4d9304df">&#9670;&#160;</a></span>zpack_write_eocdr_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_eocdr_ex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">zpack_u64&#160;</td>
          <td class="paramname"><em>cdr_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(Ex) Write the end of central directory record.<br  />
Note: If unsure, use <a class="el" href="group__writer.html#ga94f6124af004b55d2f293d269b41d175">zpack_write_eocdr</a> instead. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">cdr_offset</td><td>Offset of the central directory record from the start of the archive. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__writer.html#ga94f6124af004b55d2f293d269b41d175">zpack_write_eocdr</a> </dd></dl>

</div>
</div>
<a id="gafbafa0cf37d64aabbd4fb048ce4e5842" name="gafbafa0cf37d64aabbd4fb048ce4e5842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafbafa0cf37d64aabbd4fb048ce4e5842">&#9670;&#160;</a></span>zpack_write_archive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zpack_write_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzpack__file__s.html">zpack_file</a> *&#160;</td>
          <td class="paramname"><em>files</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">zpack_u64&#160;</td>
          <td class="paramname"><em>file_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes the entire archive in one go; basically a wrapper for all of the zpack_write* steps. This uses the one-shot API to compress the files in memory. If you need something more flexible or need to use the streaming API, use the other write functions yourself to incrementally write the archive. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
    <tr><td class="paramname">files</td><td>Files to be written to the archive. </td></tr>
    <tr><td class="paramname">file_count</td><td>File count. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A return code (see <a class="el" href="group__common.html#ga129a232956d239f88517deba48531e45">zpack_result</a>) </dd></dl>

</div>
</div>
<a id="gae02fb24b8bf1fea143d823a10e3691c0" name="gae02fb24b8bf1fea143d823a10e3691c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae02fb24b8bf1fea143d823a10e3691c0">&#9670;&#160;</a></span>zpack_close_writer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zpack_close_writer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzpack__writer__s.html">zpack_writer</a> *&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Closes the writer, releasing all resources previously occupied by it. This will make the writer ready to be reused for another session. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The writer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
