function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},a=t.parcelRequired274;function r(e,t){var n=Object.create(e.prototype);return n.className=t,n}function o(e,t){Object.defineProperty(e.prototype,t,{get:function(){return this.element[t]},set:function(e){this.element[t]=e}})}function l(e,t){Object.defineProperty(e.prototype,t,{get:function(){return this.element.style[t]},set:function(e){this.element.style[t]=e}})}function d(){this.element||(this.element=document.createElement("div")),this.body||(this.body=this.element),this.element.classList.add("pbfe"+(this.className?this.className:"Widget"))}function s(e){e||(e=document.createElement("div"),document.body.appendChild(e)),this.element=e,d.call(this)}function c(e){var t=document.createElement("div");t.style.display="flex",t.style.flexDirection=e,this.element=t,d.call(this)}function h(){var e=document.createElement("div");e.style.position="fixed",this.element=e,d.call(this)}function u(e){var t=document.createElement("span");t.innerText=e,this.element=t,d.call(this)}function p(e,t){var n=document.createElement("button");e&&(n.innerText=e),t&&n.classList.add(t),this.element=n,d.call(this)}function f(e){var t=document.createElement("div");t.style.zIndex=101;var n=document.createElement("div");n.classList.add("pbfeDialogTitle"),n.innerText=e,t.appendChild(n);var i=document.createElement("div");i.classList.add("pbfeDialogBody"),t.appendChild(i);var a=document.createElement("div");a.classList.add("pbfeDialogButtons"),a.style.display="flex",t.appendChild(a),this.element=t,this.title=n,this.body=i,this.buttons=a,d.call(this)}function m(e){var t;if("checkbox"===e)t=function(){var e=document.createElement("button");e.classList.add("pbfeCheckbox");var t=document.createElement("div");return t.classList.add("pbfeCheckboxInner"),e.appendChild(t),Object.defineProperty(e,"checked",{get:function(){return this._checked},set:function(t){this._checked!=t&&(this._checked=t,t?e.classList.add("checked"):e.classList.remove("checked"),e.dispatchEvent(new Event("change")))}}),e._checked=!1,e.addEventListener("click",(function(){this.checked=!this.checked})),e}();else(t=document.createElement("input")).type=e;this.element=t,this.type=e,d.call(this)}function v(){var e=document.createElement("div"),t=document.createElement("div");t.classList.add("pbfeProgressBarInner"),t.style.width="0%",t.style.height="100%",e.appendChild(t),this.element=e,this.inner=t,d.call(this)}function g(){this.element=document.createElement("canvas"),d.call(this)}function w(e){var t=document.createElement("div");t.style.zIndex=102,t.innerText=e,this.element=t,d.call(this)}function y(){var e=document.createElement("select");this.element=e,d.call(this)}null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},t.parcelRequired274=a),a.register("bRler",(function(t,n){var i,a;e(t.exports,"register",(function(){return i}),(function(e){return i=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var r={};i=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},a=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a.register("7cwBr",(function(t,n){var i;e(t.exports,"getBundleURL",(function(){return i}),(function(e){return i=e}));var a={};function r(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}i=function(e){var t=a[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return r(e[2])}return"/"}(),a[e]=t),t}})),a("bRler").register(JSON.parse('{"6gEBg":"index.b6b74d39.js","j5Mty":"eye-dropper.e70ddc8f.svg","gvGqy":"discord.7d8dcec6.html","YCPzX":"loading.f836516e.svg","1SrrK":"demo-thumbnail.ee15827b.jpg","hsCcC":"banner.2c50771c.svg","fSHUt":"sw.js"}')),d.prototype.appendChild=function(e){this.body.appendChild(e.element)},d.prototype.appendChildren=function(e){for(var t=0;t<e.length;++t)this.appendChild(e[t])},d.prototype.removeChild=function(e){this.body.removeChild(e.element)},d.prototype.removeChildAfterTransition=function(e,t){var n=this.body;this.element.addEventListener("transitionend",(function i(){n.removeChild(e.element),t&&t(),this.removeEventListener("transitionend",i)}))},d.prototype.addEventListener=function(e,t){this.element.addEventListener.apply(this.element,arguments)},d.prototype.contains=function(e){return e.element.parentNode==this.element},l(d,"width"),l(d,"height"),l(d,"order"),l(d,"flexGrow"),l(d,"flexShrink"),l(d,"flexBasis"),l(d,"alignSelf"),s.prototype=r(d,"Container"),s.prototype.createShadow=function(){if(!document.getElementById("pbfeShadow")){var e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;z-index:100;",e.id="pbfeShadow",this.element.appendChild(e)}},s.prototype.showToast=function(e,t,n){var i=new w(e);this.appendChild(i),setTimeout(i.show.bind(i),0);var a=this;setTimeout((function(){n?(i.element.addEventListener("transitionend",(function e(){a.removeChild(i),i.element.removeEventListener("transitionend",e)})),i.hide()):this.removeChild(i)}),t)},c.prototype=r(d,"Flexbox"),l(c,"flexDirection"),l(c,"justifyContent"),l(c,"alignItems"),l(c,"alignContent"),l(c,"gap"),l(c,"rowGap"),l(c,"columnGap"),h.prototype=r(d,"Floatbox"),l(h,"zIndex"),l(h,"top"),l(h,"left"),l(h,"bottom"),l(h,"right"),u.prototype=r(d,"Label"),Object.defineProperty(u.prototype,"text",{get:function(){return this.element.innerText},set:function(e){this.element.innerText=e}}),p.prototype=r(u,"Button"),f.prototype=r(d,"Dialog"),f.prototype.show=function(){this.element.classList.add("show");var e=document.getElementById("pbfeShadow");e&&e.classList.add("show")},f.prototype.hide=function(){if(this.element.classList.contains("show")){this.element.classList.remove("show");var e=document.getElementById("pbfeShadow");e&&e.classList.remove("show")}},f.prototype.appendButton=function(e){this.buttons.appendChild(e.element)},f.prototype.removeButton=function(e){this.buttons.removeChild(e.element)},f.prototype.appendHideButton=function(e,t){var n=new p(e,t);n.addEventListener("click",this.hide.bind(this)),this.appendButton(n)},Object.defineProperty(f.prototype,"titleText",{get:function(){return this._title.innerText},set:function(e){this._title.innerText=e}}),m.prototype=r(d,"Input"),o(m,"value"),o(m,"placeholder"),o(m,"min"),o(m,"max"),o(m,"step"),v.prototype=r(d,"ProgressBar"),v.prototype.setProgress=function(e){var t=this.inner;if("number"==typeof e){if(e<0)return t.style.removeProperty("width"),void t.classList.add("indeterminate");e=100*e+"%"}t.classList.contains("indeterminate")&&t.classList.remove("indeterminate"),t.style.width=e},g.prototype=r(d,"Canvas"),g.prototype.getContext=function(){return this.element.getContext.apply(this.element,arguments)},w.prototype=r(u,"Toast"),w.prototype.show=function(){this.element.classList.add("show")},w.prototype.hide=function(){this.element.classList.remove("show")},y.prototype=r(d,"Selector"),y.prototype.addOption=function(e,t,n){var i=document.createElement("option");i.text=e,t&&(i.value=t),n&&(i.hidden=i.disabled=i.selected=!0),this.element.appendChild(i)},o(y,"value");var b={Container:s,Widget:d,Flexbox:c,Floatbox:h,Label:u,Button:p,Dialog:f,Input:m,ProgressBar:v,Canvas:g,Toast:w,Selector:y},x={},L={};function C(e){return e in x?x[e]:e}var E,k,B={init:async function(){var e=await fetch("./i18n/langs.json"),t=await e.json();L=t},loadLanguage:async function(e){if(!(e in L))throw new Error;var t=await fetch("./i18n/"+e+".json"),n=await t.json();x=n},getString:C,getLanguages:function(){return L}},R=C;var F,I={init:function(e){E=new b.Dialog(R("Loading...")),e.appendChild(E),(k=new b.ProgressBar).element.id="loadingBar",E.appendChild(k)},show:function(){E.show()},hide:function(){E.hide()},setProgress:function(e){k.setProgress(e)}};var M,P,S={init:function(e){F=e},show:function(e){F.showToast(e,3e3,!0)}};function T(e,t,n,i){for(var a=e[t++],r=1<<a,o=r+1,l=o+1,d=a+1,s=(1<<d)-1,c=0,h=0,u=0,p=e[t++],f=new Int32Array(4096),m=null;;){for(;c<16&&0!==p;)h|=e[t++]<<c,c+=8,1===p?p=e[t++]:--p;if(c<d)break;var v=h&s;if(h>>=d,c-=d,v!==r){if(v===o)break;for(var g=v<l?v:m,w=0,y=g;y>r;)y=f[y]>>8,++w;var b=y;if(u+w+(g!==v?1:0)>i)return void console.log("Warning, gif stream longer than expected.");n[u++]=b;var x=u+=w;for(g!==v&&(n[u++]=b),y=g;w--;)y=f[y],n[--x]=255&y,y>>=8;null!==m&&l<4096&&(f[l++]=m<<8|b,l>=s+1&&d<12&&(++d,s=s<<1|1)),m=v}else l=o+1,s=(1<<(d=a+1))-1,m=null}return u!==i&&console.log("Warning, gif stream shorter than expected."),n}try{M=function(e,t,n,i){var a=0,r=void 0===(i=void 0===i?{}:i).loop?null:i.loop,o=void 0===i.palette?null:i.palette;if(t<=0||n<=0||t>65535||n>65535)throw new Error("Width/Height invalid.");function l(e){var t=e.length;if(t<2||t>256||t&t-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return t}e[a++]=71,e[a++]=73,e[a++]=70,e[a++]=56,e[a++]=57,e[a++]=97;var d=0,s=0;if(null!==o){for(var c=l(o);c>>=1;)++d;if(c=1<<d,--d,void 0!==i.background){if((s=i.background)>=c)throw new Error("Background index out of range.");if(0===s)throw new Error("Background index explicitly passed as 0.")}}if(e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=(null!==o?128:0)|d,e[a++]=s,e[a++]=0,null!==o)for(var h=0,u=o.length;h<u;++h){var p=o[h];e[a++]=p>>16&255,e[a++]=p>>8&255,e[a++]=255&p}if(null!==r){if(r<0||r>65535)throw new Error("Loop count invalid.");e[a++]=33,e[a++]=255,e[a++]=11,e[a++]=78,e[a++]=69,e[a++]=84,e[a++]=83,e[a++]=67,e[a++]=65,e[a++]=80,e[a++]=69,e[a++]=50,e[a++]=46,e[a++]=48,e[a++]=3,e[a++]=1,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=0}var f=!1;this.addFrame=function(t,n,i,r,d,s){if(!0===f&&(--a,f=!1),s=void 0===s?{}:s,t<0||n<0||t>65535||n>65535)throw new Error("x/y invalid.");if(i<=0||r<=0||i>65535||r>65535)throw new Error("Width/Height invalid.");if(d.length<i*r)throw new Error("Not enough pixels for the frame size.");var c=!0,h=s.palette;if(null==h&&(c=!1,h=o),null==h)throw new Error("Must supply either a local or global palette.");for(var u=l(h),p=0;u>>=1;)++p;u=1<<p;var m=void 0===s.delay?0:s.delay,v=void 0===s.disposal?0:s.disposal;if(v<0||v>3)throw new Error("Disposal out of range.");var g=!1,w=0;if(void 0!==s.transparent&&null!==s.transparent&&(g=!0,(w=s.transparent)<0||w>=u))throw new Error("Transparent color index.");if((0!==v||g||0!==m)&&(e[a++]=33,e[a++]=249,e[a++]=4,e[a++]=v<<2|(!0===g?1:0),e[a++]=255&m,e[a++]=m>>8&255,e[a++]=w,e[a++]=0),e[a++]=44,e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=255&i,e[a++]=i>>8&255,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=!0===c?128|p-1:0,!0===c)for(var y=0,b=h.length;y<b;++y){var x=h[y];e[a++]=x>>16&255,e[a++]=x>>8&255,e[a++]=255&x}return a=function(e,t,n,i){e[t++]=n;var a=t++,r=1<<n,o=r-1,l=r+1,d=l+1,s=n+1,c=0,h=0;function u(n){for(;c>=n;)e[t++]=255&h,h>>=8,c-=8,t===a+256&&(e[a]=255,a=t++)}function p(e){h|=e<<c,c+=s,u(8)}var f=i[0]&o,m={};p(r);for(var v=1,g=i.length;v<g;++v){var w=i[v]&o,y=f<<8|w,b=m[y];if(void 0===b){for(h|=f<<c,c+=s;c>=8;)e[t++]=255&h,h>>=8,c-=8,t===a+256&&(e[a]=255,a=t++);4096===d?(p(r),d=l+1,s=n+1,m={}):(d>=1<<s&&++s,m[y]=d++),f=w}else f=b}return p(f),p(l),u(1),a+1===t?e[a]=0:(e[a]=t-a-1,e[t++]=0),t}(e,a,p<2?2:p,d),a},this.end=function(){return!1===f&&(e[a++]=59,f=!0),a},this.getOutputBuffer=function(){return e},this.setOutputBuffer=function(t){e=t},this.getOutputBufferPosition=function(){return a},this.setOutputBufferPosition=function(e){a=e}},P=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,a=e[t++],r=a>>7,o=1<<1+(7&a);e[t++],e[t++];var l=null,d=null;r&&(l=t,d=o,t+=3*o);var s=!0,c=[],h=0,u=null,p=0,f=null;for(this.width=n,this.height=i;s&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,f=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(0===R)break;t+=R}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];h=e[t++]|e[t++]<<8,u=e[t++],0==(1&m)&&(u=null),p=m>>2&7,t++;break;case 1:case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(0===R)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++],x=b>>6&1,L=1<<1+(7&b),C=l,E=d,k=!1;b>>7&&(k=!0,C=t,E=L,t+=3*L);var B=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(0===R)break;t+=R}c.push({x:v,y:g,width:w,height:y,has_local_palette:k,palette_offset:C,palette_size:E,data_offset:B,data_length:t-B,transparent_index:u,interlaced:!!x,delay:h,disposal:p});break;case 59:s=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return f},this.frameInfo=function(e){if(e<0||e>=c.length)throw new Error("Frame index out of range.");return c[e]},this.decodeAndBlitFrameBGRA=function(t,i){var a=this.frameInfo(t),r=a.width*a.height,o=new Uint8Array(r);T(e,a.data_offset,o,r);var l=a.palette_offset,d=a.transparent_index;null===d&&(d=256);var s=a.width,c=n-s,h=s,u=4*(a.y*n+a.x),p=4*((a.y+a.height)*n+a.x),f=u,m=4*c;!0===a.interlaced&&(m+=28*n);for(var v=8,g=0,w=o.length;g<w;++g){var y=o[g];if(0===h&&(h=s,(f+=m)>=p&&(m=4*c+4*n*(v-1),f=u+(s+c)*(v<<1),v>>=1)),y===d)f+=4;else{var b=e[l+3*y],x=e[l+3*y+1],L=e[l+3*y+2];i[f++]=L,i[f++]=x,i[f++]=b,i[f++]=255}--h}},this.decodeAndBlitFrameRGBA=function(t,i){var a=this.frameInfo(t),r=a.width*a.height,o=new Uint8Array(r);T(e,a.data_offset,o,r);var l=a.palette_offset,d=a.transparent_index;null===d&&(d=256);var s=a.width,c=n-s,h=s,u=4*(a.y*n+a.x),p=4*((a.y+a.height)*n+a.x),f=u,m=4*c;!0===a.interlaced&&(m+=28*n);for(var v=8,g=0,w=o.length;g<w;++g){var y=o[g];if(0===h&&(h=s,(f+=m)>=p&&(m=4*c+4*n*(v-1),f=u+(s+c)*(v<<1),v>>=1)),y===d)f+=4;else{var b=e[l+3*y],x=e[l+3*y+1],L=e[l+3*y+2];i[f++]=b,i[f++]=x,i[f++]=L,i[f++]=255}--h}}}}catch(e){}var A=[];function O(e,t,n){this.buffer=[],this.writer=new M(this.buffer,e,t,n)}O.prototype.addFrame=function(e,t){let n=null!=t.delay?t.delay:0,i=null!=t.disposal?t.disposal:2,a=t.keepColors,r=null!=t.x?t.x:0,o=null!=t.y?t.y:0,l=e.width,d=e.height,s=[],c=[],h=function(e,t,n,i){var a=null;for(let o=0;o<e.length;o+=4){let l=e[o],d=e[o+1],s=e[o+2];if(0==e[o+3]){if(null==a){if(!(t.length<256)){n.push(0);continue}a=t.push(0)-1}n.push(a);continue}let c,h=((255&l)<<16)+((255&d)<<8)+(255&s),u=null;for(let e=1;e<t.length;++e){let n=t[e];if(n==h){c=e,u=null;break}if(!i||256==t.length){let t=n>>16&255,i=n>>8&255,a=255&n,r=Math.abs(l-t)+Math.abs(d-i)+Math.abs(s-a);(null==u||r<u)&&(c=e,u=r)}}var r=15+40*Math.pow(2,t.length/256*10-10);256!=t.length&&u>r&&(c=null),c||(c=t.push(h)-1),n.push(c)}if(256==t.length)return a;let o=t.length;o<2?o=2:(--o,o|=o>>1,o|=o>>2,o|=o>>4,++o);let l=o-t.length;for(let e=0;e<l;++e)t.push(0);return a}(e.data,s,c,a);this.writer.addFrame(r,o,l,d,c,{palette:s,delay:n,transparent:h,disposal:i})},O.prototype.end=function(){this.writer.end()},O.prototype.getUint8Array=function(){return Uint8Array.from(this.buffer)};var D={Renderer:O,load:function(e,t){var n=new FileReader;n.onloadend=async function(){if(n.error)toast.show(_("Failed to load GIF frames."));else{var e,i=new Uint8Array(n.result);try{e=new P(i)}catch(e){return void toast.show(_("Failed to load GIF frames: ")+e.message)}var a,r,o,{width:l,height:d}=e;t.loopCount.value=e.loopCount();for(let t=0;t<e.numFrames();++t){const n=e.frameInfo(t);let i,s;o?o=!1:3==n.disposal?i=a:0!=n.disposal&&t>0&&(i=r),s=i?new ImageData(new Uint8ClampedArray(i),l,d):new ImageData(l,d),e.decodeAndBlitFrameRGBA(t,s.data),r=s.data,0==n.disposal?a=s.data:2==n.disposal&&(o=!0);let c=await createImageBitmap(s);A[t]={info:n,bitmap:c}}var s=e.numFrames()-1;t.frame.min=0,t.frame.max=s,t.frame.value=0,t.frame.disabled=!1,t.endFrame.value=s,t.keepGifColors.checked=!0}},n.readAsArrayBuffer(e)},reset:function(){return!!A.length&&(D.frames=A=[],!0)},isAnimated:function(){return A.length>1},frames:A},U=D;function H(e){let t=!1;return function(){t||(t=!0,window.requestAnimationFrame((function(){e(),t=!1})))}}var W,j,G,z,Y,N,X,K,V,q,J=null;function Q(e){var t,n=e.changedTouches;if(null!=J)for(let e=0;e<n.length;++e)if(n[e].identifier==J){t=n[e];break}var i="";switch(e.type){case"touchstart":if(null!=J||0==n.length)return;i="mousedown",t=n[0],J=t.identifier;break;case"touchmove":i="mousemove";break;case"touchend":t&&(J=null),i="mouseup";break;default:return}if(t){var a=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:!1,altKey:!1,metaKey:!1,button:0,relatedTarget:null});this.dispatchEvent(a)}}function Z(){}function $(e,t){var n=document.createElement("datalist");n.id=e;for(let e=0;e<t.length;++e){let i=document.createElement("option");i.value=t[e],n.appendChild(i)}return document.body.appendChild(n),e}function ee(e,t,n){return e>=n.x&&t>=n.y&&e<=n.x+n.width&&t<=n.y+n.height}function te(e,t,n,i,a){return Math.pow(e-n,2)+Math.pow(t-i,2)<Math.pow(a,2)}function ne(e,t){return Math.hypot(e.pageX-t.pageX,e.pageY-t.pageY)}function ie(e,t,n,i,a){e.moveTo(t,n),e.lineTo(i,a)}Z.prototype.create=function(e,t,n,i){t||(t=e);var a,r=new b.Label(t);return r.element.classList.add("menuInputBox"),i&&r.element.classList.add("split"),"color"==n?(a=new b.Widget).element.classList.add("cpButton"):(a=new b.Input(n)).element.setAttribute("aria-label",t),r.appendChild(a),this[e]=a.element,r};var ae,re=!1,oe={hsl:{maxValues:[360,100,100,255],toCss:Re,toHex:function(e,t,n){return Ee(...Le(e,t,n))},convFunc:function(e,t,n){e/=255,t/=255,n/=255;const i=Math.max(e,t,n),a=i-Math.min(e,t,n),r=a?i===e?(t-n)/a:i===t?2+(n-e)/a:4+(e-t)/a:0;return[60*r<0?60*r+360:60*r,100*(a?i<=.5?a/(2*i-a):a/(2-(2*i-a)):0),100*(2*i-a)/2]}},rgb:{maxValues:[255,255,255,255],toCss:Be,toHex:Ee,convFunc:Le}},le={};function de(e){var t=new b.Flexbox;t.element.classList.add("valueFlex");var n=new b.Label(e);t.appendChild(n);var i=new b.Widget;i.element.classList.add("slider"),t.appendChild(i);var a=new b.Widget;a.element.classList.add("sliderPoint"),i.appendChild(a);var r=new b.Input("number");return r.element.min=r.value=0,t.appendChild(r),X.push({label:n,slider:i,point:a,input:r,num:X.length}),t}function se(e,t){e.value=Math.round(t),e.element.dataset.value=t}function ce(e){return+e.element.dataset.value}function he(e){if(K!=e){var t=K;K=e;for(var[n,i,a,r]=X,{maxValues:o,convFunc:l}=oe[e],d=0;d<X.length;++d){var s=X[d];s.input.element.max=o[d],d<K.length&&(s.label.text=K[d].toUpperCase())}"hsl"==K?(ue(n.slider,[Re(0,100,50,1),Re(60,100,50,1),Re(120,100,50,1),Re(180,100,50,1),Re(240,100,50,1),Re(300,100,50,1),Re(360,100,50,1)]),G.element.classList.add("chosen"),z.element.classList.remove("chosen")):"rgb"==K&&(ue(n.slider,["#000000","#ff0000"]),ue(i.slider,["#000000","#00ff00"]),ue(a.slider,["#000000","#0000ff"]),z.element.classList.add("chosen"),G.element.classList.remove("chosen")),t&&pe(...l(ce(n.input),ce(i.input),ce(a.input)),ce(r.input))}}function ue(e,t){e.element.style.backgroundImage="linear-gradient(90deg,"+t.join(",")+")"}function pe(e,t,n,i){if("hsl"==K){var[a,r,o]=X;ue(r.slider,[Re(e,0,n,1),Re(e,100,n,1)]),ue(o.slider,["#000000",Re(e,t,50,1),"#ffffff"])}for(var{maxValues:l,toCss:d,toHex:s}=oe[K],c=0;c<X.length;++c){var h=X[c];se(h.input,arguments[c]),h.point.element.style.left=arguments[c]/l[c]*100+"%"}Y.value=s(e,t,n),V&&(V.style.backgroundColor=d(e,t,n,i/255),V.dispatchEvent(new Event("colorchange")))}function fe(){for(var e=[],t=0;t<X.length;++t)e.push(X[t].input.value);pe(...e)}function me(e){ae=this,ve(e)}function ve(e){if(ae){e.preventDefault();var t=ae,n=t.slider.element.getBoundingClientRect(),i=Math.max(n.left,Math.min(e.clientX,n.right))-n.left,a=oe[K].maxValues[t.num];se(t.input,Math.round(i/n.width*a)),fe()}}function ge(e){ae=null}le=a("7cwBr").getBundleURL("6gEBg")+a("bRler").resolve("j5Mty");var we=!1;function ye(){W.contains(j)&&!we&&(j.element.classList.add("hide"),we=!0,W.removeChildAfterTransition(j,(function(){we=!1})),V=null,q&&(be(!1),q=null))}function be(e){q&&((re=e)?(N.element.classList.add("active"),q.addEventListener("eyedrop",xe)):(N.element.classList.remove("active"),q.removeEventListener("eyedrop",xe)),q.dispatchEvent(new CustomEvent("edstatechange",{detail:re})))}function xe(e){re&&(he(e.detail.mode),pe(...e.detail.color),be(!1))}function Le(e,t,n){n/=100;const i=t=>(t+e/30)%12,a=(t/=100)*Math.min(n,1-n),r=e=>n-a*Math.max(-1,Math.min(i(e)-3,Math.min(9-i(e),1)));return[255*r(0),255*r(8),255*r(4)]}function Ce(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function Ee(e,t,n){return e=Math.floor(e),t=Math.floor(t),n=Math.floor(n),Ce(e)+Ce(t)+Ce(n)}function ke(e){return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Be(e,t,n,i){return"rgba("+e+","+t+","+n+","+i+")"}function Re(e,t,n,i){return"hsla("+e+","+t+"%,"+n+"%,"+i+")"}var Fe,Ie,Me,Pe,Se={init:function(e){W=e,(j=new b.Floatbox).element.classList.add("hide"),j.element.id="colorPicker";var t=new b.Flexbox;t.flexDirection="column",t.gap="0.25rem",j.appendChild(t);var n=new b.Flexbox;n.element.style.marginBottom="0.5rem",t.appendChild(n),(G=new b.Button("HSL")).element.classList.add("modeBtn"),n.appendChild(G),(z=new b.Button("RGB")).element.classList.add("modeBtn"),n.appendChild(z),X=[],t.appendChildren([de("H"),de("S"),de("L"),de("A")]);var i=new b.Flexbox;i.justifyContent="center",i.alignItems="center",i.gap="0.5rem",t.appendChild(i);var a=new b.Label("Hex");i.appendChild(a),(Y=new b.Input("text")).placeholder="ffffff",Y.element.style.fontFamily="monospace",i.appendChild(Y),(N=new b.Button).element.classList.add("edButton");var r=document.createElement("img");r.src=new URL(le),r.width=r.height=16,N.element.appendChild(r),i.appendChild(N);var o=new b.Button(R("Close"));o.element.style.marginTop="0.5rem",t.appendChild(o),G.addEventListener("click",he.bind(null,"hsl")),z.addEventListener("click",he.bind(null,"rgb"));for(var l=0;l<X.length;++l){var d=X[l];d.input.addEventListener("input",(function(){se(d.input,d.input.value),fe()}));var s=d.slider;s.addEventListener("mousedown",me.bind(d)),document.addEventListener("mousemove",ve),document.addEventListener("mouseup",ge),s.addEventListener("touchstart",Q,{passive:!0})}var c=/^#?[0-9A-F]{6}$/i,h=X[3];Y.addEventListener("input",(function(){var e=this.value;if(c.test(e)){"#"==e[0]&&(e=e.slice(1));var[t,n,i]=ke(e);he("rgb"),pe(t,n,i,ce(X[3].input))}})),N.addEventListener("click",(function(){be(!re)})),o.addEventListener("click",ye),ue(h.slider,[Be(255,255,255,0),Be(255,255,255,1)]),K=null},show:function(e,t){if(W.contains(j)||(W.appendChild(j),setTimeout((function(){j.element.classList.remove("hide")}),0)),e){if(V==e)return;V=e;var n=e.style.backgroundColor;if(n.startsWith("rgb")||"#"==n[0]){he("rgb");var[i,a,r,o]="#"==n[0]?ke(n.slice(1)):n.replace(/(rgba?\(|\))| /g,"").split(",");pe(i,a,r,void 0===o?255:o)}else if(n.startsWith("hsl")){he("hsl");var[l,d,s,o]=n.replace(/(hsla?\(|\))| /g,"").split(",");pe(l,d,s,void 0===o?255:o)}var c=e.getBoundingClientRect(),h=j.element,u=h.getBoundingClientRect(),p=Math.max(0,Math.min(c.top-u.height-6,window.innerHeight-u.height)),f=Math.max(0,Math.min(c.right-u.width,window.innerWidth-u.width));h.style.top=p+"px",h.style.left=f+"px",t&&(q=t)}else V=null,he("hsl"),pe(0,100,100,255)},hide:ye,isEyeDropperActive:function(){return re}},Te=new Z,Ae=document.createElement("canvas"),Oe=Ae.getContext("2d"),De={brightness:{name:"Brightness",min:0,max:200,unit:"%"},contrast:{name:"Contrast",min:0,max:200,unit:"%"},"hue-rotate":{name:"Hue",min:0,max:360,unit:"deg"},saturate:{name:"Saturation",min:0,max:200,unit:"%"},grayscale:{name:"Grayscale",min:0,max:100,unit:"%"},sepia:{name:"Sepia",min:0,max:100,unit:"%"},invert:{name:"Invert",min:0,max:100,unit:"%"},opacity:{name:"Opacity",min:0,max:100,unit:"%"},blur:{name:"Blur",min:0,max:100,unit:"px"}},Ue={brightness:100,contrast:100,"hue-rotate":0,saturate:100,grayscale:0,sepia:0,invert:0,opacity:100,blur:0};var He=H((function(){Oe.clearRect(0,0,Ae.width,Ae.height),Oe.filter=We(Pe),Oe.drawImage(Ie,0,0)}));function We(e){var t="";for(let i in e){if(e[i]!=Ue[i]){var n=De[i].unit;t+=i+"("+e[i]+n+")"}}return""==t&&(t="none"),t}var _e,je,Ge,ze,Ye,Ne,Xe,Ke={init:function(e){(Fe=new b.Dialog(R("Filters"))).element.style.textAlign="center",Fe.element.style.minWidth="22rem",e.appendChild(Fe),Ae.style.marginTop="0",Ae.style.marginBottom="0.5rem",Fe.body.appendChild(Ae);var t=$("filterDetent0",[0]),n=$("filterDetent100",[100]),i=[];for(let e in De){var a=De[e],r=Te.create(e,R(a.name),"range"),o=Te[e];o.min=a.min,o.max=a.max;var l=Ue[e];0==l?o.setAttribute("list",t):100==l&&o.setAttribute("list",n),o.addEventListener("input",(function(){Pe[e]=this.value,He()})),i.push(r)}var d=new b.Widget;d.element.id="filtersInputsBox",d.appendChildren(i),Fe.appendChild(d);var s=new b.Button(R("Reset"),"secondary");s.element.style.marginRight="auto",Fe.appendButton(s);var c=new b.Button(R("OK"));Fe.appendButton(c),c.addEventListener("click",(function(){Fe.hide(),Me&&Me()})),s.addEventListener("click",(function(){for(let e in Pe)Te[e].value=Ue[e],delete Pe[e];He()}))},showOptions:function(e,t,n){e?Pe=e:(e=Ue,Pe={});for(let t in De)Te[t].value=t in e?e[t]:Ue[t];Ie=t,Me=n,Ae.width=Ie.width,Ae.height=Ie.height,He(),Fe.show()},optionsToFilter:We,canvas:Ae},Ve="data:text/html;base64,PCFET0NUWVBFIGh0bWw+PGh0bWw+PGJvZHkgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IzI1MjcyOTsiPjwvYm9keT48L2h0bWw+";Xe=a("7cwBr").getBundleURL("6gEBg")+a("bRler").resolve("gvGqy");var qe={discord:new URL(Xe)},Je={};function Qe(e){return new Promise((t=>{e.addEventListener("load",t,{once:!0})}))}Je=a("7cwBr").getBundleURL("6gEBg")+a("bRler").resolve("YCPzX");var Ze=document.createElement("canvas"),$e=Ze.getContext("2d");async function et(e){Ze.width=Ze.height=e,$e.imageSmoothingQuality="high",$e.drawImage(Ye,0,0,Ye.width,Ye.height,0,0,e,e);var t=await new Promise((e=>Ze.toBlob(e)));return URL.createObjectURL(t)}var tt,nt,it,at,rt,ot,lt,dt,st,ct,ht,ut,pt,ft,mt,vt,gt,wt,yt,bt={init:function(e){(_e=new b.Dialog(R("Web Preview"))).element.id="webPreviewDialog",_e.body.innerText=R("Select a website:"),e.appendChild(_e);var t=new b.Button(R("Close"));_e.appendButton(t),(je=new b.Selector).addOption("----","placeholder",!0),je.addOption("Discord","discord"),je.element.style.marginLeft="0.5rem",_e.appendChild(je);var n=new b.Widget;n.element.id="previewIFrameWrapper",_e.appendChild(n),(Ge=document.createElement("iframe")).id="previewIFrame",Ge.title=R("Web Preview"),n.body.appendChild(Ge),(ze=new b.Widget).element.id="loadNotif",n.appendChild(ze);var i=document.createElement("img");i.id="loadSpinner",i.src=new URL(Je),i.width=i.height=128,i.alt="Loading",ze.body.appendChild(i);var a=new b.Label(R("Loading..."));ze.appendChild(a),t.addEventListener("click",(function(){_e.hide(),Ne()})),je.addEventListener("change",(function(){var e,t;e=this.value,(t=ze.element).classList.add("show"),Ge.src=qe[e],Ge.addEventListener("load",(async function(){Ge.contentDocument?await async function(){for(var e=Ge.contentDocument.getElementsByClassName("avatar"),t={},n=0;n<e.length;++n){var i=e[n],a=i.dataset.size,r=t[a];r||(t[a]=r=await et(a)),i.src=r,await Qe(i),i.draggable=!1}for(var n in t)URL.revokeObjectURL(t[n])}():S.show(R("Failed to load preview page.")),t.classList.remove("show")}),{once:!0})}))},show:function(e,t){Ye=e,Ne=t,je.value="placeholder",Ge.src=Ve,_e.show()}},xt=new Z,Lt=document.createElement("a"),Ct={CIRCLE:1,SQUARE:2,FREEFORM:3},Et=Ct.CIRCLE,kt=[128,64,32];var Bt,Rt={};function Ft(){yt.src||(yt.src="./demo.mp4",yt.play()),wt.show()}function It(e,t){var n=Tt(e);!n||n<10||(Et!=Ct.FREEFORM?(xt.width.value=xt.height.value=n,mn.width=mn.height=n):mn[t]=n,ln(mn.width,mn.height),gn(),xt.showPreview.checked&&En())}function Mt(e,t){var n=Tt(e);void 0!==n&&(mn[t]=n,on(mn.x,mn.y),gn(),xt.showPreview.checked&&En())}function Pt(){if(xt.playGif.checked){var e=++xt.frame.value;e==U.frames.length&&(xt.frame.value=e=0);var t=U.frames[e];Yt=t.bitmap,Bn(),setTimeout(Pt,10*t.info.delay)}}function St(e){var t=new b.Label(e);return t.element.classList.add("sectionTitle"),t}function Tt(e){if(""!=e.value){var t=Number(e.value);if(!isNaN(t))return t;Xt(R("Invalid value"))}}function At(e,t,n){var i=new b.Button(e),a=["menuBtn"];return t&&a.push("split"),n&&a.push("chosen"),i.element.classList.add(...a),i}function Ot(e,t,n){var i,a=At(e,!1,n),r=function(e){var t=document.createElement("span");return t.classList.add("shapeIcon",e),t}(t);return a.element.prepend(r),a.addEventListener("click",(i=Ct[t.toUpperCase()],function(){if(Et!=i){Et=i,i!=Ct.FREEFORM&&ln(mn.width,mn.width);for(let e=0;e<ft.length;++e)ft[e].parentNode.style.borderRadius=(i==Ct.CIRCLE?kt[e]:0)+"px";this.classList.add("chosen"),Bt.classList.remove("chosen"),Bt=this,gn(),xt.showPreview.checked&&En()}})),a}Rt=a("7cwBr").getBundleURL("6gEBg")+a("bRler").resolve("1SrrK");var Dt,Ut,Ht,Wt,_t,jt,Gt,zt,Yt,Nt=null;function Xt(e,t){null!=Nt&&clearTimeout(Nt),t||(t=1e3);var n=ct.element;n.innerText=e,n.classList.add("show"),Nt=setTimeout((function(){n.classList.remove("show"),Nt=null}),t)}function Kt(){Dt={},vt.show()}function Vt(){Fn(),mt.show()}function qt(){if(zt){var e=U.isAnimated()?U.frames[0].bitmap:Yt;Ut.width=e.width,Ut.height=e.height,Ht.drawImage(e,0,0),zt=!1}gt.show()}function Jt(e,t){var n=e.width,i=e.height,a=Math.abs(Math.sin(t)),r=Math.abs(Math.cos(t)),o=Math.ceil(n*r+i*a),l=Math.ceil(n*a+i*r);return ht.width=o,ht.height=l,ut.translate(o/2,l/2),ut.rotate(t),ut.drawImage(e,-n/2,-i/2),createImageBitmap(ut.getImageData(0,0,o,l))}function Qt(e,t){lt.width=rt.width=Ln.width=e,lt.height=rt.height=Ln.height=t}var Zt,$t=!1;function en(){tt.appendChild(nt),setTimeout((function(){nt.element.classList.remove("hide")}),0),localStorage.getItem("tutorialShown")||(Ft(),localStorage.setItem("tutorialShown","true"))}function tn(){nt.element.classList.add("hide"),tt.removeChildAfterTransition(nt),Se.hide(),xt.playGif.checked=!1}function nn(){return nt.element.classList.contains("hide")}function an(){var e;rn(),e=Math.floor(.5*(Yt.width<Yt.height?Yt.width:Yt.height)),e-=e%10,mn.x=mn.y=0,ln(e,e),on(0,0),xt.flipH.checked=xt.flipV.checked=!1,gn(),Bn()}function rn(){var e=it.element,t=e.offsetWidth,n=e.offsetHeight,i=t/n,a=Yt.width/Yt.height,r=xt.scaleDevicePixel.checked?1:devicePixelRatio;un((i>a?n/Yt.height:t/Yt.width)*r),cn(0,0)}function on(e,t){xt.allowOffscreen.checked||(e=Math.max(0,Math.min(e,Yt.width-mn.width)),t=Math.max(0,Math.min(t,Yt.height-mn.height))),mn.x=e,mn.y=t,xt.xPos.value=e,xt.yPos.value=t}function ln(e,t,n){xt.allowOffscreen.checked||(e=Math.min(e,Yt.width-mn.x),t=Math.min(t,Yt.height-mn.y));var i=Yt.width<50||Yt.height<50?1:10;e=Math.max(i,e),t=Math.max(i,t),Et!=Ct.FREEFORM&&((n?e>t:e<t)?t=e:e=t),mn.width=e,mn.height=t,xt.width.value=e,xt.height.value=t}var dn=0,sn=0;function cn(e,t){dn=e,sn=t;var n=at.element;n.style.marginLeft=dn+"px",n.style.marginTop=sn+"px"}var hn=1;function un(e){var t=xt.scaleDevicePixel.checked?1:devicePixelRatio,n=(e=Math.round(1e3*Math.max(.1,Math.min(e,8)))/1e3)/t;at.element.style.transform="scale("+n.toFixed(3)+")",xt.zoom.value=Math.round(100*e);var i=Math.ceil(Math.max(1,1/(n*devicePixelRatio)));i!=ot.lineWidth&&(ot.lineWidth=i,gn());var a=e/hn;cn(dn*a,sn*a),hn=e,Xt(R("Zoom: ")+ +(100*e).toFixed(1)+"%")}function pn(e,t){var n=xt.flipH.checked,i=xt.flipV.checked,a=1,r=1;n&&(t.translate(e.width,0),a=-1),i&&(t.translate(0,e.height),r=-1),t.scale(a,r)}var fn,mn={x:0,y:0,width:0,height:0},vn=!1;var gn=H((function(){var e,t=ot;t.globalCompositeOperation="source-over",vn?(e=[0,0,rt.width,rt.height],vn=!1):(e=fn,t.clearRect(...e)),t.fillStyle="rgba(0,0,0,0.5)",t.fillRect(...e);var n,i,a=t.lineWidth,r=mn.x-a/2,o=mn.y-a/2,l=mn.width+a,d=mn.height+a;if(t.strokeStyle="#ffffff",Et==Ct.CIRCLE?(t.strokeRect(r,o,l,d),n=mn.x+mn.width/2,i=mn.y+mn.height/2,t.beginPath(),t.arc(n,i,l/2-a/2,0,2*Math.PI)):(t.beginPath(),t.rect(r,o,l,d)),t.save(),t.stroke(),t.restore(),t.globalCompositeOperation="destination-out",t.fillStyle="#000000",t.fill(),xt.showGuidelines.checked){t.globalCompositeOperation="source-over",t.setLineDash([10,10]),t.strokeStyle=xt.guideColor.style.backgroundColor,t.lineWidth+=1+Math.floor(mn.width*mn.height/1e6),void 0===n&&(n=mn.x+mn.width/2,i=mn.y+mn.height/2);var s=mn.x+mn.width,c=mn.y+mn.height;t.beginPath(),ie(t,n,i,n,mn.y),ie(t,n,i,mn.x,i),ie(t,n,i,n,c),ie(t,n,i,s,i),t.stroke(),t.setLineDash([]),t.lineWidth=a}fn=[mn.x-a,mn.y-a,mn.width+2*a,mn.height+2*a]})),wn=H((function(){var e=dt;e.clearRect(0,0,Yt.width,Yt.height),e.fillStyle=xt.bgColor.style.backgroundColor,e.fillRect(0,0,Yt.width,Yt.height),pn(lt,e),e.drawImage(Yt,0,0,Yt.width,Yt.height),e.resetTransform()})),yn=!1,bn=!1;async function xn(){if(yn)return void(bn=!0);yn=!0;var e,t,n=xt.flipH.checked,i=xt.flipV.checked;if(U.isAnimated()||n||i||!(Yt instanceof Image)){var a=await function(){let e=Cn;return e.clearRect(0,0,Yt.width,Yt.height),pn(Ln,e),e.drawImage(Yt,0,0,Yt.width,Yt.height),e.resetTransform(),new Promise((e=>Ln.toBlob(e)))}();e=URL.createObjectURL(a),t=!0}else e=Yt.src;let r=0;for(let n=0;n<ft.length;++n){var o=ft[n];o.addEventListener("load",(function(){++r==ft.length&&(yn=!1,t&&URL.revokeObjectURL(e),bn&&(bn=!1,xn()))}),{once:!0}),o.src=e}}var Ln=document.createElement("canvas"),Cn=Ln.getContext("2d");function En(){for(let i=0;i<ft.length;++i){let a=ft[i];var e=kt[i],t=e/mn.width,n=e/mn.height;a.style.left=-mn.x*t+"px",a.style.top=-mn.y*n+"px",a.style.width=Yt.width*t+"px",a.style.height=Yt.height*n+"px"}}function kn(){xn(),En()}function Bn(){wn(),xt.showPreview.checked&&kn()}function Rn(e,t){pn(e,t);let[n,i]=function(){var e=xt.flipH.checked,t=xt.flipV.checked;let n=mn.x,i=mn.y;return e&&(n=Yt.width-mn.width-n),t&&(i=Yt.height-mn.height-i),[n,i]}();t.drawImage(Yt,n,i,mn.width,mn.height,0,0,mn.width,mn.height),t.resetTransform()}function Fn(e,t){e||(e=ht);let n=e.getContext("2d");e.width=mn.width,e.height=mn.height,n.fillStyle=xt.bgColor.style.backgroundColor,n.fillRect(0,0,e.width,e.height),t&&(n.filter=t),Rn(e,n)}function In(e,t){Lt.href=e,Lt.download=t,Lt.click()}function Mn(){ht.toBlob((function(e){var t=URL.createObjectURL(e);In(t,Zt+"_cropped.png"),setTimeout((function(){URL.revokeObjectURL(t)}),0)}))}var Pn=!1,Sn=!1,Tn=!1,An=!1;function On(e){if(Se.isEyeDropperActive())it.element.style.cursor="default";else{var t,n=at.element.getBoundingClientRect();if(n.x+=n.width*(mn.x/Yt.width),n.y+=n.height*(mn.y/Yt.height),n.width*=mn.width/Yt.width,n.height*=mn.height/Yt.height,(Pn=ee(e.clientX,e.clientY,n))&&!Xn){var i=n.x+n.width/2,a=n.y+n.height/2;(Sn=!te(e.clientX,e.clientY,i,a,n.width/2))?(Tn=e.clientX<i,t=(An=e.clientY<a)?Tn?"nw-resize":"ne-resize":Tn?"sw-resize":"se-resize"):t="move"}else t="grab";it.element.style.cursor=t}}var Dn=!1,Un=!0;function Hn(e){if(!nn()&&0==e.button){if(Un=!0,Se.isEyeDropperActive()){var t=lt.getBoundingClientRect(),n={mode:"rgb"};if(ee(e.clientX,e.clientY,t)){var i=(e.clientX-t.x)/t.width*lt.width,a=(e.clientY-t.y)/t.height*lt.height,r=dt.getImageData(i,a,1,1);n.color=r.data}else n.color=[30,30,30,255];lt.dispatchEvent(new CustomEvent("eyedrop",{detail:n}))}On(e),Pn||(it.element.style.cursor="grabbing"),Dn=!0}}function Wn(){Un=!1}var _n=null,jn=null;function Gn(e){if(!nn())if(Dn){if(null!=_n&&null!=jn){var t=e.clientX-_n,n=e.clientY-jn,i=xt.scaleDevicePixel.checked?1:devicePixelRatio,a=hn/i;if(e.shiftKey&&(t=a*Math.sign(t),n=a*Math.sign(n)),Pn){t=Math.round(t/a),n=Math.round(n/a);var r=mn.x,o=mn.y,l=Tn?-1:1,d=An?-1:1;if(Sn){var s=mn.width,c=mn.height;if(Et==Ct.FREEFORM)s+=t*l,c+=n*d,Tn&&(r+=t)<0&&(s+=r,r=0),An&&(o+=n)<0&&(c+=o,o=0);else{var h=Math.abs(t)>Math.abs(n)?t*l:n*d,u=h*l,p=h*d;let e=r+u,i=o+p,a=e+s+h,m=i+c+h;var f=0;xt.allowOffscreen.checked||(Tn&&e<0&&(f=-e),An&&i<0&&(f=-i),a>Yt.width&&(f=a-Yt.width-u),m>Yt.height&&(f=m-Yt.height-p)),f&&(h=f>h?0:h-f),s=c+=h,Tn&&(r+=h*l),An&&(o+=h*d)}Tn&&s<10&&(r-=10-s),An&&c<10&&(o-=10-c),mn.x=r,mn.y=o,ln(s,c),on(r,o)}else on(r+=t,o+=n);gn(),xt.showPreview.checked&&En()}else cn(dn+t,sn+n)}_n=e.clientX,jn=e.clientY}else On(e)}function zn(e){nn()||0!=e.button||(On(e),Dn=!1,_n=jn=null,Pn=!1)}function Yn(e){if(!nn()){var t=.1;e.deltaY>0&&(t=-t),un(hn+t)}}var Nn,Xn=!1;function Kn(e){Q.call(this,e),e.touches.length>=2&&(Xn=!0,Nn=ne(e.touches[0],e.touches[1]),Pn=!1)}function Vn(e){if(Xn){var t=ne(e.touches[0],e.touches[1]);un(hn+(t-Nn)/200),Nn=t}}function qn(e){Xn&&e.touches.length<2&&(Xn=!1)}function Jn(e){if(Un){var t;if(e.code)t=e.code;else switch(e.keyCode){case 38:t="ArrowUp";break;case 40:t="ArrowDown";break;case 37:t="ArrowLeft";break;case 39:t="ArrowRight";break;default:return}var n=e.shiftKey?2:1;switch(t){case"ArrowUp":n=-n;case"ArrowDown":e.ctrlKey?ln(mn.width,mn.height+n,n>0):on(mn.x,mn.y+n);break;case"ArrowLeft":n=-n;case"ArrowRight":e.ctrlKey?ln(mn.width+n,mn.height,n>0):on(mn.x+n,mn.y);break;default:return}gn(),xt.showPreview.checked&&En()}}var Qn,Zn={init:function(e){tt=e,(nt=new b.Flexbox).element.id="editorBox",nt.element.classList.add("hide"),function(){(it=new b.Flexbox).element.id="editorInnerBox",it.element.style.cursor="grab",nt.appendChild(it),(at=new b.Widget).element.id="canvasBox",it.appendChild(at),(lt=document.createElement("canvas")).id="imgCanvas",at.body.appendChild(lt),dt=lt.getContext("2d"),(rt=document.createElement("canvas")).id="editorCanvas",at.body.appendChild(rt),(ot=rt.getContext("2d")).lineWidth=1;var e=new b.Button("⛶");e.element.classList.add("innerBoxBtn"),e.element.title=R("Toggle fullscreen"),e.element.style.right="0",it.appendChild(e);var t=new b.Button("?");t.element.classList.add("innerBoxBtn"),t.element.title=R("Show tutorial"),t.element.style.right="2.5rem",it.appendChild(t),e.addEventListener("click",(function(){document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()})),function(){(wt=new b.Dialog(R("Tutorial"))).element.style.textAlign="center",tt.appendChild(wt);var e=new b.Label(R("Drag the crop selector to move or resize it."));wt.appendChild(e),(yt=document.createElement("video")).style.pointerEvents="none",yt.style.width="100%",yt.style.marginTop="0.5rem",yt.loop=!0,yt.poster=new URL(Rt),wt.body.appendChild(yt);var t=new b.Label(R('Dragging anywhere outside of the crop selector will move the viewport. Use the mouse wheel or pinch the screen with two fingers to zoom in/out.\nOnce you\'re done, press the "Save image..." button to save your cropped image.\n\nYou may view this tutorial at any time by pressing the "?" button at the top right of the screen.'));wt.appendChild(t),wt.appendHideButton(R("OK"))}(),t.addEventListener("click",Ft),(pt=new b.Flexbox).element.id="previewBox",ft=[];for(let e=0;e<3;++e){var n=kt[e];let t=new b.Widget,i=t.element.style;i.width=i.height=n+"px",i.borderRadius=n/2+"px",pt.appendChild(t);let a=new Image;t.element.appendChild(a),ft.push(a)}it.appendChild(pt)}(),function(){Se.init(tt),(st=new b.Flexbox).element.id="editorMenu",nt.appendChild(st);var e=At(R("Save image...")),t=At(R("Save as GIF...")),n=At(R("Fit image to viewport")),i=At(R("Rotate...")),a=new b.Widget;a.element.id="shapeBtnContainer";var r=Ot(R("Circle"),"circle",!0),o=Ot(R("Square"),"square"),l=Ot(R("Freeform"),"freeform");a.appendChildren([r,o,l]),Bt=r.element,st.appendChildren([St(R("Save")),e,t,St(R("Crop Area")),xt.create("width",R("Width"),"text",!0),xt.create("height",R("Height"),"text",!0),xt.create("xPos",R("X Pos"),"text",!0),xt.create("yPos",R("Y Pos"),"text",!0),xt.create("allowOffscreen",R("Allow offscreen"),"checkbox"),St(R("Crop Shape")),a,xt.create("showGuidelines",R("Show guidelines"),"checkbox"),xt.create("guideColor",R("Guidelines color"),"color"),St(R("Image")),xt.create("flipH",R("Flip horizontally"),"checkbox"),xt.create("flipV",R("Flip vertically"),"checkbox"),i,xt.create("frame",R("Frame"),"range"),xt.create("playGif",R("Play GIF"),"checkbox"),xt.create("bgColor",R("Background color"),"color"),St(R("Viewport")),xt.create("zoom",R("Zoom"),"range"),xt.create("scaleDevicePixel",R("Scale to device pixel"),"checkbox"),n,xt.create("showPreview",R("Show preview"),"checkbox")]),xt.frame.value=0,xt.frame.disabled=!0,xt.showPreview.checked=!0,xt.bgColor.style.backgroundColor="rgba(255,255,255,0)",xt.guideColor.style.backgroundColor="rgb(255,255,0)";var d=new b.Button(R("Open another image"),"secondary");d.element.id="returnBtn",st.appendChild(d);var s=new b.Button(R("Hide panel"));s.element.id="hideBtn",st.appendChild(s),d.addEventListener("click",(function(){tn(),ui.show()}));var c=it.element.style;s.addEventListener("click",(function(){c.width&&c.height?(c.removeProperty("width"),c.removeProperty("height"),pt.element.classList.remove("panelHidden"),s.text=R("Hide panel")):(c.width="100%",c.height="100%",pt.element.classList.add("panelHidden"),s.text=R("Show panel"))})),xt.width.addEventListener("input",(function(){It(this,"width")})),xt.height.addEventListener("input",(function(){It(this,"height")})),xt.xPos.addEventListener("input",(function(){Mt(this,"x")})),xt.yPos.addEventListener("input",(function(){Mt(this,"y")})),xt.showGuidelines.addEventListener("change",gn),xt.flipH.addEventListener("change",Bn),xt.flipV.addEventListener("change",Bn);var h=$("zoomDetents",[50,100,200,400]),u=xt.zoom;u.min=10,u.max=800,u.value=hn,u.setAttribute("list",h),u.addEventListener("input",(function(){un(this.value/100)})),xt.scaleDevicePixel.addEventListener("change",(function(){un(hn)})),n.addEventListener("click",(function(){rn()})),xt.showPreview.addEventListener("change",(function(e){this.checked?(pt.element.style.display="flex",kn()):pt.element.style.display="none"})),i.addEventListener("click",qt),xt.frame.addEventListener("input",(function(){if(U.isAnimated()){var e=this.value;Yt=U.frames[e].bitmap,Bn(),Xt(R("Frame: ")+e)}})),e.addEventListener("click",Vt),t.addEventListener("click",Kt),xt.playGif.addEventListener("change",(function(){U.frames.length<2||this.checked&&Pt()})),xt.bgColor.addEventListener("click",(function(){Se.show(this,lt)})),xt.guideColor.addEventListener("click",(function(){Se.show(this,lt)})),xt.bgColor.addEventListener("colorchange",(function(){wn();var e=xt.bgColor.style.backgroundColor;for(let t=0;t<ft.length;++t){ft[t].parentNode.style.backgroundColor=e}})),xt.guideColor.addEventListener("colorchange",gn),st.addEventListener("scroll",Se.hide,{passive:!0}),lt.addEventListener("edstatechange",(function(e){e.detail?rt.style.display="none":rt.style.removeProperty("display")}))}(),(ct=new b.Floatbox).element.id="notifBox",nt.appendChild(ct),function(){Ke.init(tt),bt.init(tt),(mt=new b.Dialog(R("Save Image"))).element.id="saveDialog",tt.appendChild(mt);var e=new b.Label(R("You can save the image now, or apply some filters and check how your avatar would look on some websites."));mt.appendChild(e),mt.body.appendChild(document.createElement("br")),ht=document.createElement("canvas"),ut=ht.getContext("2d",{willReadFrequently:!0}),mt.body.appendChild(ht);var t=new b.Widget;t.element.id="imgActionsContainer",mt.appendChild(t);var n=new b.Button("✨ "+R("Filters..."));t.appendChild(n);var i=new b.Button("🖼️ "+R("Preview..."));t.appendChild(i);var a=new b.Button(R("Save"));mt.appendButton(a);var r=new b.Button(R("Close"),"secondary");mt.appendButton(r),a.addEventListener("click",Mn),r.addEventListener("click",(function(){mt.hide()})),n.addEventListener("click",(function(){mt.hide(),Ke.showOptions(null,ht,(function(){ut.clearRect(0,0,mn.width,mn.height),ut.drawImage(Ke.canvas,0,0),mt.show()}))})),i.addEventListener("click",(function(){mt.hide(),bt.show(ht,(function(){mt.show()}))}))}(),function(){(vt=new b.Dialog(R("GIF Options"))).appendChildren([xt.create("startFrame",R("Start frame"),"number"),xt.create("endFrame",R("End frame"),"number"),xt.create("loopCount",R("Loop count"),"number"),xt.create("speedMult",R("Speed multiplier"),"number"),xt.create("keepGifColors",R("Keep original colors"),"checkbox")]);var e=new b.Label(R("Filters"));e.element.classList.add("menuInputBox"),vt.appendChild(e);var t=new b.Button("✨ "+R("Options..."));t.element.style.marginLeft="auto",e.appendChild(t),xt.startFrame.value=xt.startFrame.min=0,xt.endFrame.value=xt.endFrame.min=0,xt.loopCount.value=xt.loopCount.min=0,xt.speedMult.value=1,xt.speedMult.step=.25,xt.speedMult.min=0,xt.keepGifColors.style.paddingTop="0";var n=new b.Button(R("Save"));vt.appendButton(n),n.addEventListener("click",(function(){vt.hide(),async function(){var e=new U.Renderer(mn.width,mn.height,{loop:Math.floor(xt.loopCount.value)}),t=U.frames,n=t.length?t.length-1:0,i=Math.max(0,Math.min(Math.floor(xt.startFrame.value),n)),a=Math.max(0,Math.min(Math.floor(xt.endFrame.value),n))+1,r=Ke.optionsToFilter(Dt);I.setProgress(0),I.show();var o=xt.keepGifColors.checked,l=+xt.speedMult.value;for(let n=i;n<a;++n){let i=0;if(t.length){var d=t[n];Yt=d.bitmap,i=l?d.info.delay/l:0}Fn(ht,r);let s=ut.getImageData(0,0,mn.width,mn.height);e.addFrame(s,{delay:i,keepColors:o}),I.setProgress((n+1)/a)}e.end(),I.hide(),ut.filter="none";var s=e.getUint8Array(),c=new Blob([s],{type:"image/gif"}),h=URL.createObjectURL(c);In(h,Zt+"_cropped.gif"),setTimeout((function(){URL.revokeObjectURL(h)}),0),t.length&&(Yt=t[xt.frame.value].bitmap)}()})),t.addEventListener("click",(function(){vt.hide(),Fn(),Ke.showOptions(Dt,ht,(function(){vt.show()}))})),vt.appendHideButton(R("Cancel"),"secondary"),tt.appendChild(vt)}(),function(){(gt=new b.Dialog(R("Rotate"))).element.style.textAlign="center",tt.appendChild(gt),(Ut=document.createElement("canvas")).id="rotateCanvas",Ht=Ut.getContext("2d"),gt.body.appendChild(Ut),_t=new b.Label("0°"),gt.appendChild(_t);var e=$("rotateDetents",[90,180,270]);(Wt=new b.Input("range")).element.style.width="100%",Wt.min=0,Wt.max=360,Wt.step=.1,Wt.value=0,Wt.element.setAttribute("list",e),Wt.element.setAttribute("aria-label",R("Rotation angle")),gt.appendChild(Wt);var t=new b.Button(R("Apply"));gt.appendButton(t),t.addEventListener("click",(function(){gt.hide(),async function(e){if(0!=e&&360!=e)if(e=e*Math.PI/180,U.isAnimated()){Gt||(Gt=U.frames);for(var t=[],n=0;n<Gt.length;++n){var{info:i,bitmap:a}=Gt[n],r=await Jt(a,e);t[n]={info:i,bitmap:r}}U.frames=t}else jt||(jt=Yt),Yt=await Jt(jt,e);else if(jt)Yt=jt,jt=null;else{if(!Gt)return;U.frames=Gt,Gt=null}if(U.isAnimated()){var o=xt.frame.value;Yt=U.frames[o].bitmap}Qt(Yt.width,Yt.height),vn=!0,en(),an()}(Wt.value)})),gt.appendHideButton(R("Cancel"),"secondary"),Wt.addEventListener("input",(function(){_t.text=this.value+"°",Ut.style.transform="rotate("+this.value+"deg)"}))}(),it.addEventListener("mousedown",Hn),st.addEventListener("mousedown",Wn),document.addEventListener("mousemove",Gn),document.addEventListener("mouseup",zn),document.addEventListener("blur",zn),it.addEventListener("wheel",Yn,{passive:!0}),"ontouchstart"in document&&(it.addEventListener("touchstart",Kn,{passive:!0}),document.addEventListener("touchmove",Vn,{passive:!0}),document.addEventListener("touchend",qn,{passive:!0})),document.addEventListener("keydown",Jn)},open:function(e,t){if($t&&(URL.revokeObjectURL(jt?jt.src:Yt.src),$t=!1),jt=Gt=null,U.reset()&&(xt.frame.value=0,xt.frame.disabled=!0,xt.startFrame.value=0,xt.endFrame.value=0,xt.loopCount.value=0,xt.keepGifColors.checked=!1,xt.playGif.checked=!1),I.setProgress(-1),I.show(),e instanceof File)Zt=e.name.slice(0,e.name.lastIndexOf(".")),"image/gif"==e.type&&U.load(e,xt),e=URL.createObjectURL(e),$t=!0;else{if(""==e)return;if(Yt&&e==Yt.src)return I.hide(),en(),an(),void t();Zt=e.slice(e.lastIndexOf("/")+1,e.lastIndexOf("."))}var n,i;Yt instanceof Image||(Yt=new Image),Yt.addEventListener("load",n=function(){I.setProgress(1),I.hide(),Qt(Yt.width,Yt.height),vn=!0,Wt.value=0,_t.text="0°",Ut.style.transform="",zt=!0,en(),an(),t(),Yt.removeEventListener("load",n),Yt.removeEventListener("error",i)}),Yt.addEventListener("error",i=function(){I.hide(),S.show(R("Failed to load image.")),Yt.removeEventListener("load",n),Yt.removeEventListener("error",i)}),Yt.src=e},show:en,hide:tn},$n={};function ei(){Qn.hide()}$n=a("7cwBr").getBundleURL("6gEBg")+a("bRler").resolve("hsCcC");var ti,ni={init:function(e){(Qn=new b.Dialog(R("About"))).element.style.textAlign="center",e.appendChild(Qn);var t=document.createElement("img");t.src=new URL($n),t.alt="Banner",t.width=740,t.height=128,t.style.width="auto",t.style.height="3rem",t.style.marginBottom="0.5rem",t.draggable=!0,Qn.body.appendChild(t),Qn.body.appendChild(document.createElement("br"));var n=new b.Label(R("Simple and accurate avatar cropping tool.\n"));Qn.appendChild(n);var i=new b.Label(R("Source code: "));Qn.appendChild(i);var a=document.createElement("a");a.href="https://github.com/LeadRDRK/AvatarCropper",a.innerText=a.href+"\n",a.target="_blank",a.draggable=!1,Qn.body.appendChild(a),Qn.body.appendChild(document.createElement("hr"));var r=document.createElement("b");r.innerText=R("Translators\n"),Qn.body.appendChild(r);var o=B.getLanguages();for(const e in o){var l=o[e],d=new b.Label(l.name+" - "+l.author+"\n");Qn.appendChild(d)}var s=new b.Button(R("OK"));Qn.appendButton(s),s.addEventListener("click",ei),t.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text/pain","https://leadrdrk.com/static/generic.png")})),t.addEventListener("dragend",(function(e){S.show("it's him! (drawn by @ReikoRobo)"),ei()}))},show:function(){Qn.show()},hide:ei};function ii(){ti.hide()}var ai,ri,oi,li={init:function(e){ti=new b.Dialog(R("Privacy")),e.appendChild(ti),ti.body.innerText=R("This app runs entirely in your browser! No image or data is ever uploaded to any external server.");var t=new b.Button(R("OK"));ti.appendButton(t),t.addEventListener("click",ii)},show:function(){ti.show()},hide:ii};function di(){ri.element.classList.add("hide"),oi.hide(),hi.shown=!1,ai.removeChildAfterTransition(ri,(function(){ai.contains(oi)&&ai.removeChild(oi)}))}var si=document.createElement("input");function ci(){si.value=null,si.click()}si.type="file",si.accept="image/*",si.addEventListener("change",(function(e){var t=this.files;for(let e=0;e<t.length;++e){let n=t[e];if(n.type.startsWith("image/"))return void Zn.open(n,di)}S.show(R("Invalid image file."))}));var hi={shown:!1,init:function(e,t){ai=e,ni.init(ai),li.init(ai),(ri=new b.Flexbox).element.id="welcomeScreen",ri.justifyContent="center",ri.alignItems="center";var n=new b.Flexbox("column");n.gap="0.25rem";var i=document.createElement("img");i.src=new URL($n),i.width=740,i.height=128,i.id="title",i.alt="Banner",i.draggable=!1,i.onload=t,n.element.appendChild(i);var a=new b.Label("v2.1.2 - ");a.element.id="versionLabel";var r=new b.Button(R("About"),"link");a.appendChild(r),a.element.appendChild(document.createTextNode(" | "));var o=new b.Button(R("Privacy"),"link");a.appendChild(o),a.element.appendChild(document.createTextNode(" | "));var l=document.createElement("a");l.innerText=R("Changelog"),l.href="https://github.com/LeadRDRK/AvatarCropper/releases",l.draggable=!1,l.target="_blank",a.element.appendChild(l),n.appendChild(a);var d=new b.Selector;d.element.id="langSelector";var s=B.getLanguages();for(const e in s)d.addOption(s[e].name,e);d.value=localStorage.getItem("lang"),n.appendChild(d);var c=new b.Flexbox("column");c.element.id="openButtonsBox",c.flexBasis="20%",c.gap="0.5rem";var h=new b.Button(R("Open File..."));c.appendChild(h);var u=new b.Button(R("Paste Image..."),"secondary");c.appendChild(u);var p=new b.Label(R("You can also drag and drop an image here."));p.element.style.textAlign="center",p.element.style.fontStyle="italic",c.appendChild(p),ri.appendChild(n),ri.appendChild(c),h.addEventListener("click",ci),function(){oi=new b.Dialog(R("Paste Image"));var e=R("Paste your image into the input box."),t=new b.Label(e);t.element.style.marginBottom="0.5rem",oi.appendChild(t);var n=new b.Input("text");n.element.id="urlInput",n.element.setAttribute("aria-label",e),oi.appendChild(n),oi.appendHideButton(R("Cancel")),n.addEventListener("paste",(function(e){var t=e.clipboardData||e.originalEvent.clipboardData;if(t){var n=t.items;for(let e=0;e<n.length;++e){let t=n[e];if("file"==t.kind){let e=t.getAsFile();if(e.type.startsWith("image/")){Zn.open(e,di);break}}}}})),n.addEventListener("input",(function(){n.value=""})),ai.appendChild(oi)}(),u.addEventListener("click",oi.show.bind(oi)),r.addEventListener("click",ni.show.bind(ni)),o.addEventListener("click",li.show.bind(li)),d.addEventListener("change",(function(){localStorage.setItem("lang",this.value),bi()})),hi.shown=!0},show:function(){setTimeout((function(){ri.element.classList.remove("hide")}),0),ai.appendChild(ri),ai.appendChild(oi),hi.shown=!0},hide:di},ui=hi;function pi(e,t){var n=new CustomEvent("imagedrop",{detail:e});t.dispatchEvent(n)}function fi(e,t){return!!e.type.startsWith("image/")&&(pi(e,t),!0)}var mi=["Hey, you should drop your file into the window.","Just drop it...","I'm getting rather impatient.","What are you doing!?","Drop it now!","Stop teasing me!","I beg you!","Please, just give me your file!!!"];function vi(e,t){this.element=t;var n=new b.Flexbox;n.element.id="dndOverlay";var i=0,a=0;t.addEventListener("dragenter",(function(){if(0==a&&(e.appendChild(n),++i>=10)){var t=mi[Math.min(i-10,mi.length-1)];S.show(t)}++a})),t.addEventListener("dragleave",(function(){0==--a&&e.removeChild(n)})),t.addEventListener("drop",(function(r){r.preventDefault(),i>=10+mi.length-1&&S.show("Thank you."),i=0,e.removeChild(n),a=0;var o=r.dataTransfer.getData("text/pain");if(o)pi(o,t);else{if(r.dataTransfer.items)for(const e of r.dataTransfer.items){if("file"!=e.kind)continue;if(fi(e.getAsFile(),t))return}else for(const e of r.dataTransfer.files)if(fi(e,t))return;S.show(R("Invalid image file."))}})),t.addEventListener("dragover",(function(e){e.preventDefault()}))}vi.prototype.addListener=function(e){this.element.addEventListener("imagedrop",e)};var gi=vi,wi={};async function yi(){"serviceWorker"in navigator&&navigator.serviceWorker.register(wi),document.body.innerHTML="";var e=new b.Container;e.element.style.backgroundColor="#1e1e1e",e.createShadow(),S.init(e);try{await B.init();var t=function(){var e=localStorage.getItem("lang");if(null==e){var t=B.getLanguages(),n=navigator.language.toLowerCase();for(const i in t)if(0==i.indexOf(n)){e=i;break}null==e&&(e="en-us"),localStorage.setItem("lang",e)}return e}();try{await B.loadLanguage(t)}catch(e){S.show("Failed to load translations for "+t)}}catch(e){S.show("Failed to initialize i18n.")}Zn.init(e),I.init(e),I.setProgress(-1),I.show(),ui.init(e,(function(){ui.show(),I.hide()})),new gi(e,document.body).addListener((e=>{Zn.open(e.detail,(function(){ui.shown&&ui.hide()}))})),"ontouchmove"in document&&(document.addEventListener("touchmove",Q,{passive:!0}),document.addEventListener("touchend",Q,{passive:!0})),window.scrollTo(0,1)}wi=a("7cwBr").getBundleURL("6gEBg")+a("bRler").resolve("fSHUt"),yi();var bi=yi;
//# sourceMappingURL=index.b6b74d39.js.map
