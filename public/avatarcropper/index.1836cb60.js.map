{"mappings":"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","sources":["<anon>","src/index.js","src/pbfe.js","src/welcome-screen.js","src/editor.js","src/loading-dialog.js","src/i18n.js","src/toast.js","src/gif.js","src/omggif.js","src/color-picker.js","src/utils.js","node_modules/.pnpm/@parcel+runtime-js@2.12.0_@parcel+core@2.12.0_@swc+helpers@0.5.13_/node_modules/@parcel/runtime-js/lib/runtime-efcf33c9352c5b55.js","src/image-filters.js","src/web-preview.js","node_modules/.pnpm/@parcel+runtime-js@2.12.0_@parcel+core@2.12.0_@swc+helpers@0.5.13_/node_modules/@parcel/runtime-js/lib/runtime-324320554b5f2ba2.js","node_modules/.pnpm/@parcel+runtime-js@2.12.0_@parcel+core@2.12.0_@swc+helpers@0.5.13_/node_modules/@parcel/runtime-js/lib/runtime-56a805804eb1dd8f.js","node_modules/.pnpm/@parcel+runtime-js@2.12.0_@parcel+core@2.12.0_@swc+helpers@0.5.13_/node_modules/@parcel/runtime-js/lib/runtime-eb3a9a7c46180a2c.js","src/about-dialog.js","node_modules/.pnpm/@parcel+runtime-js@2.12.0_@parcel+core@2.12.0_@swc+helpers@0.5.13_/node_modules/@parcel/runtime-js/lib/runtime-594db731634b5ff7.js","src/privacy-dialog.js","src/dnd.js","node_modules/.pnpm/@parcel+runtime-js@2.12.0_@parcel+core@2.12.0_@swc+helpers@0.5.13_/node_modules/@parcel/runtime-js/lib/runtime-8401a8a7019e1835.js"],"sourcesContent":["\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequired274\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequired274\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nfunction $21104bc65c54f4d6$var$inherit(cls, className) {\n    var proto = Object.create(cls.prototype);\n    proto.className = className;\n    return proto;\n}\nfunction $21104bc65c54f4d6$var$addElementProperty(cls, name) {\n    Object.defineProperty(cls.prototype, name, {\n        get: function() {\n            return this.element[name];\n        },\n        set: function(value) {\n            this.element[name] = value;\n        }\n    });\n}\nfunction $21104bc65c54f4d6$var$addStyleProperty(cls, name) {\n    Object.defineProperty(cls.prototype, name, {\n        get: function() {\n            return this.element.style[name];\n        },\n        set: function(text) {\n            this.element.style[name] = text;\n        }\n    });\n}\nfunction $21104bc65c54f4d6$var$Widget() {\n    if (!this.element) this.element = document.createElement(\"div\");\n    if (!this.body) this.body = this.element;\n    this.element.classList.add(\"pbfe\" + (this.className ? this.className : \"Widget\"));\n}\n$21104bc65c54f4d6$var$Widget.prototype.appendChild = function(widget) {\n    this.body.appendChild(widget.element);\n};\n$21104bc65c54f4d6$var$Widget.prototype.appendChildren = function(array) {\n    for(var i = 0; i < array.length; ++i)this.appendChild(array[i]);\n};\n$21104bc65c54f4d6$var$Widget.prototype.removeChild = function(widget) {\n    this.body.removeChild(widget.element);\n};\n$21104bc65c54f4d6$var$Widget.prototype.removeChildAfterTransition = function(widget, callback) {\n    var body = this.body;\n    this.element.addEventListener(\"transitionend\", function listener() {\n        body.removeChild(widget.element);\n        if (callback) callback();\n        this.removeEventListener(\"transitionend\", listener);\n    });\n};\n$21104bc65c54f4d6$var$Widget.prototype.addEventListener = function(type, listener) {\n    this.element.addEventListener.apply(this.element, arguments);\n};\n$21104bc65c54f4d6$var$Widget.prototype.contains = function(widget) {\n    return widget.element.parentNode == this.element;\n};\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Widget, \"width\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Widget, \"height\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Widget, \"order\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Widget, \"flexGrow\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Widget, \"flexShrink\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Widget, \"flexBasis\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Widget, \"alignSelf\");\nfunction $21104bc65c54f4d6$var$Container(element) {\n    if (!element) {\n        element = document.createElement(\"div\");\n        document.body.appendChild(element);\n    }\n    this.element = element;\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$Container.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Widget, \"Container\");\n$21104bc65c54f4d6$var$Container.prototype.createShadow = function() {\n    if (document.getElementById(\"pbfeShadow\")) return;\n    var div = document.createElement(\"div\");\n    div.style.cssText = \"position:fixed;top:0;left:0;width:100%;height:100%;z-index:100;\";\n    div.id = \"pbfeShadow\";\n    this.element.appendChild(div);\n};\n$21104bc65c54f4d6$var$Container.prototype.showToast = function(text, timeout, waitHideTransition) {\n    var toast = new $21104bc65c54f4d6$var$Toast(text);\n    this.appendChild(toast);\n    // Force transition to play, if any.\n    setTimeout(toast.show.bind(toast), 0);\n    var self = this;\n    setTimeout(function() {\n        if (waitHideTransition) {\n            toast.element.addEventListener(\"transitionend\", function listener() {\n                self.removeChild(toast);\n                toast.element.removeEventListener(\"transitionend\", listener);\n            });\n            toast.hide();\n        } else this.removeChild(toast);\n    }, timeout);\n};\nfunction $21104bc65c54f4d6$var$Flexbox(direction) {\n    var element = document.createElement(\"div\");\n    element.style.display = \"flex\";\n    element.style.flexDirection = direction;\n    this.element = element;\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$Flexbox.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Widget, \"Flexbox\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Flexbox, \"flexDirection\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Flexbox, \"justifyContent\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Flexbox, \"alignItems\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Flexbox, \"alignContent\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Flexbox, \"gap\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Flexbox, \"rowGap\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Flexbox, \"columnGap\");\nfunction $21104bc65c54f4d6$var$Floatbox() {\n    var element = document.createElement(\"div\");\n    element.style.position = \"fixed\";\n    this.element = element;\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$Floatbox.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Widget, \"Floatbox\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Floatbox, \"zIndex\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Floatbox, \"top\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Floatbox, \"left\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Floatbox, \"bottom\");\n$21104bc65c54f4d6$var$addStyleProperty($21104bc65c54f4d6$var$Floatbox, \"right\");\nfunction $21104bc65c54f4d6$var$Label(text) {\n    var element = document.createElement(\"span\");\n    element.innerText = text;\n    this.element = element;\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$Label.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Widget, \"Label\");\nObject.defineProperty($21104bc65c54f4d6$var$Label.prototype, \"text\", {\n    get: function() {\n        return this.element.innerText;\n    },\n    set: function(text) {\n        this.element.innerText = text;\n    }\n});\nfunction $21104bc65c54f4d6$var$Button(text, type) {\n    var element = document.createElement(\"button\");\n    if (text) element.innerText = text;\n    if (type) element.classList.add(type);\n    this.element = element;\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$Button.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Label, \"Button\");\nfunction $21104bc65c54f4d6$var$Dialog(titleText) {\n    var element = document.createElement(\"div\");\n    element.style.zIndex = 101;\n    var title = document.createElement(\"div\");\n    title.classList.add(\"pbfeDialogTitle\");\n    title.innerText = titleText;\n    element.appendChild(title);\n    var body = document.createElement(\"div\");\n    body.classList.add(\"pbfeDialogBody\");\n    element.appendChild(body);\n    var buttons = document.createElement(\"div\");\n    buttons.classList.add(\"pbfeDialogButtons\");\n    buttons.style.display = \"flex\";\n    element.appendChild(buttons);\n    this.element = element;\n    this.title = title;\n    this.body = body;\n    this.buttons = buttons;\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$Dialog.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Widget, \"Dialog\");\n$21104bc65c54f4d6$var$Dialog.prototype.show = function() {\n    this.element.classList.add(\"show\");\n    var shadow = document.getElementById(\"pbfeShadow\");\n    if (shadow) shadow.classList.add(\"show\");\n};\n$21104bc65c54f4d6$var$Dialog.prototype.hide = function() {\n    if (this.element.classList.contains(\"show\")) {\n        this.element.classList.remove(\"show\");\n        var shadow = document.getElementById(\"pbfeShadow\");\n        if (shadow) shadow.classList.remove(\"show\");\n    }\n};\n$21104bc65c54f4d6$var$Dialog.prototype.appendButton = function(widget) {\n    this.buttons.appendChild(widget.element);\n};\n$21104bc65c54f4d6$var$Dialog.prototype.removeButton = function(widget) {\n    this.buttons.removeChild(widget.element);\n};\n$21104bc65c54f4d6$var$Dialog.prototype.appendHideButton = function(btnText, type) {\n    var btn = new $21104bc65c54f4d6$var$Button(btnText, type);\n    btn.addEventListener(\"click\", this.hide.bind(this));\n    this.appendButton(btn);\n};\nObject.defineProperty($21104bc65c54f4d6$var$Dialog.prototype, \"titleText\", {\n    get: function() {\n        return this._title.innerText;\n    },\n    set: function(text) {\n        this._title.innerText = text;\n    }\n});\nfunction $21104bc65c54f4d6$var$Input(type) {\n    function createCheckbox() {\n        var element = document.createElement(\"button\");\n        element.classList.add(\"pbfeCheckbox\");\n        var inner = document.createElement(\"div\");\n        inner.classList.add(\"pbfeCheckboxInner\");\n        element.appendChild(inner);\n        Object.defineProperty(element, \"checked\", {\n            get: function() {\n                return this._checked;\n            },\n            set: function(value) {\n                if (this._checked == value) return;\n                this._checked = value;\n                if (value) element.classList.add(\"checked\");\n                else element.classList.remove(\"checked\");\n                element.dispatchEvent(new Event(\"change\"));\n            }\n        });\n        element._checked = false;\n        element.addEventListener(\"click\", function() {\n            this.checked = !this.checked;\n        });\n        return element;\n    }\n    var element;\n    switch(type){\n        case \"checkbox\":\n            element = createCheckbox();\n            break;\n        default:\n            // no replacement, fallback to input element\n            element = document.createElement(\"input\");\n            element.type = type;\n            break;\n    }\n    this.element = element;\n    this.type = type;\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$Input.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Widget, \"Input\");\n$21104bc65c54f4d6$var$addElementProperty($21104bc65c54f4d6$var$Input, \"value\");\n$21104bc65c54f4d6$var$addElementProperty($21104bc65c54f4d6$var$Input, \"placeholder\");\n$21104bc65c54f4d6$var$addElementProperty($21104bc65c54f4d6$var$Input, \"min\");\n$21104bc65c54f4d6$var$addElementProperty($21104bc65c54f4d6$var$Input, \"max\");\n$21104bc65c54f4d6$var$addElementProperty($21104bc65c54f4d6$var$Input, \"step\");\nfunction $21104bc65c54f4d6$var$ProgressBar() {\n    var element = document.createElement(\"div\");\n    var inner = document.createElement(\"div\");\n    inner.classList.add(\"pbfeProgressBarInner\");\n    inner.style.width = \"0%\";\n    inner.style.height = \"100%\";\n    element.appendChild(inner);\n    this.element = element;\n    this.inner = inner;\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$ProgressBar.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Widget, \"ProgressBar\");\n$21104bc65c54f4d6$var$ProgressBar.prototype.setProgress = function(value) {\n    var inner = this.inner;\n    if (typeof value == \"number\") {\n        if (value < 0) {\n            inner.style.removeProperty(\"width\");\n            inner.classList.add(\"indeterminate\");\n            return;\n        } else value = value * 100 + \"%\";\n    }\n    if (inner.classList.contains(\"indeterminate\")) inner.classList.remove(\"indeterminate\");\n    inner.style.width = value;\n};\nfunction $21104bc65c54f4d6$var$Canvas() {\n    this.element = document.createElement(\"canvas\");\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$Canvas.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Widget, \"Canvas\");\n$21104bc65c54f4d6$var$Canvas.prototype.getContext = function() {\n    return this.element.getContext.apply(this.element, arguments);\n};\nfunction $21104bc65c54f4d6$var$Toast(text) {\n    var element = document.createElement(\"div\");\n    element.style.zIndex = 102;\n    element.innerText = text;\n    this.element = element;\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$Toast.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Label, \"Toast\");\n$21104bc65c54f4d6$var$Toast.prototype.show = function() {\n    this.element.classList.add(\"show\");\n};\n$21104bc65c54f4d6$var$Toast.prototype.hide = function() {\n    this.element.classList.remove(\"show\");\n};\nfunction $21104bc65c54f4d6$var$Selector() {\n    var element = document.createElement(\"select\");\n    this.element = element;\n    $21104bc65c54f4d6$var$Widget.call(this);\n}\n$21104bc65c54f4d6$var$Selector.prototype = $21104bc65c54f4d6$var$inherit($21104bc65c54f4d6$var$Widget, \"Selector\");\n$21104bc65c54f4d6$var$Selector.prototype.addOption = function(text, value, isPlaceholder) {\n    var option = document.createElement(\"option\");\n    option.text = text;\n    if (value) option.value = value;\n    if (isPlaceholder) option.hidden = option.disabled = option.selected = true;\n    this.element.appendChild(option);\n};\n$21104bc65c54f4d6$var$addElementProperty($21104bc65c54f4d6$var$Selector, \"value\");\nconst $21104bc65c54f4d6$var$pbfe = {\n    Container: $21104bc65c54f4d6$var$Container,\n    Widget: $21104bc65c54f4d6$var$Widget,\n    Flexbox: $21104bc65c54f4d6$var$Flexbox,\n    Floatbox: $21104bc65c54f4d6$var$Floatbox,\n    Label: $21104bc65c54f4d6$var$Label,\n    Button: $21104bc65c54f4d6$var$Button,\n    Dialog: $21104bc65c54f4d6$var$Dialog,\n    Input: $21104bc65c54f4d6$var$Input,\n    ProgressBar: $21104bc65c54f4d6$var$ProgressBar,\n    Canvas: $21104bc65c54f4d6$var$Canvas,\n    Toast: $21104bc65c54f4d6$var$Toast,\n    Selector: $21104bc65c54f4d6$var$Selector\n};\nvar $21104bc65c54f4d6$export$2e2bcd8739ae039 = $21104bc65c54f4d6$var$pbfe;\n\n\n\n\nvar $313f6ce5359206e9$var$strings = {};\nvar $313f6ce5359206e9$var$langs = {};\nasync function $313f6ce5359206e9$var$init() {\n    var res = await fetch(\"./i18n/langs.json\");\n    var json = await res.json();\n    $313f6ce5359206e9$var$langs = json;\n}\nasync function $313f6ce5359206e9$var$loadLanguage(lang) {\n    if (!(lang in $313f6ce5359206e9$var$langs)) throw new Error;\n    var res = await fetch(\"./i18n/\" + lang + \".json\");\n    var json = await res.json();\n    $313f6ce5359206e9$var$strings = json;\n}\nfunction $313f6ce5359206e9$var$getString(str) {\n    if (str in $313f6ce5359206e9$var$strings) return $313f6ce5359206e9$var$strings[str];\n    else return str;\n}\nfunction $313f6ce5359206e9$var$getLanguages() {\n    return $313f6ce5359206e9$var$langs;\n}\nvar $313f6ce5359206e9$var$i18n = {\n    init: $313f6ce5359206e9$var$init,\n    loadLanguage: $313f6ce5359206e9$var$loadLanguage,\n    getString: $313f6ce5359206e9$var$getString,\n    getLanguages: $313f6ce5359206e9$var$getLanguages\n};\nvar $313f6ce5359206e9$export$2e2bcd8739ae039 = $313f6ce5359206e9$var$i18n;\nvar $313f6ce5359206e9$export$71511d61b312f219 = $313f6ce5359206e9$var$getString;\n\n\nvar $4244c5b4a8c0a9c7$var$dialog, $4244c5b4a8c0a9c7$var$progressBar;\nfunction $4244c5b4a8c0a9c7$var$init(container) {\n    $4244c5b4a8c0a9c7$var$dialog = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Dialog((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Loading...\"));\n    container.appendChild($4244c5b4a8c0a9c7$var$dialog);\n    $4244c5b4a8c0a9c7$var$progressBar = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).ProgressBar;\n    $4244c5b4a8c0a9c7$var$progressBar.element.id = \"loadingBar\";\n    $4244c5b4a8c0a9c7$var$dialog.appendChild($4244c5b4a8c0a9c7$var$progressBar);\n}\nfunction $4244c5b4a8c0a9c7$var$show() {\n    $4244c5b4a8c0a9c7$var$dialog.show();\n}\nfunction $4244c5b4a8c0a9c7$var$hide() {\n    $4244c5b4a8c0a9c7$var$dialog.hide();\n}\nfunction $4244c5b4a8c0a9c7$var$setProgress(value) {\n    $4244c5b4a8c0a9c7$var$progressBar.setProgress(value);\n}\nvar $4244c5b4a8c0a9c7$var$loadingDialog = {\n    init: $4244c5b4a8c0a9c7$var$init,\n    show: $4244c5b4a8c0a9c7$var$show,\n    hide: $4244c5b4a8c0a9c7$var$hide,\n    setProgress: $4244c5b4a8c0a9c7$var$setProgress\n};\nvar $4244c5b4a8c0a9c7$export$2e2bcd8739ae039 = $4244c5b4a8c0a9c7$var$loadingDialog;\n\n\n\nvar $cff5b25a521f554e$var$container;\nfunction $cff5b25a521f554e$var$init(_container) {\n    $cff5b25a521f554e$var$container = _container;\n}\nfunction $cff5b25a521f554e$var$show(text) {\n    $cff5b25a521f554e$var$container.showToast(text, 3000, true);\n}\nvar $cff5b25a521f554e$var$toast = {\n    init: $cff5b25a521f554e$var$init,\n    show: $cff5b25a521f554e$var$show\n};\nvar $cff5b25a521f554e$export$2e2bcd8739ae039 = $cff5b25a521f554e$var$toast;\n\n\n\n\n// (c) Dean McNamee <dean@gmail.com>, 2013.\n//\n// https://github.com/deanm/omggif\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n//\n// omggif is a JavaScript implementation of a GIF 89a encoder and decoder,\n// including animation and compression.  It does not rely on any specific\n// underlying system, so should run in the browser, Node, or Plask.\nvar $71041c0c6f4131a3$export$47e375f7f82a91ef;\nvar $71041c0c6f4131a3$export$c4cdd6730c8d089c;\n\"use strict\";\nfunction $71041c0c6f4131a3$var$GifWriter(buf, width, height, gopts) {\n    var p = 0;\n    var gopts = gopts === undefined ? {} : gopts;\n    var loop_count = gopts.loop === undefined ? null : gopts.loop;\n    var global_palette = gopts.palette === undefined ? null : gopts.palette;\n    if (width <= 0 || height <= 0 || width > 65535 || height > 65535) throw new Error(\"Width/Height invalid.\");\n    function check_palette_and_num_colors(palette) {\n        var num_colors = palette.length;\n        if (num_colors < 2 || num_colors > 256 || num_colors & num_colors - 1) throw new Error(\"Invalid code/color length, must be power of 2 and 2 .. 256.\");\n        return num_colors;\n    }\n    // - Header.\n    buf[p++] = 0x47;\n    buf[p++] = 0x49;\n    buf[p++] = 0x46; // GIF\n    buf[p++] = 0x38;\n    buf[p++] = 0x39;\n    buf[p++] = 0x61; // 89a\n    // Handling of Global Color Table (palette) and background index.\n    var gp_num_colors_pow2 = 0;\n    var background = 0;\n    if (global_palette !== null) {\n        var gp_num_colors = check_palette_and_num_colors(global_palette);\n        while(gp_num_colors >>= 1)++gp_num_colors_pow2;\n        gp_num_colors = 1 << gp_num_colors_pow2;\n        --gp_num_colors_pow2;\n        if (gopts.background !== undefined) {\n            background = gopts.background;\n            if (background >= gp_num_colors) throw new Error(\"Background index out of range.\");\n            // The GIF spec states that a background index of 0 should be ignored, so\n            // this is probably a mistake and you really want to set it to another\n            // slot in the palette.  But actually in the end most browsers, etc end\n            // up ignoring this almost completely (including for dispose background).\n            if (background === 0) throw new Error(\"Background index explicitly passed as 0.\");\n        }\n    }\n    // - Logical Screen Descriptor.\n    // NOTE(deanm): w/h apparently ignored by implementations, but set anyway.\n    buf[p++] = width & 0xff;\n    buf[p++] = width >> 8 & 0xff;\n    buf[p++] = height & 0xff;\n    buf[p++] = height >> 8 & 0xff;\n    // NOTE: Indicates 0-bpp original color resolution (unused?).\n    buf[p++] = (global_palette !== null ? 0x80 : 0) | // Global Color Table Flag.\n    gp_num_colors_pow2; // NOTE: No sort flag (unused?).\n    buf[p++] = background; // Background Color Index.\n    buf[p++] = 0; // Pixel aspect ratio (unused?).\n    // - Global Color Table\n    if (global_palette !== null) for(var i = 0, il = global_palette.length; i < il; ++i){\n        var rgb = global_palette[i];\n        buf[p++] = rgb >> 16 & 0xff;\n        buf[p++] = rgb >> 8 & 0xff;\n        buf[p++] = rgb & 0xff;\n    }\n    if (loop_count !== null) {\n        if (loop_count < 0 || loop_count > 65535) throw new Error(\"Loop count invalid.\");\n        // Extension code, label, and length.\n        buf[p++] = 0x21;\n        buf[p++] = 0xff;\n        buf[p++] = 0x0b;\n        // NETSCAPE2.0\n        buf[p++] = 0x4e;\n        buf[p++] = 0x45;\n        buf[p++] = 0x54;\n        buf[p++] = 0x53;\n        buf[p++] = 0x43;\n        buf[p++] = 0x41;\n        buf[p++] = 0x50;\n        buf[p++] = 0x45;\n        buf[p++] = 0x32;\n        buf[p++] = 0x2e;\n        buf[p++] = 0x30;\n        // Sub-block\n        buf[p++] = 0x03;\n        buf[p++] = 0x01;\n        buf[p++] = loop_count & 0xff;\n        buf[p++] = loop_count >> 8 & 0xff;\n        buf[p++] = 0x00; // Terminator.\n    }\n    var ended = false;\n    this.addFrame = function(x, y, w, h, indexed_pixels, opts) {\n        if (ended === true) {\n            --p;\n            ended = false;\n        } // Un-end.\n        opts = opts === undefined ? {} : opts;\n        // TODO(deanm): Bounds check x, y.  Do they need to be within the virtual\n        // canvas width/height, I imagine?\n        if (x < 0 || y < 0 || x > 65535 || y > 65535) throw new Error(\"x/y invalid.\");\n        if (w <= 0 || h <= 0 || w > 65535 || h > 65535) throw new Error(\"Width/Height invalid.\");\n        if (indexed_pixels.length < w * h) throw new Error(\"Not enough pixels for the frame size.\");\n        var using_local_palette = true;\n        var palette = opts.palette;\n        if (palette === undefined || palette === null) {\n            using_local_palette = false;\n            palette = global_palette;\n        }\n        if (palette === undefined || palette === null) throw new Error(\"Must supply either a local or global palette.\");\n        var num_colors = check_palette_and_num_colors(palette);\n        // Compute the min_code_size (power of 2), destroying num_colors.\n        var min_code_size = 0;\n        while(num_colors >>= 1)++min_code_size;\n        num_colors = 1 << min_code_size; // Now we can easily get it back.\n        var delay = opts.delay === undefined ? 0 : opts.delay;\n        // From the spec:\n        //     0 -   No disposal specified. The decoder is\n        //           not required to take any action.\n        //     1 -   Do not dispose. The graphic is to be left\n        //           in place.\n        //     2 -   Restore to background color. The area used by the\n        //           graphic must be restored to the background color.\n        //     3 -   Restore to previous. The decoder is required to\n        //           restore the area overwritten by the graphic with\n        //           what was there prior to rendering the graphic.\n        //  4-7 -    To be defined.\n        // NOTE(deanm): Dispose background doesn't really work, apparently most\n        // browsers ignore the background palette index and clear to transparency.\n        var disposal = opts.disposal === undefined ? 0 : opts.disposal;\n        if (disposal < 0 || disposal > 3) throw new Error(\"Disposal out of range.\");\n        var use_transparency = false;\n        var transparent_index = 0;\n        if (opts.transparent !== undefined && opts.transparent !== null) {\n            use_transparency = true;\n            transparent_index = opts.transparent;\n            if (transparent_index < 0 || transparent_index >= num_colors) throw new Error(\"Transparent color index.\");\n        }\n        if (disposal !== 0 || use_transparency || delay !== 0) {\n            // - Graphics Control Extension\n            buf[p++] = 0x21;\n            buf[p++] = 0xf9; // Extension / Label.\n            buf[p++] = 4; // Byte size.\n            buf[p++] = disposal << 2 | (use_transparency === true ? 1 : 0);\n            buf[p++] = delay & 0xff;\n            buf[p++] = delay >> 8 & 0xff;\n            buf[p++] = transparent_index; // Transparent color index.\n            buf[p++] = 0; // Block Terminator.\n        }\n        // - Image Descriptor\n        buf[p++] = 0x2c; // Image Seperator.\n        buf[p++] = x & 0xff;\n        buf[p++] = x >> 8 & 0xff; // Left.\n        buf[p++] = y & 0xff;\n        buf[p++] = y >> 8 & 0xff; // Top.\n        buf[p++] = w & 0xff;\n        buf[p++] = w >> 8 & 0xff;\n        buf[p++] = h & 0xff;\n        buf[p++] = h >> 8 & 0xff;\n        // NOTE: No sort flag (unused?).\n        // TODO(deanm): Support interlace.\n        buf[p++] = using_local_palette === true ? 0x80 | min_code_size - 1 : 0;\n        // - Local Color Table\n        if (using_local_palette === true) for(var i = 0, il = palette.length; i < il; ++i){\n            var rgb = palette[i];\n            buf[p++] = rgb >> 16 & 0xff;\n            buf[p++] = rgb >> 8 & 0xff;\n            buf[p++] = rgb & 0xff;\n        }\n        p = $71041c0c6f4131a3$var$GifWriterOutputLZWCodeStream(buf, p, min_code_size < 2 ? 2 : min_code_size, indexed_pixels);\n        return p;\n    };\n    this.end = function() {\n        if (ended === false) {\n            buf[p++] = 0x3b; // Trailer.\n            ended = true;\n        }\n        return p;\n    };\n    this.getOutputBuffer = function() {\n        return buf;\n    };\n    this.setOutputBuffer = function(v) {\n        buf = v;\n    };\n    this.getOutputBufferPosition = function() {\n        return p;\n    };\n    this.setOutputBufferPosition = function(v) {\n        p = v;\n    };\n}\n// Main compression routine, palette indexes -> LZW code stream.\n// |index_stream| must have at least one entry.\nfunction $71041c0c6f4131a3$var$GifWriterOutputLZWCodeStream(buf, p, min_code_size, index_stream) {\n    buf[p++] = min_code_size;\n    var cur_subblock = p++; // Pointing at the length field.\n    var clear_code = 1 << min_code_size;\n    var code_mask = clear_code - 1;\n    var eoi_code = clear_code + 1;\n    var next_code = eoi_code + 1;\n    var cur_code_size = min_code_size + 1; // Number of bits per code.\n    var cur_shift = 0;\n    // We have at most 12-bit codes, so we should have to hold a max of 19\n    // bits here (and then we would write out).\n    var cur = 0;\n    function emit_bytes_to_buffer(bit_block_size) {\n        while(cur_shift >= bit_block_size){\n            buf[p++] = cur & 0xff;\n            cur >>= 8;\n            cur_shift -= 8;\n            if (p === cur_subblock + 256) {\n                buf[cur_subblock] = 255;\n                cur_subblock = p++;\n            }\n        }\n    }\n    function emit_code(c) {\n        cur |= c << cur_shift;\n        cur_shift += cur_code_size;\n        emit_bytes_to_buffer(8);\n    }\n    // I am not an expert on the topic, and I don't want to write a thesis.\n    // However, it is good to outline here the basic algorithm and the few data\n    // structures and optimizations here that make this implementation fast.\n    // The basic idea behind LZW is to build a table of previously seen runs\n    // addressed by a short id (herein called output code).  All data is\n    // referenced by a code, which represents one or more values from the\n    // original input stream.  All input bytes can be referenced as the same\n    // value as an output code.  So if you didn't want any compression, you\n    // could more or less just output the original bytes as codes (there are\n    // some details to this, but it is the idea).  In order to achieve\n    // compression, values greater then the input range (codes can be up to\n    // 12-bit while input only 8-bit) represent a sequence of previously seen\n    // inputs.  The decompressor is able to build the same mapping while\n    // decoding, so there is always a shared common knowledge between the\n    // encoding and decoder, which is also important for \"timing\" aspects like\n    // how to handle variable bit width code encoding.\n    //\n    // One obvious but very important consequence of the table system is there\n    // is always a unique id (at most 12-bits) to map the runs.  'A' might be\n    // 4, then 'AA' might be 10, 'AAA' 11, 'AAAA' 12, etc.  This relationship\n    // can be used for an effecient lookup strategy for the code mapping.  We\n    // need to know if a run has been seen before, and be able to map that run\n    // to the output code.  Since we start with known unique ids (input bytes),\n    // and then from those build more unique ids (table entries), we can\n    // continue this chain (almost like a linked list) to always have small\n    // integer values that represent the current byte chains in the encoder.\n    // This means instead of tracking the input bytes (AAAABCD) to know our\n    // current state, we can track the table entry for AAAABC (it is guaranteed\n    // to exist by the nature of the algorithm) and the next character D.\n    // Therefor the tuple of (table_entry, byte) is guaranteed to also be\n    // unique.  This allows us to create a simple lookup key for mapping input\n    // sequences to codes (table indices) without having to store or search\n    // any of the code sequences.  So if 'AAAA' has a table entry of 12, the\n    // tuple of ('AAAA', K) for any input byte K will be unique, and can be our\n    // key.  This leads to a integer value at most 20-bits, which can always\n    // fit in an SMI value and be used as a fast sparse array / object key.\n    // Output code for the current contents of the index buffer.\n    var ib_code = index_stream[0] & code_mask; // Load first input index.\n    var code_table = {}; // Key'd on our 20-bit \"tuple\".\n    emit_code(clear_code); // Spec says first code should be a clear code.\n    // First index already loaded, process the rest of the stream.\n    for(var i = 1, il = index_stream.length; i < il; ++i){\n        var k = index_stream[i] & code_mask;\n        var cur_key = ib_code << 8 | k; // (prev, k) unique tuple.\n        var cur_code = code_table[cur_key]; // buffer + k.\n        // Check if we have to create a new code table entry.\n        if (cur_code === undefined) {\n            // Emit index buffer (without k).\n            // This is an inline version of emit_code, because this is the core\n            // writing routine of the compressor (and V8 cannot inline emit_code\n            // because it is a closure here in a different context).  Additionally\n            // we can call emit_byte_to_buffer less often, because we can have\n            // 30-bits (from our 31-bit signed SMI), and we know our codes will only\n            // be 12-bits, so can safely have 18-bits there without overflow.\n            // emit_code(ib_code);\n            cur |= ib_code << cur_shift;\n            cur_shift += cur_code_size;\n            while(cur_shift >= 8){\n                buf[p++] = cur & 0xff;\n                cur >>= 8;\n                cur_shift -= 8;\n                if (p === cur_subblock + 256) {\n                    buf[cur_subblock] = 255;\n                    cur_subblock = p++;\n                }\n            }\n            if (next_code === 4096) {\n                emit_code(clear_code);\n                next_code = eoi_code + 1;\n                cur_code_size = min_code_size + 1;\n                code_table = {};\n            } else {\n                // Increase our variable bit code sizes if necessary.  This is a bit\n                // tricky as it is based on \"timing\" between the encoding and\n                // decoder.  From the encoders perspective this should happen after\n                // we've already emitted the index buffer and are about to create the\n                // first table entry that would overflow our current code bit size.\n                if (next_code >= 1 << cur_code_size) ++cur_code_size;\n                code_table[cur_key] = next_code++; // Insert into code table.\n            }\n            ib_code = k; // Index buffer to single input k.\n        } else ib_code = cur_code; // Index buffer to sequence in code table.\n    }\n    emit_code(ib_code); // There will still be something in the index buffer.\n    emit_code(eoi_code); // End Of Information.\n    // Flush / finalize the sub-blocks stream to the buffer.\n    emit_bytes_to_buffer(1);\n    // Finish the sub-blocks, writing out any unfinished lengths and\n    // terminating with a sub-block of length 0.  If we have already started\n    // but not yet used a sub-block it can just become the terminator.\n    if (cur_subblock + 1 === p) buf[cur_subblock] = 0;\n    else {\n        buf[cur_subblock] = p - cur_subblock - 1;\n        buf[p++] = 0;\n    }\n    return p;\n}\nfunction $71041c0c6f4131a3$var$GifReader(buf) {\n    var p = 0;\n    // - Header (GIF87a or GIF89a).\n    if (buf[p++] !== 0x47 || buf[p++] !== 0x49 || buf[p++] !== 0x46 || buf[p++] !== 0x38 || (buf[p++] + 1 & 0xfd) !== 0x38 || buf[p++] !== 0x61) throw new Error(\"Invalid GIF 87a/89a header.\");\n    // - Logical Screen Descriptor.\n    var width = buf[p++] | buf[p++] << 8;\n    var height = buf[p++] | buf[p++] << 8;\n    var pf0 = buf[p++]; // <Packed Fields>.\n    var global_palette_flag = pf0 >> 7;\n    var num_global_colors_pow2 = pf0 & 0x7;\n    var num_global_colors = 1 << num_global_colors_pow2 + 1;\n    var background = buf[p++];\n    buf[p++]; // Pixel aspect ratio (unused?).\n    var global_palette_offset = null;\n    var global_palette_size = null;\n    if (global_palette_flag) {\n        global_palette_offset = p;\n        global_palette_size = num_global_colors;\n        p += num_global_colors * 3; // Seek past palette.\n    }\n    var no_eof = true;\n    var frames = [];\n    var delay = 0;\n    var transparent_index = null;\n    var disposal = 0; // 0 - No disposal specified.\n    var loop_count = null;\n    this.width = width;\n    this.height = height;\n    while(no_eof && p < buf.length)switch(buf[p++]){\n        case 0x21:\n            switch(buf[p++]){\n                case 0xff:\n                    // Try if it's a Netscape block (with animation loop counter).\n                    if (buf[p] !== 0x0b || // 21 FF already read, check block size.\n                    // NETSCAPE2.0\n                    buf[p + 1] == 0x4e && buf[p + 2] == 0x45 && buf[p + 3] == 0x54 && buf[p + 4] == 0x53 && buf[p + 5] == 0x43 && buf[p + 6] == 0x41 && buf[p + 7] == 0x50 && buf[p + 8] == 0x45 && buf[p + 9] == 0x32 && buf[p + 10] == 0x2e && buf[p + 11] == 0x30 && // Sub-block\n                    buf[p + 12] == 0x03 && buf[p + 13] == 0x01 && buf[p + 16] == 0) {\n                        p += 14;\n                        loop_count = buf[p++] | buf[p++] << 8;\n                        p++; // Skip terminator.\n                    } else {\n                        p += 12;\n                        while(true){\n                            var block_size = buf[p++];\n                            // Bad block size (ex: undefined from an out of bounds read).\n                            if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n                            if (block_size === 0) break; // 0 size is terminator\n                            p += block_size;\n                        }\n                    }\n                    break;\n                case 0xf9:\n                    if (buf[p++] !== 0x4 || buf[p + 4] !== 0) throw new Error(\"Invalid graphics extension block.\");\n                    var pf1 = buf[p++];\n                    delay = buf[p++] | buf[p++] << 8;\n                    transparent_index = buf[p++];\n                    if ((pf1 & 1) === 0) transparent_index = null;\n                    disposal = pf1 >> 2 & 0x7;\n                    p++; // Skip terminator.\n                    break;\n                // Plain Text Extension could be present and we just want to be able\n                // to parse past it.  It follows the block structure of the comment\n                // extension enough to reuse the path to skip through the blocks.\n                case 0x01:\n                case 0xfe:\n                    while(true){\n                        var block_size = buf[p++];\n                        // Bad block size (ex: undefined from an out of bounds read).\n                        if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n                        if (block_size === 0) break; // 0 size is terminator\n                        // console.log(buf.slice(p, p+block_size).toString('ascii'));\n                        p += block_size;\n                    }\n                    break;\n                default:\n                    throw new Error(\"Unknown graphic control label: 0x\" + buf[p - 1].toString(16));\n            }\n            break;\n        case 0x2c:\n            var x = buf[p++] | buf[p++] << 8;\n            var y = buf[p++] | buf[p++] << 8;\n            var w = buf[p++] | buf[p++] << 8;\n            var h = buf[p++] | buf[p++] << 8;\n            var pf2 = buf[p++];\n            var local_palette_flag = pf2 >> 7;\n            var interlace_flag = pf2 >> 6 & 1;\n            var num_local_colors_pow2 = pf2 & 0x7;\n            var num_local_colors = 1 << num_local_colors_pow2 + 1;\n            var palette_offset = global_palette_offset;\n            var palette_size = global_palette_size;\n            var has_local_palette = false;\n            if (local_palette_flag) {\n                var has_local_palette = true;\n                palette_offset = p; // Override with local palette.\n                palette_size = num_local_colors;\n                p += num_local_colors * 3; // Seek past palette.\n            }\n            var data_offset = p;\n            p++; // codesize\n            while(true){\n                var block_size = buf[p++];\n                // Bad block size (ex: undefined from an out of bounds read).\n                if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n                if (block_size === 0) break; // 0 size is terminator\n                p += block_size;\n            }\n            frames.push({\n                x: x,\n                y: y,\n                width: w,\n                height: h,\n                has_local_palette: has_local_palette,\n                palette_offset: palette_offset,\n                palette_size: palette_size,\n                data_offset: data_offset,\n                data_length: p - data_offset,\n                transparent_index: transparent_index,\n                interlaced: !!interlace_flag,\n                delay: delay,\n                disposal: disposal\n            });\n            break;\n        case 0x3b:\n            no_eof = false;\n            break;\n        default:\n            throw new Error(\"Unknown gif block: 0x\" + buf[p - 1].toString(16));\n    }\n    this.numFrames = function() {\n        return frames.length;\n    };\n    this.loopCount = function() {\n        return loop_count;\n    };\n    this.frameInfo = function(frame_num) {\n        if (frame_num < 0 || frame_num >= frames.length) throw new Error(\"Frame index out of range.\");\n        return frames[frame_num];\n    };\n    this.decodeAndBlitFrameBGRA = function(frame_num, pixels) {\n        var frame = this.frameInfo(frame_num);\n        var num_pixels = frame.width * frame.height;\n        var index_stream = new Uint8Array(num_pixels); // At most 8-bit indices.\n        $71041c0c6f4131a3$var$GifReaderLZWOutputIndexStream(buf, frame.data_offset, index_stream, num_pixels);\n        var palette_offset = frame.palette_offset;\n        // NOTE(deanm): It seems to be much faster to compare index to 256 than\n        // to === null.  Not sure why, but CompareStub_EQ_STRICT shows up high in\n        // the profile, not sure if it's related to using a Uint8Array.\n        var trans = frame.transparent_index;\n        if (trans === null) trans = 256;\n        // We are possibly just blitting to a portion of the entire frame.\n        // That is a subrect within the framerect, so the additional pixels\n        // must be skipped over after we finished a scanline.\n        var framewidth = frame.width;\n        var framestride = width - framewidth;\n        var xleft = framewidth; // Number of subrect pixels left in scanline.\n        // Output index of the top left corner of the subrect.\n        var opbeg = (frame.y * width + frame.x) * 4;\n        // Output index of what would be the left edge of the subrect, one row\n        // below it, i.e. the index at which an interlace pass should wrap.\n        var opend = ((frame.y + frame.height) * width + frame.x) * 4;\n        var op = opbeg;\n        var scanstride = framestride * 4;\n        // Use scanstride to skip past the rows when interlacing.  This is skipping\n        // 7 rows for the first two passes, then 3 then 1.\n        if (frame.interlaced === true) scanstride += width * 28; // Pass 1.\n        var interlaceskip = 8; // Tracking the row interval in the current pass.\n        for(var i = 0, il = index_stream.length; i < il; ++i){\n            var index = index_stream[i];\n            if (xleft === 0) {\n                op += scanstride;\n                xleft = framewidth;\n                if (op >= opend) {\n                    scanstride = framestride * 4 + width * 4 * (interlaceskip - 1);\n                    // interlaceskip / 2 * 4 is interlaceskip << 1.\n                    op = opbeg + (framewidth + framestride) * (interlaceskip << 1);\n                    interlaceskip >>= 1;\n                }\n            }\n            if (index === trans) op += 4;\n            else {\n                var r = buf[palette_offset + index * 3];\n                var g = buf[palette_offset + index * 3 + 1];\n                var b = buf[palette_offset + index * 3 + 2];\n                pixels[op++] = b;\n                pixels[op++] = g;\n                pixels[op++] = r;\n                pixels[op++] = 255;\n            }\n            --xleft;\n        }\n    };\n    // I will go to copy and paste hell one day...\n    this.decodeAndBlitFrameRGBA = function(frame_num, pixels) {\n        var frame = this.frameInfo(frame_num);\n        var num_pixels = frame.width * frame.height;\n        var index_stream = new Uint8Array(num_pixels); // At most 8-bit indices.\n        $71041c0c6f4131a3$var$GifReaderLZWOutputIndexStream(buf, frame.data_offset, index_stream, num_pixels);\n        var palette_offset = frame.palette_offset;\n        // NOTE(deanm): It seems to be much faster to compare index to 256 than\n        // to === null.  Not sure why, but CompareStub_EQ_STRICT shows up high in\n        // the profile, not sure if it's related to using a Uint8Array.\n        var trans = frame.transparent_index;\n        if (trans === null) trans = 256;\n        // We are possibly just blitting to a portion of the entire frame.\n        // That is a subrect within the framerect, so the additional pixels\n        // must be skipped over after we finished a scanline.\n        var framewidth = frame.width;\n        var framestride = width - framewidth;\n        var xleft = framewidth; // Number of subrect pixels left in scanline.\n        // Output index of the top left corner of the subrect.\n        var opbeg = (frame.y * width + frame.x) * 4;\n        // Output index of what would be the left edge of the subrect, one row\n        // below it, i.e. the index at which an interlace pass should wrap.\n        var opend = ((frame.y + frame.height) * width + frame.x) * 4;\n        var op = opbeg;\n        var scanstride = framestride * 4;\n        // Use scanstride to skip past the rows when interlacing.  This is skipping\n        // 7 rows for the first two passes, then 3 then 1.\n        if (frame.interlaced === true) scanstride += width * 28; // Pass 1.\n        var interlaceskip = 8; // Tracking the row interval in the current pass.\n        for(var i = 0, il = index_stream.length; i < il; ++i){\n            var index = index_stream[i];\n            if (xleft === 0) {\n                op += scanstride;\n                xleft = framewidth;\n                if (op >= opend) {\n                    scanstride = framestride * 4 + width * 4 * (interlaceskip - 1);\n                    // interlaceskip / 2 * 4 is interlaceskip << 1.\n                    op = opbeg + (framewidth + framestride) * (interlaceskip << 1);\n                    interlaceskip >>= 1;\n                }\n            }\n            if (index === trans) op += 4;\n            else {\n                var r = buf[palette_offset + index * 3];\n                var g = buf[palette_offset + index * 3 + 1];\n                var b = buf[palette_offset + index * 3 + 2];\n                pixels[op++] = r;\n                pixels[op++] = g;\n                pixels[op++] = b;\n                pixels[op++] = 255;\n            }\n            --xleft;\n        }\n    };\n}\nfunction $71041c0c6f4131a3$var$GifReaderLZWOutputIndexStream(code_stream, p, output, output_length) {\n    var min_code_size = code_stream[p++];\n    var clear_code = 1 << min_code_size;\n    var eoi_code = clear_code + 1;\n    var next_code = eoi_code + 1;\n    var cur_code_size = min_code_size + 1; // Number of bits per code.\n    // NOTE: This shares the same name as the encoder, but has a different\n    // meaning here.  Here this masks each code coming from the code stream.\n    var code_mask = (1 << cur_code_size) - 1;\n    var cur_shift = 0;\n    var cur = 0;\n    var op = 0; // Output pointer.\n    var subblock_size = code_stream[p++];\n    // TODO(deanm): Would using a TypedArray be any faster?  At least it would\n    // solve the fast mode / backing store uncertainty.\n    // var code_table = Array(4096);\n    var code_table = new Int32Array(4096); // Can be signed, we only use 20 bits.\n    var prev_code = null; // Track code-1.\n    while(true){\n        // Read up to two bytes, making sure we always 12-bits for max sized code.\n        while(cur_shift < 16){\n            if (subblock_size === 0) break; // No more data to be read.\n            cur |= code_stream[p++] << cur_shift;\n            cur_shift += 8;\n            if (subblock_size === 1) subblock_size = code_stream[p++]; // Next subblock.\n            else --subblock_size;\n        }\n        // TODO(deanm): We should never really get here, we should have received\n        // and EOI.\n        if (cur_shift < cur_code_size) break;\n        var code = cur & code_mask;\n        cur >>= cur_code_size;\n        cur_shift -= cur_code_size;\n        // TODO(deanm): Maybe should check that the first code was a clear code,\n        // at least this is what you're supposed to do.  But actually our encoder\n        // now doesn't emit a clear code first anyway.\n        if (code === clear_code) {\n            // We don't actually have to clear the table.  This could be a good idea\n            // for greater error checking, but we don't really do any anyway.  We\n            // will just track it with next_code and overwrite old entries.\n            next_code = eoi_code + 1;\n            cur_code_size = min_code_size + 1;\n            code_mask = (1 << cur_code_size) - 1;\n            // Don't update prev_code ?\n            prev_code = null;\n            continue;\n        } else if (code === eoi_code) break;\n        // We have a similar situation as the decoder, where we want to store\n        // variable length entries (code table entries), but we want to do in a\n        // faster manner than an array of arrays.  The code below stores sort of a\n        // linked list within the code table, and then \"chases\" through it to\n        // construct the dictionary entries.  When a new entry is created, just the\n        // last byte is stored, and the rest (prefix) of the entry is only\n        // referenced by its table entry.  Then the code chases through the\n        // prefixes until it reaches a single byte code.  We have to chase twice,\n        // first to compute the length, and then to actually copy the data to the\n        // output (backwards, since we know the length).  The alternative would be\n        // storing something in an intermediate stack, but that doesn't make any\n        // more sense.  I implemented an approach where it also stored the length\n        // in the code table, although it's a bit tricky because you run out of\n        // bits (12 + 12 + 8), but I didn't measure much improvements (the table\n        // entries are generally not the long).  Even when I created benchmarks for\n        // very long table entries the complexity did not seem worth it.\n        // The code table stores the prefix entry in 12 bits and then the suffix\n        // byte in 8 bits, so each entry is 20 bits.\n        var chase_code = code < next_code ? code : prev_code;\n        // Chase what we will output, either {CODE} or {CODE-1}.\n        var chase_length = 0;\n        var chase = chase_code;\n        while(chase > clear_code){\n            chase = code_table[chase] >> 8;\n            ++chase_length;\n        }\n        var k = chase;\n        var op_end = op + chase_length + (chase_code !== code ? 1 : 0);\n        if (op_end > output_length) {\n            console.log(\"Warning, gif stream longer than expected.\");\n            return;\n        }\n        // Already have the first byte from the chase, might as well write it fast.\n        output[op++] = k;\n        op += chase_length;\n        var b = op; // Track pointer, writing backwards.\n        if (chase_code !== code) output[op++] = k;\n        chase = chase_code;\n        while(chase_length--){\n            chase = code_table[chase];\n            output[--b] = chase & 0xff; // Write backwards.\n            chase >>= 8; // Pull down to the prefix code.\n        }\n        if (prev_code !== null && next_code < 4096) {\n            code_table[next_code++] = prev_code << 8 | k;\n            // TODO(deanm): Figure out this clearing vs code growth logic better.  I\n            // have an feeling that it should just happen somewhere else, for now it\n            // is awkward between when we grow past the max and then hit a clear code.\n            // For now just check if we hit the max 12-bits (then a clear code should\n            // follow, also of course encoded in 12-bits).\n            if (next_code >= code_mask + 1 && cur_code_size < 12) {\n                ++cur_code_size;\n                code_mask = code_mask << 1 | 1;\n            }\n        }\n        prev_code = code;\n    }\n    if (op !== output_length) console.log(\"Warning, gif stream shorter than expected.\");\n    return output;\n}\n// CommonJS.\ntry {\n    $71041c0c6f4131a3$export$47e375f7f82a91ef = $71041c0c6f4131a3$var$GifWriter;\n    $71041c0c6f4131a3$export$c4cdd6730c8d089c = $71041c0c6f4131a3$var$GifReader;\n} catch (e) {}\n\n\nvar $3816ae512892ed40$var$frames = [];\nfunction $3816ae512892ed40$var$load(file, inputs) {\n    var reader = new FileReader;\n    reader.onloadend = async function() {\n        if (reader.error) {\n            toast.show(_(\"Failed to load GIF frames.\"));\n            return;\n        }\n        var view = new Uint8Array(reader.result);\n        var gifReader;\n        try {\n            gifReader = new (0, $71041c0c6f4131a3$export$c4cdd6730c8d089c)(view);\n        } catch (e) {\n            toast.show(_(\"Failed to load GIF frames: \") + e.message);\n            return;\n        }\n        var { width: width, height: height } = gifReader;\n        inputs.loopCount.value = gifReader.loopCount();\n        var ndFrameData, lastFrameData;\n        var clearBg;\n        for(let i = 0; i < gifReader.numFrames(); ++i){\n            const info = gifReader.frameInfo(i);\n            let inheritFrame;\n            if (!clearBg) {\n                if (info.disposal == 3) inheritFrame = ndFrameData;\n                else if (info.disposal != 0 && i > 0) inheritFrame = lastFrameData;\n            } else clearBg = false;\n            let imageData;\n            if (inheritFrame) imageData = new ImageData(new Uint8ClampedArray(inheritFrame), width, height);\n            else imageData = new ImageData(width, height);\n            gifReader.decodeAndBlitFrameRGBA(i, imageData.data);\n            lastFrameData = imageData.data;\n            if (info.disposal == 0) ndFrameData = imageData.data;\n            else if (info.disposal == 2) clearBg = true;\n            let bitmap = await createImageBitmap(imageData);\n            $3816ae512892ed40$var$frames[i] = {\n                info: info,\n                bitmap: bitmap\n            };\n        }\n        var lastFrame = gifReader.numFrames() - 1;\n        inputs.frame.min = 0;\n        inputs.frame.max = lastFrame;\n        inputs.frame.value = 0;\n        inputs.frame.disabled = false;\n        inputs.endFrame.value = lastFrame;\n        inputs.keepGifColors.checked = true;\n    };\n    reader.readAsArrayBuffer(file);\n}\nfunction $3816ae512892ed40$var$Renderer(width, height, gopts) {\n    this.buffer = [];\n    this.writer = new (0, $71041c0c6f4131a3$export$47e375f7f82a91ef)(this.buffer, width, height, gopts);\n}\n$3816ae512892ed40$var$Renderer.prototype.addFrame = function(imageData, opts) {\n    let delay = opts.delay != undefined ? opts.delay : 0;\n    let disposal = opts.disposal != undefined ? opts.disposal : 2;\n    let keepColors = opts.keepColors;\n    let x = opts.x != undefined ? opts.x : 0;\n    let y = opts.y != undefined ? opts.y : 0;\n    let width = imageData.width;\n    let height = imageData.height;\n    let palette = [];\n    let indexedPixels = [];\n    let transparent = $3816ae512892ed40$var$createFrame(imageData.data, palette, indexedPixels, keepColors);\n    this.writer.addFrame(x, y, width, height, indexedPixels, {\n        palette: palette,\n        delay: delay,\n        transparent: transparent,\n        disposal: disposal\n    });\n};\n$3816ae512892ed40$var$Renderer.prototype.end = function() {\n    this.writer.end();\n};\n$3816ae512892ed40$var$Renderer.prototype.getUint8Array = function() {\n    return Uint8Array.from(this.buffer);\n};\nfunction $3816ae512892ed40$var$createFrame(px, palette, indexedPixels, keepColors) {\n    var transparentIndex = null;\n    for(let i = 0; i < px.length; i += 4){\n        let r = px[i];\n        let g = px[i + 1];\n        let b = px[i + 2];\n        let a = px[i + 3];\n        if (a == 0) {\n            if (transparentIndex == null) {\n                if (palette.length < 256) transparentIndex = palette.push(0) - 1;\n                else {\n                    indexedPixels.push(0);\n                    continue;\n                }\n            }\n            indexedPixels.push(transparentIndex);\n            continue;\n        }\n        let rgb = ((r & 0xff) << 16) + ((g & 0xff) << 8) + (b & 0xff);\n        let index, lastDiff = null;\n        for(let x = 1; x < palette.length; ++x){\n            // Find color in palette\n            let prgb = palette[x];\n            if (prgb == rgb) {\n                index = x;\n                lastDiff = null;\n                break;\n            }\n            // Check if color is close\n            if (!keepColors || palette.length == 256) {\n                let pr = prgb >> 16 & 0xff;\n                let pg = prgb >> 8 & 0xff;\n                let pb = prgb & 0xff;\n                let diff = Math.abs(r - pr) + Math.abs(g - pg) + Math.abs(b - pb);\n                if (lastDiff == null || diff < lastDiff) {\n                    index = x;\n                    lastDiff = diff;\n                }\n            }\n        }\n        // Exponentially increase tolerance\n        var tolerance = 15 + 40 * Math.pow(2, 10 * (palette.length / 256) - 10);\n        if (palette.length != 256 && lastDiff > tolerance) index = null;\n        if (!index) index = palette.push(rgb) - 1;\n        indexedPixels.push(index);\n    }\n    if (palette.length == 256) return transparentIndex;\n    // Palette length needs to be a power of 2\n    // We do a *bit* of twiddling\n    let v = palette.length; // max is 256 = 8 bits\n    if (v < 2) v = 2;\n    else {\n        --v;\n        v |= v >> 1;\n        v |= v >> 2;\n        v |= v >> 4;\n        ++v;\n    }\n    // Pad extra values\n    let needed = v - palette.length;\n    for(let i = 0; i < needed; ++i)palette.push(0);\n    return transparentIndex;\n}\nfunction $3816ae512892ed40$var$reset() {\n    if ($3816ae512892ed40$var$frames.length) {\n        $3816ae512892ed40$var$gif.frames = $3816ae512892ed40$var$frames = [];\n        return true;\n    }\n    return false;\n}\nfunction $3816ae512892ed40$var$isAnimated() {\n    return $3816ae512892ed40$var$frames.length > 1;\n}\nvar $3816ae512892ed40$var$gif = {\n    Renderer: $3816ae512892ed40$var$Renderer,\n    load: $3816ae512892ed40$var$load,\n    reset: $3816ae512892ed40$var$reset,\n    isAnimated: $3816ae512892ed40$var$isAnimated,\n    frames: $3816ae512892ed40$var$frames\n};\nvar $3816ae512892ed40$export$2e2bcd8739ae039 = $3816ae512892ed40$var$gif;\n\n\n\n\nfunction $81b042702cd50b64$export$f98ed0023cec5998(draw) {\n    let frameRequested = false;\n    return function() {\n        if (frameRequested) return;\n        frameRequested = true;\n        window.requestAnimationFrame(function() {\n            draw();\n            frameRequested = false;\n        });\n    };\n}\nvar $81b042702cd50b64$var$currentTouchId = null;\nfunction $81b042702cd50b64$export$b9d4e1086abc9c4d(e) {\n    var touches = e.changedTouches;\n    var touch;\n    if ($81b042702cd50b64$var$currentTouchId != null) {\n        for(let i = 0; i < touches.length; ++i)if (touches[i].identifier == $81b042702cd50b64$var$currentTouchId) {\n            touch = touches[i];\n            break;\n        }\n    }\n    var type = \"\";\n    switch(e.type){\n        case \"touchstart\":\n            if ($81b042702cd50b64$var$currentTouchId != null || touches.length == 0) return;\n            type = \"mousedown\";\n            touch = touches[0];\n            $81b042702cd50b64$var$currentTouchId = touch.identifier;\n            break;\n        case \"touchmove\":\n            type = \"mousemove\";\n            break;\n        case \"touchend\":\n            if (touch) $81b042702cd50b64$var$currentTouchId = null;\n            type = \"mouseup\";\n            break;\n        default:\n            return;\n    }\n    if (!touch) return;\n    var simulatedEvent = new MouseEvent(type, {\n        bubbles: true,\n        cancelable: true,\n        view: window,\n        screenX: touch.screenX,\n        screenY: touch.screenY,\n        clientX: touch.clientX,\n        clientY: touch.clientY,\n        ctrlKey: false,\n        altKey: false,\n        metaKey: false,\n        button: 0,\n        relatedTarget: null\n    });\n    this.dispatchEvent(simulatedEvent);\n}\nfunction $81b042702cd50b64$export$36d6422802a3582() {}\n$81b042702cd50b64$export$36d6422802a3582.prototype.create = function(name, labelText, inputType, split) {\n    if (!labelText) labelText = name;\n    var label = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label(labelText);\n    label.element.classList.add(\"menuInputBox\");\n    if (split) label.element.classList.add(\"split\");\n    var input;\n    if (inputType == \"color\") {\n        input = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Widget;\n        input.element.classList.add(\"cpButton\");\n    } else {\n        input = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Input(inputType);\n        input.element.setAttribute(\"aria-label\", labelText);\n    }\n    label.appendChild(input);\n    this[name] = input.element;\n    return label;\n};\nfunction $81b042702cd50b64$export$95ffc9bdbe14045b(id, values) {\n    var detents = document.createElement(\"datalist\");\n    detents.id = id;\n    for(let i = 0; i < values.length; ++i){\n        let option = document.createElement(\"option\");\n        option.value = values[i];\n        detents.appendChild(option);\n    }\n    document.body.appendChild(detents);\n    return id;\n}\nfunction $81b042702cd50b64$export$3ed9b644ed65412a(x, y, rect) {\n    return x >= rect.x && y >= rect.y && x <= rect.x + rect.width && y <= rect.y + rect.height;\n}\nfunction $81b042702cd50b64$export$489c99c59eb9ceb1(x, y, cx, cy, radius) {\n    return Math.pow(x - cx, 2) + Math.pow(y - cy, 2) < Math.pow(radius, 2);\n}\nfunction $81b042702cd50b64$export$98e4a82bd6040cf1(touch1, touch2) {\n    return Math.hypot(touch1.pageX - touch2.pageX, touch1.pageY - touch2.pageY);\n}\nfunction $81b042702cd50b64$export$d015f26f64ff14db(ctx, x1, y1, x2, y2) {\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n}\n\n\n\nvar $63fd6a7b35566806$var$container, $63fd6a7b35566806$var$box;\nvar $63fd6a7b35566806$var$hslModeBtn, $63fd6a7b35566806$var$rgbModeBtn, $63fd6a7b35566806$var$hexInput, $63fd6a7b35566806$var$edButton;\nvar $63fd6a7b35566806$var$pickers, $63fd6a7b35566806$var$mode;\nvar $63fd6a7b35566806$var$currentElement, $63fd6a7b35566806$var$currentEdElement;\nvar $63fd6a7b35566806$var$edActive = false;\nvar $63fd6a7b35566806$var$modeInfo = {\n    hsl: {\n        maxValues: [\n            360,\n            100,\n            100,\n            255\n        ],\n        toCss: $63fd6a7b35566806$var$cssHsla,\n        toHex: $63fd6a7b35566806$var$hslToHex,\n        convFunc: $63fd6a7b35566806$var$rgbToHsl\n    },\n    rgb: {\n        maxValues: [\n            255,\n            255,\n            255,\n            255\n        ],\n        toCss: $63fd6a7b35566806$var$cssRgba,\n        toHex: $63fd6a7b35566806$var$rgbToHex,\n        convFunc: $63fd6a7b35566806$var$hslToRgb\n    }\n};\nvar $b05e2e02f9695b71$exports = {};\n\n$b05e2e02f9695b71$exports = (parcelRequire(\"l35ZM\")).getBundleURL(\"6gEBg\") + \"eye-dropper.e70ddc8f.svg\";\n\n\nfunction $63fd6a7b35566806$var$init(_container) {\n    $63fd6a7b35566806$var$container = _container;\n    $63fd6a7b35566806$var$box = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Floatbox;\n    $63fd6a7b35566806$var$box.element.classList.add(\"hide\");\n    $63fd6a7b35566806$var$box.element.id = \"colorPicker\";\n    var rootFlex = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox;\n    rootFlex.flexDirection = \"column\";\n    rootFlex.gap = \"0.25rem\";\n    $63fd6a7b35566806$var$box.appendChild(rootFlex);\n    var modeFlex = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox;\n    modeFlex.element.style.marginBottom = \"0.5rem\";\n    rootFlex.appendChild(modeFlex);\n    $63fd6a7b35566806$var$hslModeBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button(\"HSL\");\n    $63fd6a7b35566806$var$hslModeBtn.element.classList.add(\"modeBtn\");\n    modeFlex.appendChild($63fd6a7b35566806$var$hslModeBtn);\n    $63fd6a7b35566806$var$rgbModeBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button(\"RGB\");\n    $63fd6a7b35566806$var$rgbModeBtn.element.classList.add(\"modeBtn\");\n    modeFlex.appendChild($63fd6a7b35566806$var$rgbModeBtn);\n    $63fd6a7b35566806$var$pickers = [];\n    rootFlex.appendChildren([\n        $63fd6a7b35566806$var$createValuePicker(\"H\"),\n        $63fd6a7b35566806$var$createValuePicker(\"S\"),\n        $63fd6a7b35566806$var$createValuePicker(\"L\"),\n        $63fd6a7b35566806$var$createValuePicker(\"A\")\n    ]);\n    var hexFlex = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox;\n    hexFlex.justifyContent = \"center\";\n    hexFlex.alignItems = \"center\";\n    hexFlex.gap = \"0.5rem\";\n    rootFlex.appendChild(hexFlex);\n    var hexLabel = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label(\"Hex\");\n    hexFlex.appendChild(hexLabel);\n    $63fd6a7b35566806$var$hexInput = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Input(\"text\");\n    $63fd6a7b35566806$var$hexInput.placeholder = \"ffffff\";\n    $63fd6a7b35566806$var$hexInput.element.style.fontFamily = \"monospace\";\n    hexFlex.appendChild($63fd6a7b35566806$var$hexInput);\n    $63fd6a7b35566806$var$edButton = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button;\n    $63fd6a7b35566806$var$edButton.element.classList.add(\"edButton\");\n    var edIcon = document.createElement(\"img\");\n    edIcon.src = new URL($b05e2e02f9695b71$exports);\n    edIcon.width = edIcon.height = 16;\n    $63fd6a7b35566806$var$edButton.element.appendChild(edIcon);\n    hexFlex.appendChild($63fd6a7b35566806$var$edButton);\n    var closeBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Close\"));\n    closeBtn.element.style.marginTop = \"0.5rem\";\n    rootFlex.appendChild(closeBtn);\n    /* Events */ $63fd6a7b35566806$var$hslModeBtn.addEventListener(\"click\", $63fd6a7b35566806$var$setMode.bind(null, \"hsl\"));\n    $63fd6a7b35566806$var$rgbModeBtn.addEventListener(\"click\", $63fd6a7b35566806$var$setMode.bind(null, \"rgb\"));\n    for(var i = 0; i < $63fd6a7b35566806$var$pickers.length; ++i){\n        var p = $63fd6a7b35566806$var$pickers[i];\n        p.input.addEventListener(\"input\", function() {\n            $63fd6a7b35566806$var$setInputValue(p.input, p.input.value);\n            $63fd6a7b35566806$var$updateColor();\n        });\n        var slider = p.slider;\n        slider.addEventListener(\"mousedown\", $63fd6a7b35566806$var$sliderMouseDown.bind(p));\n        document.addEventListener(\"mousemove\", $63fd6a7b35566806$var$mouseMoveListener);\n        document.addEventListener(\"mouseup\", $63fd6a7b35566806$var$mouseUpListener);\n        slider.addEventListener(\"touchstart\", (0, $81b042702cd50b64$export$b9d4e1086abc9c4d), {\n            passive: true\n        });\n    }\n    var hexColorRegexp = /^#?[0-9A-F]{6}$/i;\n    var a = $63fd6a7b35566806$var$pickers[3];\n    $63fd6a7b35566806$var$hexInput.addEventListener(\"input\", function() {\n        var value = this.value;\n        if (!hexColorRegexp.test(value)) return;\n        if (value[0] == \"#\") value = value.slice(1);\n        var [r, g, b] = $63fd6a7b35566806$var$hexToRgb(value);\n        $63fd6a7b35566806$var$setMode(\"rgb\");\n        $63fd6a7b35566806$var$setColor(r, g, b, $63fd6a7b35566806$var$getInputValue($63fd6a7b35566806$var$pickers[3].input)); // keep alpha value\n    });\n    $63fd6a7b35566806$var$edButton.addEventListener(\"click\", function() {\n        $63fd6a7b35566806$var$setEyeDropperActive(!$63fd6a7b35566806$var$edActive);\n    });\n    closeBtn.addEventListener(\"click\", $63fd6a7b35566806$var$hide);\n    /* Init */ $63fd6a7b35566806$var$setSliderGradient(a.slider, [\n        $63fd6a7b35566806$var$cssRgba(255, 255, 255, 0),\n        $63fd6a7b35566806$var$cssRgba(255, 255, 255, 1)\n    ]);\n    $63fd6a7b35566806$var$mode = null;\n}\nfunction $63fd6a7b35566806$var$createValuePicker(text) {\n    var flex = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox;\n    flex.element.classList.add(\"valueFlex\");\n    var label = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label(text);\n    flex.appendChild(label);\n    var slider = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Widget;\n    slider.element.classList.add(\"slider\");\n    flex.appendChild(slider);\n    var point = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Widget;\n    point.element.classList.add(\"sliderPoint\");\n    slider.appendChild(point);\n    var input = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Input(\"number\");\n    input.element.min = input.value = 0;\n    flex.appendChild(input);\n    $63fd6a7b35566806$var$pickers.push({\n        label: label,\n        slider: slider,\n        point: point,\n        input: input,\n        num: $63fd6a7b35566806$var$pickers.length\n    });\n    return flex;\n}\nfunction $63fd6a7b35566806$var$setInputValue(input, value) {\n    input.value = Math.round(value);\n    input.element.dataset.value = value;\n}\nfunction $63fd6a7b35566806$var$getInputValue(input) {\n    return +input.element.dataset.value;\n}\nfunction $63fd6a7b35566806$var$setMode(name) {\n    if ($63fd6a7b35566806$var$mode == name) return;\n    var prevMode = $63fd6a7b35566806$var$mode;\n    $63fd6a7b35566806$var$mode = name;\n    var [p0, p1, p2, p3] = $63fd6a7b35566806$var$pickers;\n    var { maxValues: maxValues, convFunc: convFunc } = $63fd6a7b35566806$var$modeInfo[name];\n    for(var i = 0; i < $63fd6a7b35566806$var$pickers.length; ++i){\n        var p = $63fd6a7b35566806$var$pickers[i];\n        p.input.element.max = maxValues[i];\n        if (i < $63fd6a7b35566806$var$mode.length) p.label.text = $63fd6a7b35566806$var$mode[i].toUpperCase();\n    }\n    // Mode specific stuff\n    if ($63fd6a7b35566806$var$mode == \"hsl\") {\n        $63fd6a7b35566806$var$setSliderGradient(p0.slider, [\n            $63fd6a7b35566806$var$cssHsla(0, 100, 50, 1),\n            $63fd6a7b35566806$var$cssHsla(60, 100, 50, 1),\n            $63fd6a7b35566806$var$cssHsla(120, 100, 50, 1),\n            $63fd6a7b35566806$var$cssHsla(180, 100, 50, 1),\n            $63fd6a7b35566806$var$cssHsla(240, 100, 50, 1),\n            $63fd6a7b35566806$var$cssHsla(300, 100, 50, 1),\n            $63fd6a7b35566806$var$cssHsla(360, 100, 50, 1)\n        ]);\n        $63fd6a7b35566806$var$hslModeBtn.element.classList.add(\"chosen\");\n        $63fd6a7b35566806$var$rgbModeBtn.element.classList.remove(\"chosen\");\n    } else if ($63fd6a7b35566806$var$mode == \"rgb\") {\n        $63fd6a7b35566806$var$setSliderGradient(p0.slider, [\n            \"#000000\",\n            \"#ff0000\"\n        ]);\n        $63fd6a7b35566806$var$setSliderGradient(p1.slider, [\n            \"#000000\",\n            \"#00ff00\"\n        ]);\n        $63fd6a7b35566806$var$setSliderGradient(p2.slider, [\n            \"#000000\",\n            \"#0000ff\"\n        ]);\n        $63fd6a7b35566806$var$rgbModeBtn.element.classList.add(\"chosen\");\n        $63fd6a7b35566806$var$hslModeBtn.element.classList.remove(\"chosen\");\n    }\n    if (prevMode) $63fd6a7b35566806$var$setColor(...convFunc($63fd6a7b35566806$var$getInputValue(p0.input), $63fd6a7b35566806$var$getInputValue(p1.input), $63fd6a7b35566806$var$getInputValue(p2.input)), $63fd6a7b35566806$var$getInputValue(p3.input));\n}\nfunction $63fd6a7b35566806$var$setSliderGradient(slider, list) {\n    slider.element.style.backgroundImage = \"linear-gradient(90deg,\" + list.join(\",\") + \")\";\n}\nfunction $63fd6a7b35566806$var$setColor(v1, v2, v3, a) {\n    if ($63fd6a7b35566806$var$mode == \"hsl\") {\n        var [h, s, l] = $63fd6a7b35566806$var$pickers;\n        $63fd6a7b35566806$var$setSliderGradient(s.slider, [\n            $63fd6a7b35566806$var$cssHsla(v1, 0, v3, 1),\n            $63fd6a7b35566806$var$cssHsla(v1, 100, v3, 1)\n        ]);\n        $63fd6a7b35566806$var$setSliderGradient(l.slider, [\n            \"#000000\",\n            $63fd6a7b35566806$var$cssHsla(v1, v2, 50, 1),\n            \"#ffffff\"\n        ]);\n    }\n    var { maxValues: maxValues, toCss: toCss, toHex: toHex } = $63fd6a7b35566806$var$modeInfo[$63fd6a7b35566806$var$mode];\n    for(var i = 0; i < $63fd6a7b35566806$var$pickers.length; ++i){\n        var p = $63fd6a7b35566806$var$pickers[i];\n        $63fd6a7b35566806$var$setInputValue(p.input, arguments[i]);\n        p.point.element.style.left = arguments[i] / maxValues[i] * 100 + \"%\";\n    }\n    $63fd6a7b35566806$var$hexInput.value = toHex(v1, v2, v3);\n    if ($63fd6a7b35566806$var$currentElement) {\n        $63fd6a7b35566806$var$currentElement.style.backgroundColor = toCss(v1, v2, v3, a / 255);\n        $63fd6a7b35566806$var$currentElement.dispatchEvent(new Event(\"colorchange\"));\n    }\n}\nfunction $63fd6a7b35566806$var$updateColor() {\n    var values = [];\n    for(var i = 0; i < $63fd6a7b35566806$var$pickers.length; ++i)values.push($63fd6a7b35566806$var$pickers[i].input.value);\n    $63fd6a7b35566806$var$setColor(...values);\n}\nvar $63fd6a7b35566806$var$currentPicker;\nfunction $63fd6a7b35566806$var$sliderMouseDown(e) {\n    $63fd6a7b35566806$var$currentPicker = this;\n    $63fd6a7b35566806$var$mouseMoveListener(e);\n}\nfunction $63fd6a7b35566806$var$mouseMoveListener(e) {\n    if ($63fd6a7b35566806$var$currentPicker) {\n        e.preventDefault();\n        var p = $63fd6a7b35566806$var$currentPicker;\n        var sliderEl = p.slider.element;\n        var rect = sliderEl.getBoundingClientRect();\n        var rx = Math.max(rect.left, Math.min(e.clientX, rect.right)) - rect.left;\n        var max = $63fd6a7b35566806$var$modeInfo[$63fd6a7b35566806$var$mode].maxValues[p.num];\n        $63fd6a7b35566806$var$setInputValue(p.input, Math.round(rx / rect.width * max));\n        $63fd6a7b35566806$var$updateColor();\n    }\n}\nfunction $63fd6a7b35566806$var$mouseUpListener(e) {\n    $63fd6a7b35566806$var$currentPicker = null;\n}\nfunction $63fd6a7b35566806$var$show(colorEl, eyeDropEl) {\n    if (!$63fd6a7b35566806$var$container.contains($63fd6a7b35566806$var$box)) {\n        $63fd6a7b35566806$var$container.appendChild($63fd6a7b35566806$var$box);\n        setTimeout(function() {\n            $63fd6a7b35566806$var$box.element.classList.remove(\"hide\");\n        }, 0);\n    }\n    if (colorEl) {\n        if ($63fd6a7b35566806$var$currentElement == colorEl) return;\n        $63fd6a7b35566806$var$currentElement = colorEl;\n        var colorCss = colorEl.style.backgroundColor;\n        if (colorCss.startsWith(\"rgb\") || colorCss[0] == \"#\") {\n            $63fd6a7b35566806$var$setMode(\"rgb\");\n            var [r, g, b, a] = colorCss[0] == \"#\" ? $63fd6a7b35566806$var$hexToRgb(colorCss.slice(1)) : colorCss.replace(/(rgba?\\(|\\))| /g, \"\").split(\",\");\n            $63fd6a7b35566806$var$setColor(r, g, b, a === undefined ? 255 : a);\n        } else if (colorCss.startsWith(\"hsl\")) {\n            $63fd6a7b35566806$var$setMode(\"hsl\");\n            var [h, s, l, a] = colorCss.replace(/(hsla?\\(|\\))| /g, \"\").split(\",\");\n            $63fd6a7b35566806$var$setColor(h, s, l, a === undefined ? 255 : a);\n        }\n        var rect = colorEl.getBoundingClientRect();\n        var boxEl = $63fd6a7b35566806$var$box.element;\n        var pickerRect = boxEl.getBoundingClientRect();\n        var top = Math.max(0, Math.min(rect.top - pickerRect.height - 6, window.innerHeight - pickerRect.height));\n        var left = Math.max(0, Math.min(rect.right - pickerRect.width, window.innerWidth - pickerRect.width));\n        boxEl.style.top = top + \"px\";\n        boxEl.style.left = left + \"px\";\n        if (eyeDropEl) $63fd6a7b35566806$var$currentEdElement = eyeDropEl;\n    } else {\n        $63fd6a7b35566806$var$currentElement = null;\n        $63fd6a7b35566806$var$setMode(\"hsl\");\n        $63fd6a7b35566806$var$setColor(0, 100, 100, 255);\n    }\n}\nvar $63fd6a7b35566806$var$hiding = false;\nfunction $63fd6a7b35566806$var$hide() {\n    if (!$63fd6a7b35566806$var$container.contains($63fd6a7b35566806$var$box) || $63fd6a7b35566806$var$hiding) return;\n    $63fd6a7b35566806$var$box.element.classList.add(\"hide\");\n    $63fd6a7b35566806$var$hiding = true;\n    $63fd6a7b35566806$var$container.removeChildAfterTransition($63fd6a7b35566806$var$box, function() {\n        $63fd6a7b35566806$var$hiding = false;\n    });\n    $63fd6a7b35566806$var$currentElement = null;\n    if ($63fd6a7b35566806$var$currentEdElement) {\n        $63fd6a7b35566806$var$setEyeDropperActive(false);\n        $63fd6a7b35566806$var$currentEdElement = null;\n    }\n}\nfunction $63fd6a7b35566806$var$setEyeDropperActive(active) {\n    if (!$63fd6a7b35566806$var$currentEdElement) return;\n    $63fd6a7b35566806$var$edActive = active;\n    if ($63fd6a7b35566806$var$edActive) {\n        $63fd6a7b35566806$var$edButton.element.classList.add(\"active\");\n        $63fd6a7b35566806$var$currentEdElement.addEventListener(\"eyedrop\", $63fd6a7b35566806$var$eyeDropListener);\n    } else {\n        $63fd6a7b35566806$var$edButton.element.classList.remove(\"active\");\n        $63fd6a7b35566806$var$currentEdElement.removeEventListener(\"eyedrop\", $63fd6a7b35566806$var$eyeDropListener);\n    }\n    $63fd6a7b35566806$var$currentEdElement.dispatchEvent(new CustomEvent(\"edstatechange\", {\n        detail: $63fd6a7b35566806$var$edActive\n    }));\n}\nfunction $63fd6a7b35566806$var$isEyeDropperActive() {\n    return $63fd6a7b35566806$var$edActive;\n}\nfunction $63fd6a7b35566806$var$eyeDropListener(e) {\n    if (!$63fd6a7b35566806$var$edActive) return;\n    $63fd6a7b35566806$var$setMode(e.detail.mode);\n    $63fd6a7b35566806$var$setColor(...e.detail.color);\n    $63fd6a7b35566806$var$setEyeDropperActive(false);\n}\nfunction $63fd6a7b35566806$var$rgbToHsl(r, g, b) {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const l = Math.max(r, g, b);\n    const s = l - Math.min(r, g, b);\n    const h = s ? l === r ? (g - b) / s : l === g ? 2 + (b - r) / s : 4 + (r - g) / s : 0;\n    return [\n        60 * h < 0 ? 60 * h + 360 : 60 * h,\n        100 * (s ? l <= 0.5 ? s / (2 * l - s) : s / (2 - (2 * l - s)) : 0),\n        100 * (2 * l - s) / 2\n    ];\n}\nfunction $63fd6a7b35566806$var$hslToRgb(h, s, l) {\n    s /= 100;\n    l /= 100;\n    const k = (n)=>(n + h / 30) % 12;\n    const a = s * Math.min(l, 1 - l);\n    const f = (n)=>l - a * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));\n    return [\n        255 * f(0),\n        255 * f(8),\n        255 * f(4)\n    ];\n}\nfunction $63fd6a7b35566806$var$numToHex(num) {\n    var hex = num.toString(16);\n    return hex.length == 1 ? \"0\" + hex : hex;\n}\nfunction $63fd6a7b35566806$var$rgbToHex(r, g, b) {\n    r = Math.floor(r);\n    g = Math.floor(g);\n    b = Math.floor(b);\n    return $63fd6a7b35566806$var$numToHex(r) + $63fd6a7b35566806$var$numToHex(g) + $63fd6a7b35566806$var$numToHex(b);\n}\nfunction $63fd6a7b35566806$var$hslToHex(h, s, l) {\n    return $63fd6a7b35566806$var$rgbToHex(...$63fd6a7b35566806$var$hslToRgb(h, s, l));\n}\nfunction $63fd6a7b35566806$var$hexToRgb(hex) {\n    return [\n        parseInt(hex.slice(0, 2), 16),\n        parseInt(hex.slice(2, 4), 16),\n        parseInt(hex.slice(4, 6), 16)\n    ];\n}\nfunction $63fd6a7b35566806$var$cssRgba(r, g, b, a) {\n    return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a + \")\";\n}\nfunction $63fd6a7b35566806$var$cssHsla(h, s, l, a) {\n    return \"hsla(\" + h + \",\" + s + \"%,\" + l + \"%,\" + a + \")\";\n}\nvar $63fd6a7b35566806$var$colorPicker = {\n    init: $63fd6a7b35566806$var$init,\n    show: $63fd6a7b35566806$var$show,\n    hide: $63fd6a7b35566806$var$hide,\n    isEyeDropperActive: $63fd6a7b35566806$var$isEyeDropperActive\n};\nvar $63fd6a7b35566806$export$2e2bcd8739ae039 = $63fd6a7b35566806$var$colorPicker;\n\n\n\n\n\nvar $8432c3b0480904ec$var$dialog, $8432c3b0480904ec$var$inputs = new (0, $81b042702cd50b64$export$36d6422802a3582);\nvar $8432c3b0480904ec$var$canvas = document.createElement(\"canvas\");\nvar $8432c3b0480904ec$var$ctx = $8432c3b0480904ec$var$canvas.getContext(\"2d\");\nvar $8432c3b0480904ec$var$imgSrc, $8432c3b0480904ec$var$callback;\nvar $8432c3b0480904ec$var$inputsInfo = {\n    \"brightness\": {\n        name: \"Brightness\",\n        min: 0,\n        max: 200,\n        unit: \"%\"\n    },\n    \"contrast\": {\n        name: \"Contrast\",\n        min: 0,\n        max: 200,\n        unit: \"%\"\n    },\n    \"hue-rotate\": {\n        name: \"Hue\",\n        min: 0,\n        max: 360,\n        unit: \"deg\"\n    },\n    \"saturate\": {\n        name: \"Saturation\",\n        min: 0,\n        max: 200,\n        unit: \"%\"\n    },\n    \"grayscale\": {\n        name: \"Grayscale\",\n        min: 0,\n        max: 100,\n        unit: \"%\"\n    },\n    \"sepia\": {\n        name: \"Sepia\",\n        min: 0,\n        max: 100,\n        unit: \"%\"\n    },\n    \"invert\": {\n        name: \"Invert\",\n        min: 0,\n        max: 100,\n        unit: \"%\"\n    },\n    \"opacity\": {\n        name: \"Opacity\",\n        min: 0,\n        max: 100,\n        unit: \"%\"\n    },\n    \"blur\": {\n        name: \"Blur\",\n        min: 0,\n        max: 100,\n        unit: \"px\"\n    }\n};\nvar $8432c3b0480904ec$var$defaultInit = {\n    \"brightness\": 100,\n    \"contrast\": 100,\n    \"hue-rotate\": 0,\n    \"saturate\": 100,\n    \"grayscale\": 0,\n    \"sepia\": 0,\n    \"invert\": 0,\n    \"opacity\": 100,\n    \"blur\": 0\n};\nvar $8432c3b0480904ec$var$currentOptions;\nfunction $8432c3b0480904ec$var$init(container) {\n    $8432c3b0480904ec$var$dialog = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Dialog((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Filters\"));\n    $8432c3b0480904ec$var$dialog.element.style.textAlign = \"center\";\n    $8432c3b0480904ec$var$dialog.element.style.minWidth = \"min(22rem, 86%)\";\n    container.appendChild($8432c3b0480904ec$var$dialog);\n    $8432c3b0480904ec$var$canvas.style.marginTop = \"0\";\n    $8432c3b0480904ec$var$canvas.style.marginBottom = \"0.5rem\";\n    $8432c3b0480904ec$var$dialog.body.appendChild($8432c3b0480904ec$var$canvas);\n    var detent0 = (0, $81b042702cd50b64$export$95ffc9bdbe14045b)(\"filterDetent0\", [\n        0\n    ]);\n    var detent100 = (0, $81b042702cd50b64$export$95ffc9bdbe14045b)(\"filterDetent100\", [\n        100\n    ]);\n    var inputWidgets = [];\n    for(let func in $8432c3b0480904ec$var$inputsInfo){\n        var info = $8432c3b0480904ec$var$inputsInfo[func];\n        var widget = $8432c3b0480904ec$var$inputs.create(func, (0, $313f6ce5359206e9$export$71511d61b312f219)(info.name), \"range\");\n        var input = $8432c3b0480904ec$var$inputs[func];\n        input.min = info.min;\n        input.max = info.max;\n        var defaultValue = $8432c3b0480904ec$var$defaultInit[func];\n        if (defaultValue == 0) input.setAttribute(\"list\", detent0);\n        else if (defaultValue == 100) input.setAttribute(\"list\", detent100);\n        input.addEventListener(\"input\", function() {\n            $8432c3b0480904ec$var$currentOptions[func] = this.value;\n            $8432c3b0480904ec$var$redrawCanvas();\n        });\n        inputWidgets.push(widget);\n    }\n    var inputsBox = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Widget;\n    inputsBox.element.id = \"filtersInputsBox\";\n    inputsBox.appendChildren(inputWidgets);\n    $8432c3b0480904ec$var$dialog.appendChild(inputsBox);\n    var resetBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Reset\"), \"secondary\");\n    resetBtn.element.style.marginRight = \"auto\";\n    $8432c3b0480904ec$var$dialog.appendButton(resetBtn);\n    var okBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"OK\"));\n    $8432c3b0480904ec$var$dialog.appendButton(okBtn);\n    okBtn.addEventListener(\"click\", function() {\n        $8432c3b0480904ec$var$dialog.hide();\n        if ($8432c3b0480904ec$var$callback) $8432c3b0480904ec$var$callback();\n    });\n    resetBtn.addEventListener(\"click\", function() {\n        for(let func in $8432c3b0480904ec$var$currentOptions){\n            $8432c3b0480904ec$var$inputs[func].value = $8432c3b0480904ec$var$defaultInit[func];\n            delete $8432c3b0480904ec$var$currentOptions[func];\n        }\n        $8432c3b0480904ec$var$redrawCanvas();\n    });\n}\nfunction $8432c3b0480904ec$var$drawCanvas() {\n    $8432c3b0480904ec$var$ctx.clearRect(0, 0, $8432c3b0480904ec$var$canvas.width, $8432c3b0480904ec$var$canvas.height);\n    $8432c3b0480904ec$var$ctx.filter = $8432c3b0480904ec$var$optionsToFilter($8432c3b0480904ec$var$currentOptions);\n    $8432c3b0480904ec$var$ctx.drawImage($8432c3b0480904ec$var$imgSrc, 0, 0);\n}\nvar $8432c3b0480904ec$var$redrawCanvas = (0, $81b042702cd50b64$export$f98ed0023cec5998)($8432c3b0480904ec$var$drawCanvas);\nfunction $8432c3b0480904ec$var$showOptions(init, imgSrc_, callback_) {\n    if (!init) {\n        init = $8432c3b0480904ec$var$defaultInit;\n        $8432c3b0480904ec$var$currentOptions = {};\n    } else $8432c3b0480904ec$var$currentOptions = init;\n    for(let func in $8432c3b0480904ec$var$inputsInfo)$8432c3b0480904ec$var$inputs[func].value = func in init ? init[func] : $8432c3b0480904ec$var$defaultInit[func];\n    $8432c3b0480904ec$var$imgSrc = imgSrc_;\n    $8432c3b0480904ec$var$callback = callback_;\n    $8432c3b0480904ec$var$canvas.width = $8432c3b0480904ec$var$imgSrc.width;\n    $8432c3b0480904ec$var$canvas.height = $8432c3b0480904ec$var$imgSrc.height;\n    $8432c3b0480904ec$var$redrawCanvas();\n    $8432c3b0480904ec$var$dialog.show();\n}\nfunction $8432c3b0480904ec$var$optionsToFilter(options) {\n    var filter = \"\";\n    for(let func in options){\n        var value = options[func];\n        if (value == $8432c3b0480904ec$var$defaultInit[func]) continue;\n        var unit = $8432c3b0480904ec$var$inputsInfo[func].unit;\n        filter += func + \"(\" + options[func] + unit + \")\";\n    }\n    if (filter == \"\") filter = \"none\";\n    return filter;\n}\nvar $8432c3b0480904ec$var$imageFilters = {\n    init: $8432c3b0480904ec$var$init,\n    showOptions: $8432c3b0480904ec$var$showOptions,\n    optionsToFilter: $8432c3b0480904ec$var$optionsToFilter,\n    canvas: $8432c3b0480904ec$var$canvas\n};\nvar $8432c3b0480904ec$export$2e2bcd8739ae039 = $8432c3b0480904ec$var$imageFilters;\n\n\n\n\n\nvar $87450d491c8f5778$var$dialog, $87450d491c8f5778$var$selector, $87450d491c8f5778$var$iframe, $87450d491c8f5778$var$loadNotif;\nvar $87450d491c8f5778$var$imgSrc, $87450d491c8f5778$var$callback;\nvar $87450d491c8f5778$var$defaultPage = \"data:text/html;base64,PCFET0NUWVBFIGh0bWw+PGh0bWw+PGJvZHkgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IzI1MjcyOTsiPjwvYm9keT48L2h0bWw+\";\nvar $7eb1d79fe3fc28f6$exports = {};\n\n$7eb1d79fe3fc28f6$exports = (parcelRequire(\"l35ZM\")).getBundleURL(\"6gEBg\") + \"discord.a4af9988.html\";\n\n\nvar $87450d491c8f5778$var$templates = {\n    discord: new URL($7eb1d79fe3fc28f6$exports)\n};\nvar $0642ffacf1be9380$exports = {};\n\n$0642ffacf1be9380$exports = (parcelRequire(\"l35ZM\")).getBundleURL(\"6gEBg\") + \"loading.f836516e.svg\";\n\n\nfunction $87450d491c8f5778$var$init(container) {\n    $87450d491c8f5778$var$dialog = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Dialog((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Web Preview\"));\n    $87450d491c8f5778$var$dialog.element.id = \"webPreviewDialog\";\n    $87450d491c8f5778$var$dialog.body.innerText = (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Select a website:\");\n    container.appendChild($87450d491c8f5778$var$dialog);\n    var closeBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Close\"));\n    $87450d491c8f5778$var$dialog.appendButton(closeBtn);\n    $87450d491c8f5778$var$selector = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Selector;\n    $87450d491c8f5778$var$selector.addOption(\"----\", \"placeholder\", true);\n    $87450d491c8f5778$var$selector.addOption(\"Discord\", \"discord\");\n    $87450d491c8f5778$var$selector.element.style.marginLeft = \"0.5rem\";\n    $87450d491c8f5778$var$dialog.appendChild($87450d491c8f5778$var$selector);\n    var wrapper = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Widget;\n    wrapper.element.id = \"previewIFrameWrapper\";\n    $87450d491c8f5778$var$dialog.appendChild(wrapper);\n    $87450d491c8f5778$var$iframe = document.createElement(\"iframe\");\n    $87450d491c8f5778$var$iframe.id = \"previewIFrame\";\n    $87450d491c8f5778$var$iframe.title = (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Web Preview\");\n    wrapper.body.appendChild($87450d491c8f5778$var$iframe);\n    $87450d491c8f5778$var$loadNotif = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Widget;\n    $87450d491c8f5778$var$loadNotif.element.id = \"loadNotif\";\n    wrapper.appendChild($87450d491c8f5778$var$loadNotif);\n    var loadSpinner = document.createElement(\"img\");\n    loadSpinner.id = \"loadSpinner\";\n    loadSpinner.src = new URL($0642ffacf1be9380$exports);\n    loadSpinner.width = loadSpinner.height = 128;\n    loadSpinner.alt = \"Loading\";\n    $87450d491c8f5778$var$loadNotif.body.appendChild(loadSpinner);\n    var loadLabel = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Loading...\"));\n    $87450d491c8f5778$var$loadNotif.appendChild(loadLabel);\n    closeBtn.addEventListener(\"click\", function() {\n        $87450d491c8f5778$var$dialog.hide();\n        $87450d491c8f5778$var$callback();\n    });\n    $87450d491c8f5778$var$selector.addEventListener(\"change\", function() {\n        $87450d491c8f5778$var$loadPreview(this.value);\n    });\n}\nfunction $87450d491c8f5778$var$loadPreview(site) {\n    var loadNotifEl = $87450d491c8f5778$var$loadNotif.element;\n    loadNotifEl.classList.add(\"show\");\n    $87450d491c8f5778$var$iframe.src = $87450d491c8f5778$var$templates[site];\n    $87450d491c8f5778$var$iframe.addEventListener(\"load\", async function() {\n        if ($87450d491c8f5778$var$iframe.contentDocument) await $87450d491c8f5778$var$injectImages();\n        else (0, $cff5b25a521f554e$export$2e2bcd8739ae039).show((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Failed to load preview page.\"));\n        loadNotifEl.classList.remove(\"show\");\n    }, {\n        once: true\n    });\n}\nfunction $87450d491c8f5778$var$onImageLoadOnce(img) {\n    return new Promise((resolve)=>{\n        img.addEventListener(\"load\", resolve, {\n            once: true\n        });\n    });\n}\nasync function $87450d491c8f5778$var$injectImages() {\n    var iDocument = $87450d491c8f5778$var$iframe.contentDocument;\n    var list = iDocument.getElementsByClassName(\"avatar\");\n    var imgUrls = {};\n    for(var i = 0; i < list.length; ++i){\n        var img = list[i];\n        var size = img.dataset.size;\n        var src = imgUrls[size];\n        if (!src) imgUrls[size] = src = await $87450d491c8f5778$var$renderScaledImage(size);\n        img.src = src;\n        await $87450d491c8f5778$var$onImageLoadOnce(img);\n        img.draggable = false;\n    }\n    for(var i in imgUrls)URL.revokeObjectURL(imgUrls[i]);\n}\nvar $87450d491c8f5778$var$renderCanvas = document.createElement(\"canvas\");\nvar $87450d491c8f5778$var$renderCtx = $87450d491c8f5778$var$renderCanvas.getContext(\"2d\");\nasync function $87450d491c8f5778$var$renderScaledImage(size) {\n    $87450d491c8f5778$var$renderCanvas.width = $87450d491c8f5778$var$renderCanvas.height = size;\n    $87450d491c8f5778$var$renderCtx.imageSmoothingQuality = \"high\";\n    $87450d491c8f5778$var$renderCtx.drawImage($87450d491c8f5778$var$imgSrc, 0, 0, $87450d491c8f5778$var$imgSrc.width, $87450d491c8f5778$var$imgSrc.height, 0, 0, size, size);\n    var blob = await new Promise((resolve)=>$87450d491c8f5778$var$renderCanvas.toBlob(resolve));\n    return URL.createObjectURL(blob);\n}\nfunction $87450d491c8f5778$var$show(imgSrc_, callback_) {\n    $87450d491c8f5778$var$imgSrc = imgSrc_;\n    $87450d491c8f5778$var$callback = callback_;\n    $87450d491c8f5778$var$selector.value = \"placeholder\";\n    $87450d491c8f5778$var$iframe.src = $87450d491c8f5778$var$defaultPage;\n    $87450d491c8f5778$var$dialog.show();\n}\nvar $87450d491c8f5778$var$webPreview = {\n    init: $87450d491c8f5778$var$init,\n    show: $87450d491c8f5778$var$show\n};\nvar $87450d491c8f5778$export$2e2bcd8739ae039 = $87450d491c8f5778$var$webPreview;\n\n\n\nvar $0544d5bc706c7688$var$container, $0544d5bc706c7688$var$box;\nvar $0544d5bc706c7688$var$innerBox, $0544d5bc706c7688$var$canvasBox, $0544d5bc706c7688$var$editorCanvas, $0544d5bc706c7688$var$editorCtx, $0544d5bc706c7688$var$imgCanvas, $0544d5bc706c7688$var$imgCtx;\nvar $0544d5bc706c7688$var$menuBox, $0544d5bc706c7688$var$inputs = new (0, $81b042702cd50b64$export$36d6422802a3582);\nvar $0544d5bc706c7688$var$notifBox;\nvar $0544d5bc706c7688$var$renderCanvas, $0544d5bc706c7688$var$renderCtx;\nvar $0544d5bc706c7688$var$previewBox, $0544d5bc706c7688$var$previewImages;\nvar $0544d5bc706c7688$var$saveAnchor = document.createElement(\"a\");\nvar $0544d5bc706c7688$var$saveDialog, $0544d5bc706c7688$var$gifOptionsDialog, $0544d5bc706c7688$var$rotateDialog;\nvar $0544d5bc706c7688$var$cropShapes = {\n    CIRCLE: 1,\n    SQUARE: 2,\n    FREEFORM: 3\n};\nvar $0544d5bc706c7688$var$cropShape = $0544d5bc706c7688$var$cropShapes.CIRCLE;\nvar $0544d5bc706c7688$var$previewSizes = [\n    128,\n    64,\n    32\n];\nfunction $0544d5bc706c7688$var$init(_container) {\n    $0544d5bc706c7688$var$container = _container;\n    $0544d5bc706c7688$var$box = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox;\n    $0544d5bc706c7688$var$box.element.id = \"editorBox\";\n    $0544d5bc706c7688$var$box.element.classList.add(\"hide\");\n    $0544d5bc706c7688$var$initInnerBox();\n    $0544d5bc706c7688$var$initMenuBox();\n    $0544d5bc706c7688$var$initNotifBox();\n    $0544d5bc706c7688$var$initSaveDialog();\n    $0544d5bc706c7688$var$initGifOptions();\n    $0544d5bc706c7688$var$initRotateDialog();\n    $0544d5bc706c7688$var$innerBox.addEventListener(\"mousedown\", $0544d5bc706c7688$var$mouseDownListener);\n    $0544d5bc706c7688$var$menuBox.addEventListener(\"mousedown\", $0544d5bc706c7688$var$unfocusInnerBox);\n    document.addEventListener(\"mousemove\", $0544d5bc706c7688$var$mouseMoveListener);\n    document.addEventListener(\"mouseup\", $0544d5bc706c7688$var$mouseUpListener);\n    document.addEventListener(\"blur\", $0544d5bc706c7688$var$mouseUpListener);\n    $0544d5bc706c7688$var$innerBox.addEventListener(\"wheel\", $0544d5bc706c7688$var$wheelListener, {\n        passive: true\n    });\n    if (\"ontouchstart\" in document) {\n        $0544d5bc706c7688$var$innerBox.addEventListener(\"touchstart\", $0544d5bc706c7688$var$touchStartListener, {\n            passive: true\n        });\n        document.addEventListener(\"touchmove\", $0544d5bc706c7688$var$touchMoveListener, {\n            passive: true\n        });\n        document.addEventListener(\"touchend\", $0544d5bc706c7688$var$touchEndListener, {\n            passive: true\n        });\n    }\n    document.addEventListener(\"keydown\", $0544d5bc706c7688$var$keyDownListener);\n}\nfunction $0544d5bc706c7688$var$initInnerBox() {\n    $0544d5bc706c7688$var$innerBox = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox;\n    $0544d5bc706c7688$var$innerBox.element.id = \"editorInnerBox\";\n    $0544d5bc706c7688$var$innerBox.element.style.cursor = \"grab\";\n    $0544d5bc706c7688$var$box.appendChild($0544d5bc706c7688$var$innerBox);\n    $0544d5bc706c7688$var$canvasBox = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Widget;\n    $0544d5bc706c7688$var$canvasBox.element.id = \"canvasBox\";\n    $0544d5bc706c7688$var$innerBox.appendChild($0544d5bc706c7688$var$canvasBox);\n    $0544d5bc706c7688$var$imgCanvas = document.createElement(\"canvas\");\n    $0544d5bc706c7688$var$imgCanvas.id = \"imgCanvas\";\n    $0544d5bc706c7688$var$canvasBox.body.appendChild($0544d5bc706c7688$var$imgCanvas);\n    $0544d5bc706c7688$var$imgCtx = $0544d5bc706c7688$var$imgCanvas.getContext(\"2d\");\n    $0544d5bc706c7688$var$editorCanvas = document.createElement(\"canvas\");\n    $0544d5bc706c7688$var$editorCanvas.id = \"editorCanvas\";\n    $0544d5bc706c7688$var$canvasBox.body.appendChild($0544d5bc706c7688$var$editorCanvas);\n    $0544d5bc706c7688$var$editorCtx = $0544d5bc706c7688$var$editorCanvas.getContext(\"2d\");\n    $0544d5bc706c7688$var$editorCtx.lineWidth = 1;\n    var fullscreenBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button(\"\\u26F6\");\n    fullscreenBtn.element.classList.add(\"innerBoxBtn\");\n    fullscreenBtn.element.title = (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Toggle fullscreen\");\n    fullscreenBtn.element.style.right = \"0\";\n    fullscreenBtn.element.style.lineHeight = \"1.4\";\n    $0544d5bc706c7688$var$innerBox.appendChild(fullscreenBtn);\n    var tutorialBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button(\"?\");\n    tutorialBtn.element.classList.add(\"innerBoxBtn\");\n    tutorialBtn.element.title = (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Show tutorial\");\n    tutorialBtn.element.style.right = \"2.5rem\";\n    tutorialBtn.element.style.lineHeight = \"1.4\";\n    $0544d5bc706c7688$var$innerBox.appendChild(tutorialBtn);\n    fullscreenBtn.addEventListener(\"click\", function() {\n        if (document.fullscreenElement) document.exitFullscreen();\n        else document.body.requestFullscreen();\n    });\n    $0544d5bc706c7688$var$initTutorialDialog();\n    tutorialBtn.addEventListener(\"click\", $0544d5bc706c7688$var$showTutorialDialog);\n    $0544d5bc706c7688$var$previewBox = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox;\n    $0544d5bc706c7688$var$previewBox.element.id = \"previewBox\";\n    $0544d5bc706c7688$var$previewImages = [];\n    for(let i = 0; i < 3; ++i){\n        var size = $0544d5bc706c7688$var$previewSizes[i];\n        let container = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Widget;\n        let style = container.element.style;\n        style.width = style.height = size + \"px\";\n        style.borderRadius = size / 2 + \"px\";\n        $0544d5bc706c7688$var$previewBox.appendChild(container);\n        let img = new Image;\n        container.element.appendChild(img);\n        $0544d5bc706c7688$var$previewImages.push(img);\n    }\n    $0544d5bc706c7688$var$innerBox.appendChild($0544d5bc706c7688$var$previewBox);\n}\nvar $0544d5bc706c7688$var$tutorialDialog, $0544d5bc706c7688$var$demoVideo;\nvar $0c94e84fe6f93206$exports = {};\n\n$0c94e84fe6f93206$exports = (parcelRequire(\"l35ZM\")).getBundleURL(\"6gEBg\") + \"demo-thumbnail.ee15827b.jpg\";\n\n\nfunction $0544d5bc706c7688$var$initTutorialDialog() {\n    $0544d5bc706c7688$var$tutorialDialog = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Dialog((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Tutorial\"));\n    $0544d5bc706c7688$var$tutorialDialog.element.style.textAlign = \"center\";\n    $0544d5bc706c7688$var$container.appendChild($0544d5bc706c7688$var$tutorialDialog);\n    var text1 = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Drag the crop selector to move or resize it.\"));\n    $0544d5bc706c7688$var$tutorialDialog.appendChild(text1);\n    $0544d5bc706c7688$var$demoVideo = document.createElement(\"video\");\n    $0544d5bc706c7688$var$demoVideo.style.pointerEvents = \"none\";\n    $0544d5bc706c7688$var$demoVideo.style.width = \"100%\";\n    $0544d5bc706c7688$var$demoVideo.style.marginTop = \"0.5rem\";\n    $0544d5bc706c7688$var$demoVideo.loop = true;\n    $0544d5bc706c7688$var$demoVideo.poster = new URL($0c94e84fe6f93206$exports);\n    $0544d5bc706c7688$var$tutorialDialog.body.appendChild($0544d5bc706c7688$var$demoVideo);\n    var text2 = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label((0, $313f6ce5359206e9$export$71511d61b312f219)('Dragging anywhere outside of the crop selector will move the viewport. Use the mouse wheel or pinch the screen with two fingers to zoom in/out.\\nOnce you\\'re done, press the \"Save image...\" button to save your cropped image.\\n\\nYou may view this tutorial at any time by pressing the \"?\" button at the top right of the screen.'));\n    $0544d5bc706c7688$var$tutorialDialog.appendChild(text2);\n    $0544d5bc706c7688$var$tutorialDialog.appendHideButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"OK\"));\n}\nfunction $0544d5bc706c7688$var$showTutorialDialog() {\n    if (!$0544d5bc706c7688$var$demoVideo.src) {\n        $0544d5bc706c7688$var$demoVideo.src = \"./demo.mp4\";\n        $0544d5bc706c7688$var$demoVideo.play();\n    }\n    $0544d5bc706c7688$var$tutorialDialog.show();\n}\nfunction $0544d5bc706c7688$var$initMenuBox() {\n    (0, $63fd6a7b35566806$export$2e2bcd8739ae039).init($0544d5bc706c7688$var$container);\n    $0544d5bc706c7688$var$menuBox = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox;\n    $0544d5bc706c7688$var$menuBox.element.id = \"editorMenu\";\n    $0544d5bc706c7688$var$box.appendChild($0544d5bc706c7688$var$menuBox);\n    var saveBtn = $0544d5bc706c7688$var$createMenuButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Save image...\"));\n    var saveGifBtn = $0544d5bc706c7688$var$createMenuButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Save as GIF...\"));\n    var fitBtn = $0544d5bc706c7688$var$createMenuButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Fit image to viewport\"));\n    var rotateBtn = $0544d5bc706c7688$var$createMenuButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Rotate...\"));\n    var shapeBtnContainer = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Widget;\n    shapeBtnContainer.element.id = \"shapeBtnContainer\";\n    var circleBtn = $0544d5bc706c7688$var$createShapeButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Circle\"), \"circle\", true);\n    var squareBtn = $0544d5bc706c7688$var$createShapeButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Square\"), \"square\");\n    var freeformBtn = $0544d5bc706c7688$var$createShapeButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Freeform\"), \"freeform\");\n    shapeBtnContainer.appendChildren([\n        circleBtn,\n        squareBtn,\n        freeformBtn\n    ]);\n    $0544d5bc706c7688$var$prevShapeBtn = circleBtn.element;\n    $0544d5bc706c7688$var$menuBox.appendChildren([\n        /* Save */ $0544d5bc706c7688$var$createSectionTitle((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Save\")),\n        saveBtn,\n        saveGifBtn,\n        /* Crop Area */ $0544d5bc706c7688$var$createSectionTitle((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Crop Area\")),\n        $0544d5bc706c7688$var$inputs.create(\"width\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Width\"), \"text\", true),\n        $0544d5bc706c7688$var$inputs.create(\"height\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Height\"), \"text\", true),\n        $0544d5bc706c7688$var$inputs.create(\"xPos\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"X Pos\"), \"text\", true),\n        $0544d5bc706c7688$var$inputs.create(\"yPos\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Y Pos\"), \"text\", true),\n        $0544d5bc706c7688$var$inputs.create(\"allowOffscreen\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Allow offscreen\"), \"checkbox\"),\n        /* Crop Shape */ $0544d5bc706c7688$var$createSectionTitle((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Crop Shape\")),\n        shapeBtnContainer,\n        $0544d5bc706c7688$var$inputs.create(\"showGuidelines\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Show guidelines\"), \"checkbox\"),\n        $0544d5bc706c7688$var$inputs.create(\"guideColor\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Guidelines color\"), \"color\"),\n        /* Image */ $0544d5bc706c7688$var$createSectionTitle((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Image\")),\n        $0544d5bc706c7688$var$inputs.create(\"flipH\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Flip horizontally\"), \"checkbox\"),\n        $0544d5bc706c7688$var$inputs.create(\"flipV\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Flip vertically\"), \"checkbox\"),\n        rotateBtn,\n        $0544d5bc706c7688$var$inputs.create(\"frame\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Frame\"), \"range\"),\n        $0544d5bc706c7688$var$inputs.create(\"playGif\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Play GIF\"), \"checkbox\"),\n        $0544d5bc706c7688$var$inputs.create(\"bgColor\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Background color\"), \"color\"),\n        /* Viewport */ $0544d5bc706c7688$var$createSectionTitle((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Viewport\")),\n        $0544d5bc706c7688$var$inputs.create(\"zoom\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Zoom\"), \"range\"),\n        $0544d5bc706c7688$var$inputs.create(\"scaleDevicePixel\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Scale to device pixel\"), \"checkbox\"),\n        fitBtn,\n        $0544d5bc706c7688$var$inputs.create(\"showPreview\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Show preview\"), \"checkbox\")\n    ]);\n    /* Input defaults */ $0544d5bc706c7688$var$inputs.frame.value = 0;\n    $0544d5bc706c7688$var$inputs.frame.disabled = true;\n    $0544d5bc706c7688$var$inputs.showPreview.checked = true;\n    $0544d5bc706c7688$var$inputs.bgColor.style.backgroundColor = \"rgba(255,255,255,0)\";\n    $0544d5bc706c7688$var$inputs.guideColor.style.backgroundColor = \"rgb(255,255,0)\";\n    /* Other */ var returnBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Open another image\"), \"secondary\");\n    returnBtn.element.id = \"returnBtn\";\n    $0544d5bc706c7688$var$menuBox.appendChild(returnBtn);\n    var hideBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Hide panel\"));\n    hideBtn.element.id = \"hideBtn\";\n    $0544d5bc706c7688$var$menuBox.appendChild(hideBtn);\n    /* Events */ returnBtn.addEventListener(\"click\", function() {\n        $0544d5bc706c7688$var$hide();\n        (0, $fac49d8f1486f244$export$2e2bcd8739ae039).show();\n    });\n    var innerStyle = $0544d5bc706c7688$var$innerBox.element.style;\n    hideBtn.addEventListener(\"click\", function() {\n        if (innerStyle.width && innerStyle.height) {\n            innerStyle.removeProperty(\"width\");\n            innerStyle.removeProperty(\"height\");\n            $0544d5bc706c7688$var$previewBox.element.classList.remove(\"panelHidden\");\n            hideBtn.text = (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Hide panel\");\n        } else {\n            innerStyle.width = \"100%\";\n            innerStyle.height = \"100%\";\n            $0544d5bc706c7688$var$previewBox.element.classList.add(\"panelHidden\");\n            hideBtn.text = (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Show panel\");\n        }\n    });\n    $0544d5bc706c7688$var$inputs.width.addEventListener(\"input\", function() {\n        $0544d5bc706c7688$var$updateSizeInputValue(this, \"width\");\n    });\n    $0544d5bc706c7688$var$inputs.height.addEventListener(\"input\", function() {\n        $0544d5bc706c7688$var$updateSizeInputValue(this, \"height\");\n    });\n    $0544d5bc706c7688$var$inputs.xPos.addEventListener(\"input\", function() {\n        $0544d5bc706c7688$var$updatePosInputValue(this, \"x\");\n    });\n    $0544d5bc706c7688$var$inputs.yPos.addEventListener(\"input\", function() {\n        $0544d5bc706c7688$var$updatePosInputValue(this, \"y\");\n    });\n    $0544d5bc706c7688$var$inputs.showGuidelines.addEventListener(\"change\", $0544d5bc706c7688$var$redrawEditor);\n    $0544d5bc706c7688$var$inputs.flipH.addEventListener(\"change\", $0544d5bc706c7688$var$updateImgRenders);\n    $0544d5bc706c7688$var$inputs.flipV.addEventListener(\"change\", $0544d5bc706c7688$var$updateImgRenders);\n    var zoomDetents = (0, $81b042702cd50b64$export$95ffc9bdbe14045b)(\"zoomDetents\", [\n        50,\n        100,\n        200,\n        400\n    ]);\n    var zoomInput = $0544d5bc706c7688$var$inputs.zoom;\n    zoomInput.min = 10;\n    zoomInput.max = 800;\n    zoomInput.value = $0544d5bc706c7688$var$canvasScale;\n    zoomInput.setAttribute(\"list\", zoomDetents);\n    zoomInput.addEventListener(\"input\", function() {\n        $0544d5bc706c7688$var$setCanvasScale(this.value / 100);\n    });\n    $0544d5bc706c7688$var$inputs.scaleDevicePixel.addEventListener(\"change\", function() {\n        $0544d5bc706c7688$var$setCanvasScale($0544d5bc706c7688$var$canvasScale);\n    });\n    fitBtn.addEventListener(\"click\", function() {\n        $0544d5bc706c7688$var$fitImageToViewport();\n    });\n    $0544d5bc706c7688$var$inputs.showPreview.addEventListener(\"change\", function(e) {\n        if (this.checked) {\n            $0544d5bc706c7688$var$previewBox.element.style.display = \"flex\";\n            $0544d5bc706c7688$var$initPreview();\n        } else $0544d5bc706c7688$var$previewBox.element.style.display = \"none\";\n    });\n    rotateBtn.addEventListener(\"click\", $0544d5bc706c7688$var$showRotateDialog);\n    $0544d5bc706c7688$var$inputs.frame.addEventListener(\"input\", function() {\n        if ((0, $3816ae512892ed40$export$2e2bcd8739ae039).isAnimated()) {\n            var value = this.value;\n            $0544d5bc706c7688$var$img = (0, $3816ae512892ed40$export$2e2bcd8739ae039).frames[value].bitmap;\n            $0544d5bc706c7688$var$updateImgRenders();\n            $0544d5bc706c7688$var$showNotification((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Frame: \") + value);\n        }\n    });\n    saveBtn.addEventListener(\"click\", $0544d5bc706c7688$var$showSaveDialog);\n    saveGifBtn.addEventListener(\"click\", $0544d5bc706c7688$var$showGifOptions);\n    $0544d5bc706c7688$var$inputs.playGif.addEventListener(\"change\", function() {\n        if ((0, $3816ae512892ed40$export$2e2bcd8739ae039).frames.length < 2) return;\n        if (this.checked) $0544d5bc706c7688$var$playNextGifFrame();\n    });\n    $0544d5bc706c7688$var$inputs.bgColor.addEventListener(\"click\", function() {\n        (0, $63fd6a7b35566806$export$2e2bcd8739ae039).show(this, $0544d5bc706c7688$var$imgCanvas);\n    });\n    $0544d5bc706c7688$var$inputs.guideColor.addEventListener(\"click\", function() {\n        (0, $63fd6a7b35566806$export$2e2bcd8739ae039).show(this, $0544d5bc706c7688$var$imgCanvas);\n    });\n    $0544d5bc706c7688$var$inputs.bgColor.addEventListener(\"colorchange\", function() {\n        $0544d5bc706c7688$var$redrawImgCanvas();\n        var color = $0544d5bc706c7688$var$inputs.bgColor.style.backgroundColor;\n        for(let i = 0; i < $0544d5bc706c7688$var$previewImages.length; ++i){\n            var parentStyle = $0544d5bc706c7688$var$previewImages[i].parentNode.style;\n            parentStyle.backgroundColor = color;\n        }\n    });\n    $0544d5bc706c7688$var$inputs.guideColor.addEventListener(\"colorchange\", $0544d5bc706c7688$var$redrawEditor);\n    $0544d5bc706c7688$var$menuBox.addEventListener(\"scroll\", (0, $63fd6a7b35566806$export$2e2bcd8739ae039).hide, {\n        passive: true\n    });\n    $0544d5bc706c7688$var$imgCanvas.addEventListener(\"edstatechange\", function(e) {\n        if (e.detail) $0544d5bc706c7688$var$editorCanvas.style.display = \"none\";\n        else $0544d5bc706c7688$var$editorCanvas.style.removeProperty(\"display\");\n    });\n}\nfunction $0544d5bc706c7688$var$updateSizeInputValue(input, type) {\n    var value = $0544d5bc706c7688$var$parseInputValue(input);\n    if (!value || value < 10) return;\n    if ($0544d5bc706c7688$var$cropShape != $0544d5bc706c7688$var$cropShapes.FREEFORM) {\n        $0544d5bc706c7688$var$inputs.width.value = $0544d5bc706c7688$var$inputs.height.value = value;\n        $0544d5bc706c7688$var$crop.width = $0544d5bc706c7688$var$crop.height = value;\n    } else $0544d5bc706c7688$var$crop[type] = value;\n    $0544d5bc706c7688$var$setCropSize($0544d5bc706c7688$var$crop.width, $0544d5bc706c7688$var$crop.height);\n    $0544d5bc706c7688$var$redrawEditor();\n    if ($0544d5bc706c7688$var$inputs.showPreview.checked) $0544d5bc706c7688$var$updatePreview();\n}\nfunction $0544d5bc706c7688$var$updatePosInputValue(input, type) {\n    var value = $0544d5bc706c7688$var$parseInputValue(input);\n    if (value === undefined) return;\n    $0544d5bc706c7688$var$crop[type] = value;\n    $0544d5bc706c7688$var$setCropPosition($0544d5bc706c7688$var$crop.x, $0544d5bc706c7688$var$crop.y);\n    $0544d5bc706c7688$var$redrawEditor();\n    if ($0544d5bc706c7688$var$inputs.showPreview.checked) $0544d5bc706c7688$var$updatePreview();\n}\nfunction $0544d5bc706c7688$var$playNextGifFrame() {\n    if (!$0544d5bc706c7688$var$inputs.playGif.checked) return;\n    var nextFrame = ++$0544d5bc706c7688$var$inputs.frame.value;\n    if (nextFrame == (0, $3816ae512892ed40$export$2e2bcd8739ae039).frames.length) $0544d5bc706c7688$var$inputs.frame.value = nextFrame = 0;\n    var frame = (0, $3816ae512892ed40$export$2e2bcd8739ae039).frames[nextFrame];\n    $0544d5bc706c7688$var$img = frame.bitmap;\n    $0544d5bc706c7688$var$updateImgRenders();\n    setTimeout($0544d5bc706c7688$var$playNextGifFrame, frame.info.delay * 10);\n}\nfunction $0544d5bc706c7688$var$createSectionTitle(text) {\n    var title = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label(text);\n    title.element.classList.add(\"sectionTitle\");\n    return title;\n}\nvar $0544d5bc706c7688$var$prevShapeBtn;\nfunction $0544d5bc706c7688$var$shapeBtnHandler(value) {\n    return function() {\n        if ($0544d5bc706c7688$var$cropShape == value) return;\n        $0544d5bc706c7688$var$cropShape = value;\n        if (value != $0544d5bc706c7688$var$cropShapes.FREEFORM) $0544d5bc706c7688$var$setCropSize($0544d5bc706c7688$var$crop.width, $0544d5bc706c7688$var$crop.width);\n        for(let i = 0; i < $0544d5bc706c7688$var$previewImages.length; ++i){\n            let parent = $0544d5bc706c7688$var$previewImages[i].parentNode;\n            parent.style.borderRadius = (value == $0544d5bc706c7688$var$cropShapes.CIRCLE ? $0544d5bc706c7688$var$previewSizes[i] : 0) + \"px\";\n        }\n        this.classList.add(\"chosen\");\n        $0544d5bc706c7688$var$prevShapeBtn.classList.remove(\"chosen\");\n        $0544d5bc706c7688$var$prevShapeBtn = this;\n        $0544d5bc706c7688$var$redrawEditor();\n        if ($0544d5bc706c7688$var$inputs.showPreview.checked) $0544d5bc706c7688$var$updatePreview();\n    };\n}\nfunction $0544d5bc706c7688$var$parseInputValue(el) {\n    if (el.value == \"\") return;\n    var value = Number(el.value);\n    if (isNaN(value)) {\n        $0544d5bc706c7688$var$showNotification((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Invalid value\"));\n        return;\n    }\n    return value;\n}\nfunction $0544d5bc706c7688$var$createMenuButton(label, split, chosen) {\n    var btn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button(label);\n    var classes = [\n        \"menuBtn\"\n    ];\n    if (split) classes.push(\"split\");\n    if (chosen) classes.push(\"chosen\");\n    btn.element.classList.add(...classes);\n    return btn;\n}\nfunction $0544d5bc706c7688$var$createShapeIcon(type) {\n    var el = document.createElement(\"span\");\n    el.classList.add(\"shapeIcon\", type);\n    return el;\n}\nfunction $0544d5bc706c7688$var$createShapeButton(label, type, chosen) {\n    var btn = $0544d5bc706c7688$var$createMenuButton(label, false, chosen);\n    var icon = $0544d5bc706c7688$var$createShapeIcon(type);\n    btn.element.prepend(icon);\n    btn.addEventListener(\"click\", $0544d5bc706c7688$var$shapeBtnHandler($0544d5bc706c7688$var$cropShapes[type.toUpperCase()]));\n    return btn;\n}\nfunction $0544d5bc706c7688$var$initNotifBox() {\n    $0544d5bc706c7688$var$notifBox = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Floatbox;\n    $0544d5bc706c7688$var$notifBox.element.id = \"notifBox\";\n    $0544d5bc706c7688$var$box.appendChild($0544d5bc706c7688$var$notifBox);\n}\nvar $0544d5bc706c7688$var$notifTimeout = null;\nfunction $0544d5bc706c7688$var$showNotification(text, time) {\n    if ($0544d5bc706c7688$var$notifTimeout != null) clearTimeout($0544d5bc706c7688$var$notifTimeout);\n    if (!time) time = 1000;\n    var notifEl = $0544d5bc706c7688$var$notifBox.element;\n    notifEl.innerText = text;\n    notifEl.classList.add(\"show\");\n    $0544d5bc706c7688$var$notifTimeout = setTimeout(function() {\n        notifEl.classList.remove(\"show\");\n        $0544d5bc706c7688$var$notifTimeout = null;\n    }, time);\n}\nfunction $0544d5bc706c7688$var$initGifOptions() {\n    $0544d5bc706c7688$var$gifOptionsDialog = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Dialog((0, $313f6ce5359206e9$export$71511d61b312f219)(\"GIF Options\"));\n    $0544d5bc706c7688$var$gifOptionsDialog.appendChildren([\n        $0544d5bc706c7688$var$inputs.create(\"startFrame\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Start frame\"), \"number\"),\n        $0544d5bc706c7688$var$inputs.create(\"endFrame\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"End frame\"), \"number\"),\n        $0544d5bc706c7688$var$inputs.create(\"loopCount\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Loop count\"), \"number\"),\n        $0544d5bc706c7688$var$inputs.create(\"speedMult\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Speed multiplier\"), \"number\"),\n        $0544d5bc706c7688$var$inputs.create(\"keepGifColors\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Keep original colors\"), \"checkbox\")\n    ]);\n    var filtersLabel = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Filters\"));\n    filtersLabel.element.classList.add(\"menuInputBox\");\n    $0544d5bc706c7688$var$gifOptionsDialog.appendChild(filtersLabel);\n    var filtersBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button(\"\\u2728 \" + (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Options...\"));\n    filtersBtn.element.style.marginLeft = \"auto\";\n    filtersLabel.appendChild(filtersBtn);\n    $0544d5bc706c7688$var$inputs.startFrame.value = $0544d5bc706c7688$var$inputs.startFrame.min = 0;\n    $0544d5bc706c7688$var$inputs.endFrame.value = $0544d5bc706c7688$var$inputs.endFrame.min = 0;\n    $0544d5bc706c7688$var$inputs.loopCount.value = $0544d5bc706c7688$var$inputs.loopCount.min = 0;\n    $0544d5bc706c7688$var$inputs.speedMult.value = 1;\n    $0544d5bc706c7688$var$inputs.speedMult.step = 0.25;\n    $0544d5bc706c7688$var$inputs.speedMult.min = 0;\n    $0544d5bc706c7688$var$inputs.keepGifColors.style.paddingTop = \"0\";\n    var saveBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Save\"));\n    $0544d5bc706c7688$var$gifOptionsDialog.appendButton(saveBtn);\n    saveBtn.addEventListener(\"click\", function() {\n        $0544d5bc706c7688$var$gifOptionsDialog.hide();\n        $0544d5bc706c7688$var$renderAndSaveGif();\n    });\n    filtersBtn.addEventListener(\"click\", function() {\n        $0544d5bc706c7688$var$gifOptionsDialog.hide();\n        // Render a static image for the image filters canvas\n        $0544d5bc706c7688$var$render();\n        (0, $8432c3b0480904ec$export$2e2bcd8739ae039).showOptions($0544d5bc706c7688$var$gifFilters, $0544d5bc706c7688$var$renderCanvas, function() {\n            $0544d5bc706c7688$var$gifOptionsDialog.show();\n        });\n    });\n    $0544d5bc706c7688$var$gifOptionsDialog.appendHideButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Cancel\"), \"secondary\");\n    $0544d5bc706c7688$var$container.appendChild($0544d5bc706c7688$var$gifOptionsDialog);\n}\nvar $0544d5bc706c7688$var$gifFilters;\nfunction $0544d5bc706c7688$var$showGifOptions() {\n    $0544d5bc706c7688$var$gifFilters = {};\n    $0544d5bc706c7688$var$gifOptionsDialog.show();\n}\nfunction $0544d5bc706c7688$var$initSaveDialog() {\n    (0, $8432c3b0480904ec$export$2e2bcd8739ae039).init($0544d5bc706c7688$var$container);\n    (0, $87450d491c8f5778$export$2e2bcd8739ae039).init($0544d5bc706c7688$var$container);\n    $0544d5bc706c7688$var$saveDialog = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Dialog((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Save Image\"));\n    $0544d5bc706c7688$var$saveDialog.element.id = \"saveDialog\";\n    $0544d5bc706c7688$var$container.appendChild($0544d5bc706c7688$var$saveDialog);\n    var label = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label((0, $313f6ce5359206e9$export$71511d61b312f219)(\"You can save the image now, or apply some filters and check how your avatar would look on some websites.\"));\n    $0544d5bc706c7688$var$saveDialog.appendChild(label);\n    $0544d5bc706c7688$var$saveDialog.body.appendChild(document.createElement(\"br\"));\n    $0544d5bc706c7688$var$renderCanvas = document.createElement(\"canvas\");\n    $0544d5bc706c7688$var$renderCtx = $0544d5bc706c7688$var$renderCanvas.getContext(\"2d\", {\n        willReadFrequently: true\n    });\n    $0544d5bc706c7688$var$saveDialog.body.appendChild($0544d5bc706c7688$var$renderCanvas);\n    var actionsContainer = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Widget;\n    actionsContainer.element.id = \"imgActionsContainer\";\n    $0544d5bc706c7688$var$saveDialog.appendChild(actionsContainer);\n    var filtersBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button(\"\\u2728 \" + (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Filters...\"));\n    actionsContainer.appendChild(filtersBtn);\n    var previewBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button(\"\\uD83D\\uDDBC\\uFE0F \" + (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Preview...\"));\n    actionsContainer.appendChild(previewBtn);\n    var saveBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Save\"));\n    $0544d5bc706c7688$var$saveDialog.appendButton(saveBtn);\n    var closeBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Close\"), \"secondary\");\n    $0544d5bc706c7688$var$saveDialog.appendButton(closeBtn);\n    saveBtn.addEventListener(\"click\", $0544d5bc706c7688$var$saveImage);\n    closeBtn.addEventListener(\"click\", function() {\n        $0544d5bc706c7688$var$saveDialog.hide();\n    });\n    filtersBtn.addEventListener(\"click\", function() {\n        $0544d5bc706c7688$var$saveDialog.hide();\n        (0, $8432c3b0480904ec$export$2e2bcd8739ae039).showOptions(null, $0544d5bc706c7688$var$renderCanvas, function() {\n            $0544d5bc706c7688$var$renderCtx.clearRect(0, 0, $0544d5bc706c7688$var$crop.width, $0544d5bc706c7688$var$crop.height);\n            $0544d5bc706c7688$var$renderCtx.drawImage((0, $8432c3b0480904ec$export$2e2bcd8739ae039).canvas, 0, 0);\n            $0544d5bc706c7688$var$saveDialog.show();\n        });\n    });\n    previewBtn.addEventListener(\"click\", function() {\n        $0544d5bc706c7688$var$saveDialog.hide();\n        (0, $87450d491c8f5778$export$2e2bcd8739ae039).show($0544d5bc706c7688$var$renderCanvas, function() {\n            $0544d5bc706c7688$var$saveDialog.show();\n        });\n    });\n}\nfunction $0544d5bc706c7688$var$showSaveDialog() {\n    $0544d5bc706c7688$var$render();\n    $0544d5bc706c7688$var$saveDialog.show();\n}\nvar $0544d5bc706c7688$var$rotateCanvas, $0544d5bc706c7688$var$rotateCtx, $0544d5bc706c7688$var$rotateSlider, $0544d5bc706c7688$var$angleLabel;\nfunction $0544d5bc706c7688$var$initRotateDialog() {\n    $0544d5bc706c7688$var$rotateDialog = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Dialog((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Rotate\"));\n    $0544d5bc706c7688$var$rotateDialog.element.style.textAlign = \"center\";\n    $0544d5bc706c7688$var$container.appendChild($0544d5bc706c7688$var$rotateDialog);\n    $0544d5bc706c7688$var$rotateCanvas = document.createElement(\"canvas\");\n    $0544d5bc706c7688$var$rotateCanvas.id = \"rotateCanvas\";\n    $0544d5bc706c7688$var$rotateCtx = $0544d5bc706c7688$var$rotateCanvas.getContext(\"2d\");\n    $0544d5bc706c7688$var$rotateDialog.body.appendChild($0544d5bc706c7688$var$rotateCanvas);\n    $0544d5bc706c7688$var$angleLabel = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label(\"0\\xb0\");\n    $0544d5bc706c7688$var$rotateDialog.appendChild($0544d5bc706c7688$var$angleLabel);\n    var rotateDetents = (0, $81b042702cd50b64$export$95ffc9bdbe14045b)(\"rotateDetents\", [\n        90,\n        180,\n        270\n    ]);\n    $0544d5bc706c7688$var$rotateSlider = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Input(\"range\");\n    $0544d5bc706c7688$var$rotateSlider.element.style.width = \"100%\";\n    $0544d5bc706c7688$var$rotateSlider.min = 0;\n    $0544d5bc706c7688$var$rotateSlider.max = 360;\n    $0544d5bc706c7688$var$rotateSlider.step = 0.1;\n    $0544d5bc706c7688$var$rotateSlider.value = 0;\n    $0544d5bc706c7688$var$rotateSlider.element.setAttribute(\"list\", rotateDetents);\n    $0544d5bc706c7688$var$rotateSlider.element.setAttribute(\"aria-label\", (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Rotation angle\"));\n    $0544d5bc706c7688$var$rotateDialog.appendChild($0544d5bc706c7688$var$rotateSlider);\n    var applyBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Apply\"));\n    $0544d5bc706c7688$var$rotateDialog.appendButton(applyBtn);\n    applyBtn.addEventListener(\"click\", function() {\n        $0544d5bc706c7688$var$rotateDialog.hide();\n        $0544d5bc706c7688$var$openRotatedImg($0544d5bc706c7688$var$rotateSlider.value);\n    });\n    $0544d5bc706c7688$var$rotateDialog.appendHideButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Cancel\"), \"secondary\");\n    $0544d5bc706c7688$var$rotateSlider.addEventListener(\"input\", function() {\n        $0544d5bc706c7688$var$angleLabel.text = this.value + \"\\xb0\";\n        $0544d5bc706c7688$var$rotateCanvas.style.transform = \"rotate(\" + this.value + \"deg)\";\n    });\n}\nvar $0544d5bc706c7688$var$origImg, $0544d5bc706c7688$var$origFrames, $0544d5bc706c7688$var$rotateCanvasInit;\nfunction $0544d5bc706c7688$var$showRotateDialog() {\n    if ($0544d5bc706c7688$var$rotateCanvasInit) {\n        var src = (0, $3816ae512892ed40$export$2e2bcd8739ae039).isAnimated() ? (0, $3816ae512892ed40$export$2e2bcd8739ae039).frames[0].bitmap : $0544d5bc706c7688$var$img;\n        $0544d5bc706c7688$var$rotateCanvas.width = src.width;\n        $0544d5bc706c7688$var$rotateCanvas.height = src.height;\n        $0544d5bc706c7688$var$rotateCtx.drawImage(src, 0, 0);\n        $0544d5bc706c7688$var$rotateCanvasInit = false;\n    }\n    $0544d5bc706c7688$var$rotateDialog.show();\n}\nfunction $0544d5bc706c7688$var$renderRotatedImg(src, angle) {\n    var w = src.width;\n    var h = src.height;\n    var absSin = Math.abs(Math.sin(angle));\n    var absCos = Math.abs(Math.cos(angle));\n    var rw = Math.ceil(w * absCos + h * absSin);\n    var rh = Math.ceil(w * absSin + h * absCos);\n    $0544d5bc706c7688$var$renderCanvas.width = rw;\n    $0544d5bc706c7688$var$renderCanvas.height = rh;\n    $0544d5bc706c7688$var$renderCtx.translate(rw / 2, rh / 2);\n    $0544d5bc706c7688$var$renderCtx.rotate(angle);\n    $0544d5bc706c7688$var$renderCtx.drawImage(src, -w / 2, -h / 2);\n    return createImageBitmap($0544d5bc706c7688$var$renderCtx.getImageData(0, 0, rw, rh));\n}\nasync function $0544d5bc706c7688$var$openRotatedImg(angle) {\n    if (angle != 0 && angle != 360) {\n        angle = angle * Math.PI / 180;\n        if ((0, $3816ae512892ed40$export$2e2bcd8739ae039).isAnimated()) {\n            if (!$0544d5bc706c7688$var$origFrames) $0544d5bc706c7688$var$origFrames = (0, $3816ae512892ed40$export$2e2bcd8739ae039).frames;\n            var frames = [];\n            for(var i = 0; i < $0544d5bc706c7688$var$origFrames.length; ++i){\n                var { info: info, bitmap: bitmap } = $0544d5bc706c7688$var$origFrames[i];\n                var rotBitmap = await $0544d5bc706c7688$var$renderRotatedImg(bitmap, angle);\n                frames[i] = {\n                    info: info,\n                    bitmap: rotBitmap\n                };\n            }\n            (0, $3816ae512892ed40$export$2e2bcd8739ae039).frames = frames;\n        } else {\n            if (!$0544d5bc706c7688$var$origImg) $0544d5bc706c7688$var$origImg = $0544d5bc706c7688$var$img;\n            $0544d5bc706c7688$var$img = await $0544d5bc706c7688$var$renderRotatedImg($0544d5bc706c7688$var$origImg, angle);\n        }\n    } else if ($0544d5bc706c7688$var$origImg) {\n        $0544d5bc706c7688$var$img = $0544d5bc706c7688$var$origImg;\n        $0544d5bc706c7688$var$origImg = null;\n    } else if ($0544d5bc706c7688$var$origFrames) {\n        (0, $3816ae512892ed40$export$2e2bcd8739ae039).frames = $0544d5bc706c7688$var$origFrames;\n        $0544d5bc706c7688$var$origFrames = null;\n    } else return;\n    if ((0, $3816ae512892ed40$export$2e2bcd8739ae039).isAnimated()) {\n        var currentFrame = $0544d5bc706c7688$var$inputs.frame.value;\n        $0544d5bc706c7688$var$img = (0, $3816ae512892ed40$export$2e2bcd8739ae039).frames[currentFrame].bitmap;\n    }\n    $0544d5bc706c7688$var$setMainCanvasesSize($0544d5bc706c7688$var$img.width, $0544d5bc706c7688$var$img.height);\n    $0544d5bc706c7688$var$editorCanvasInit = true;\n    $0544d5bc706c7688$var$show();\n    $0544d5bc706c7688$var$reset();\n}\nfunction $0544d5bc706c7688$var$setMainCanvasesSize(w, h) {\n    $0544d5bc706c7688$var$imgCanvas.width = $0544d5bc706c7688$var$editorCanvas.width = $0544d5bc706c7688$var$previewCanvas.width = w;\n    $0544d5bc706c7688$var$imgCanvas.height = $0544d5bc706c7688$var$editorCanvas.height = $0544d5bc706c7688$var$previewCanvas.height = h;\n}\nvar $0544d5bc706c7688$var$img;\nvar $0544d5bc706c7688$var$usingObjectUrl = false;\nvar $0544d5bc706c7688$var$currentName;\nfunction $0544d5bc706c7688$var$open(src, successCb) {\n    if ($0544d5bc706c7688$var$usingObjectUrl) {\n        URL.revokeObjectURL($0544d5bc706c7688$var$origImg ? $0544d5bc706c7688$var$origImg.src : $0544d5bc706c7688$var$img.src);\n        $0544d5bc706c7688$var$usingObjectUrl = false;\n    }\n    $0544d5bc706c7688$var$origImg = $0544d5bc706c7688$var$origFrames = null;\n    if ((0, $3816ae512892ed40$export$2e2bcd8739ae039).reset()) {\n        $0544d5bc706c7688$var$inputs.frame.value = 0;\n        $0544d5bc706c7688$var$inputs.frame.disabled = true;\n        $0544d5bc706c7688$var$inputs.startFrame.value = 0;\n        $0544d5bc706c7688$var$inputs.endFrame.value = 0;\n        $0544d5bc706c7688$var$inputs.loopCount.value = 0;\n        $0544d5bc706c7688$var$inputs.keepGifColors.checked = false;\n        $0544d5bc706c7688$var$inputs.playGif.checked = false;\n    }\n    (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).setProgress(-1);\n    (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).show();\n    if (src instanceof File) {\n        $0544d5bc706c7688$var$currentName = src.name.slice(0, src.name.lastIndexOf(\".\"));\n        if (src.type == \"image/gif\") (0, $3816ae512892ed40$export$2e2bcd8739ae039).load(src, $0544d5bc706c7688$var$inputs);\n        src = URL.createObjectURL(src);\n        $0544d5bc706c7688$var$usingObjectUrl = true;\n    } else {\n        if (src == \"\") return;\n        if ($0544d5bc706c7688$var$img && src == $0544d5bc706c7688$var$img.src) {\n            (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).hide();\n            $0544d5bc706c7688$var$show();\n            $0544d5bc706c7688$var$reset();\n            successCb();\n            return;\n        }\n        $0544d5bc706c7688$var$currentName = src.slice(src.lastIndexOf(\"/\") + 1, src.lastIndexOf(\".\"));\n    }\n    if (!($0544d5bc706c7688$var$img instanceof Image)) $0544d5bc706c7688$var$img = new Image;\n    var loadCb, errorCb;\n    $0544d5bc706c7688$var$img.addEventListener(\"load\", loadCb = function() {\n        (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).setProgress(1);\n        (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).hide();\n        $0544d5bc706c7688$var$setMainCanvasesSize($0544d5bc706c7688$var$img.width, $0544d5bc706c7688$var$img.height);\n        $0544d5bc706c7688$var$editorCanvasInit = true;\n        $0544d5bc706c7688$var$rotateSlider.value = 0;\n        $0544d5bc706c7688$var$angleLabel.text = \"0\\xb0\";\n        $0544d5bc706c7688$var$rotateCanvas.style.transform = \"\";\n        $0544d5bc706c7688$var$rotateCanvasInit = true;\n        $0544d5bc706c7688$var$show();\n        $0544d5bc706c7688$var$reset();\n        successCb();\n        $0544d5bc706c7688$var$img.removeEventListener(\"load\", loadCb);\n        $0544d5bc706c7688$var$img.removeEventListener(\"error\", errorCb);\n    });\n    $0544d5bc706c7688$var$img.addEventListener(\"error\", errorCb = function() {\n        (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).hide();\n        (0, $cff5b25a521f554e$export$2e2bcd8739ae039).show((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Failed to load image.\"));\n        $0544d5bc706c7688$var$img.removeEventListener(\"load\", loadCb);\n        $0544d5bc706c7688$var$img.removeEventListener(\"error\", errorCb);\n    });\n    $0544d5bc706c7688$var$img.src = src;\n}\nfunction $0544d5bc706c7688$var$show() {\n    $0544d5bc706c7688$var$container.appendChild($0544d5bc706c7688$var$box);\n    setTimeout(function() {\n        $0544d5bc706c7688$var$box.element.classList.remove(\"hide\");\n    }, 0);\n    if (!localStorage.getItem(\"tutorialShown\")) {\n        $0544d5bc706c7688$var$showTutorialDialog();\n        localStorage.setItem(\"tutorialShown\", \"true\");\n    }\n}\nfunction $0544d5bc706c7688$var$hide() {\n    $0544d5bc706c7688$var$box.element.classList.add(\"hide\");\n    $0544d5bc706c7688$var$container.removeChildAfterTransition($0544d5bc706c7688$var$box);\n    (0, $63fd6a7b35566806$export$2e2bcd8739ae039).hide();\n    $0544d5bc706c7688$var$inputs.playGif.checked = false;\n}\nfunction $0544d5bc706c7688$var$isHidden() {\n    return $0544d5bc706c7688$var$box.element.classList.contains(\"hide\");\n}\nfunction $0544d5bc706c7688$var$reset() {\n    $0544d5bc706c7688$var$fitImageToViewport();\n    $0544d5bc706c7688$var$resetCropArea();\n    $0544d5bc706c7688$var$inputs.flipH.checked = $0544d5bc706c7688$var$inputs.flipV.checked = false;\n    $0544d5bc706c7688$var$redrawEditor();\n    $0544d5bc706c7688$var$updateImgRenders();\n}\nfunction $0544d5bc706c7688$var$resetCropArea() {\n    var s = Math.floor(($0544d5bc706c7688$var$img.width < $0544d5bc706c7688$var$img.height ? $0544d5bc706c7688$var$img.width : $0544d5bc706c7688$var$img.height) * 0.5);\n    s -= s % 10;\n    $0544d5bc706c7688$var$crop.x = $0544d5bc706c7688$var$crop.y = 0;\n    $0544d5bc706c7688$var$setCropSize(s, s);\n    $0544d5bc706c7688$var$setCropPosition(0, 0);\n}\nfunction $0544d5bc706c7688$var$fitImageToViewport() {\n    var innerEl = $0544d5bc706c7688$var$innerBox.element;\n    var vpWidth = innerEl.offsetWidth;\n    var vpHeight = innerEl.offsetHeight;\n    var vpAspectRatio = vpWidth / vpHeight;\n    var imgAspectRatio = $0544d5bc706c7688$var$img.width / $0544d5bc706c7688$var$img.height;\n    var ratio = $0544d5bc706c7688$var$inputs.scaleDevicePixel.checked ? 1 : devicePixelRatio;\n    $0544d5bc706c7688$var$setCanvasScale((vpAspectRatio > imgAspectRatio ? vpHeight / $0544d5bc706c7688$var$img.height : vpWidth / $0544d5bc706c7688$var$img.width) * ratio);\n    $0544d5bc706c7688$var$setCanvasMargins(0, 0);\n}\nfunction $0544d5bc706c7688$var$setCropPosition(x, y) {\n    if (!$0544d5bc706c7688$var$inputs.allowOffscreen.checked) {\n        x = Math.max(0, Math.min(x, $0544d5bc706c7688$var$img.width - $0544d5bc706c7688$var$crop.width));\n        y = Math.max(0, Math.min(y, $0544d5bc706c7688$var$img.height - $0544d5bc706c7688$var$crop.height));\n    }\n    $0544d5bc706c7688$var$crop.x = x;\n    $0544d5bc706c7688$var$crop.y = y;\n    $0544d5bc706c7688$var$inputs.xPos.value = x;\n    $0544d5bc706c7688$var$inputs.yPos.value = y;\n}\nfunction $0544d5bc706c7688$var$setCropSize(width, height, preferHigher) {\n    if (!$0544d5bc706c7688$var$inputs.allowOffscreen.checked) {\n        width = Math.min(width, $0544d5bc706c7688$var$img.width - $0544d5bc706c7688$var$crop.x);\n        height = Math.min(height, $0544d5bc706c7688$var$img.height - $0544d5bc706c7688$var$crop.y);\n    }\n    var min = $0544d5bc706c7688$var$img.width < 50 || $0544d5bc706c7688$var$img.height < 50 ? 1 : 10;\n    width = Math.max(min, width);\n    height = Math.max(min, height);\n    if ($0544d5bc706c7688$var$cropShape != $0544d5bc706c7688$var$cropShapes.FREEFORM) {\n        if (preferHigher ? width > height : width < height) height = width;\n        else width = height;\n    }\n    $0544d5bc706c7688$var$crop.width = width;\n    $0544d5bc706c7688$var$crop.height = height;\n    $0544d5bc706c7688$var$inputs.width.value = width;\n    $0544d5bc706c7688$var$inputs.height.value = height;\n}\nvar $0544d5bc706c7688$var$canvasX = 0, $0544d5bc706c7688$var$canvasY = 0;\nfunction $0544d5bc706c7688$var$setCanvasMargins(x, y) {\n    $0544d5bc706c7688$var$canvasX = x;\n    $0544d5bc706c7688$var$canvasY = y;\n    var element = $0544d5bc706c7688$var$canvasBox.element;\n    element.style.marginLeft = $0544d5bc706c7688$var$canvasX + \"px\";\n    element.style.marginTop = $0544d5bc706c7688$var$canvasY + \"px\";\n}\nvar $0544d5bc706c7688$var$canvasScale = 1;\nfunction $0544d5bc706c7688$var$setCanvasScale(scale) {\n    var ratio = $0544d5bc706c7688$var$inputs.scaleDevicePixel.checked ? 1 : devicePixelRatio;\n    scale = Math.round(Math.max(0.1, Math.min(scale, 8)) * 1000) / 1000;\n    var realScale = scale / ratio;\n    $0544d5bc706c7688$var$canvasBox.element.style.transform = \"scale(\" + realScale.toFixed(3) + \")\";\n    $0544d5bc706c7688$var$inputs.zoom.value = Math.round(scale * 100);\n    var newLineWidth = Math.ceil(Math.max(1, 1 / (realScale * devicePixelRatio)));\n    if (newLineWidth != $0544d5bc706c7688$var$editorCtx.lineWidth) {\n        $0544d5bc706c7688$var$editorCtx.lineWidth = newLineWidth;\n        $0544d5bc706c7688$var$redrawEditor();\n    }\n    var mScale = scale / $0544d5bc706c7688$var$canvasScale;\n    $0544d5bc706c7688$var$setCanvasMargins($0544d5bc706c7688$var$canvasX * mScale, $0544d5bc706c7688$var$canvasY * mScale);\n    $0544d5bc706c7688$var$canvasScale = scale;\n    $0544d5bc706c7688$var$showNotification((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Zoom: \") + +(scale * 100).toFixed(1) + \"%\");\n}\nfunction $0544d5bc706c7688$var$applyFlipTransform(canvas, ctx) {\n    var flipH = $0544d5bc706c7688$var$inputs.flipH.checked;\n    var flipV = $0544d5bc706c7688$var$inputs.flipV.checked;\n    var sx = 1, sy = 1;\n    if (flipH) {\n        ctx.translate(canvas.width, 0);\n        sx = -1;\n    }\n    if (flipV) {\n        ctx.translate(0, canvas.height);\n        sy = -1;\n    }\n    ctx.scale(sx, sy);\n}\nvar $0544d5bc706c7688$var$crop = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n};\nvar $0544d5bc706c7688$var$prevRect;\nvar $0544d5bc706c7688$var$editorCanvasInit = false;\nfunction $0544d5bc706c7688$var$drawEditor() {\n    var ctx = $0544d5bc706c7688$var$editorCtx;\n    ctx.globalCompositeOperation = \"source-over\";\n    // Draw the mask\n    var maskRect;\n    if ($0544d5bc706c7688$var$editorCanvasInit) {\n        maskRect = [\n            0,\n            0,\n            $0544d5bc706c7688$var$editorCanvas.width,\n            $0544d5bc706c7688$var$editorCanvas.height\n        ];\n        $0544d5bc706c7688$var$editorCanvasInit = false;\n    } else {\n        maskRect = $0544d5bc706c7688$var$prevRect;\n        ctx.clearRect(...maskRect);\n    }\n    ctx.fillStyle = \"rgba(0,0,0,0.5)\";\n    ctx.fillRect(...maskRect);\n    // Draw the crop selector\n    var lw = ctx.lineWidth;\n    var x = $0544d5bc706c7688$var$crop.x - lw / 2, y = $0544d5bc706c7688$var$crop.y - lw / 2, width = $0544d5bc706c7688$var$crop.width + lw, height = $0544d5bc706c7688$var$crop.height + lw;\n    var cx, cy;\n    ctx.strokeStyle = \"#ffffff\";\n    if ($0544d5bc706c7688$var$cropShape == $0544d5bc706c7688$var$cropShapes.CIRCLE) {\n        ctx.strokeRect(x, y, width, height);\n        cx = $0544d5bc706c7688$var$crop.x + $0544d5bc706c7688$var$crop.width / 2;\n        cy = $0544d5bc706c7688$var$crop.y + $0544d5bc706c7688$var$crop.height / 2;\n        ctx.beginPath();\n        ctx.arc(cx, cy, width / 2 - lw / 2, 0, 2 * Math.PI);\n    } else {\n        ctx.beginPath();\n        ctx.rect(x, y, width, height);\n    }\n    // Save the path, draw the outline, then poke the hole\n    ctx.save();\n    ctx.stroke();\n    ctx.restore();\n    ctx.globalCompositeOperation = \"destination-out\";\n    ctx.fillStyle = \"#000000\";\n    ctx.fill();\n    // Draw guidelines\n    if ($0544d5bc706c7688$var$inputs.showGuidelines.checked) {\n        ctx.globalCompositeOperation = \"source-over\";\n        ctx.setLineDash([\n            10,\n            10\n        ]);\n        ctx.strokeStyle = $0544d5bc706c7688$var$inputs.guideColor.style.backgroundColor;\n        ctx.lineWidth += 1 + Math.floor($0544d5bc706c7688$var$crop.width * $0544d5bc706c7688$var$crop.height / 1000000);\n        if (cx === undefined) {\n            cx = $0544d5bc706c7688$var$crop.x + $0544d5bc706c7688$var$crop.width / 2;\n            cy = $0544d5bc706c7688$var$crop.y + $0544d5bc706c7688$var$crop.height / 2;\n        }\n        var right = $0544d5bc706c7688$var$crop.x + $0544d5bc706c7688$var$crop.width;\n        var bottom = $0544d5bc706c7688$var$crop.y + $0544d5bc706c7688$var$crop.height;\n        ctx.beginPath();\n        (0, $81b042702cd50b64$export$d015f26f64ff14db)(ctx, cx, cy, cx, $0544d5bc706c7688$var$crop.y); // top\n        (0, $81b042702cd50b64$export$d015f26f64ff14db)(ctx, cx, cy, $0544d5bc706c7688$var$crop.x, cy); // left\n        (0, $81b042702cd50b64$export$d015f26f64ff14db)(ctx, cx, cy, cx, bottom); // bottom\n        (0, $81b042702cd50b64$export$d015f26f64ff14db)(ctx, cx, cy, right, cy); // right\n        ctx.stroke();\n        ctx.setLineDash([]);\n        ctx.lineWidth = lw;\n    }\n    $0544d5bc706c7688$var$prevRect = [\n        $0544d5bc706c7688$var$crop.x - lw,\n        $0544d5bc706c7688$var$crop.y - lw,\n        $0544d5bc706c7688$var$crop.width + lw * 2,\n        $0544d5bc706c7688$var$crop.height + lw * 2\n    ];\n}\nfunction $0544d5bc706c7688$var$drawImgCanvas() {\n    var ctx = $0544d5bc706c7688$var$imgCtx;\n    ctx.clearRect(0, 0, $0544d5bc706c7688$var$img.width, $0544d5bc706c7688$var$img.height);\n    ctx.fillStyle = $0544d5bc706c7688$var$inputs.bgColor.style.backgroundColor;\n    ctx.fillRect(0, 0, $0544d5bc706c7688$var$img.width, $0544d5bc706c7688$var$img.height);\n    $0544d5bc706c7688$var$applyFlipTransform($0544d5bc706c7688$var$imgCanvas, ctx);\n    ctx.drawImage($0544d5bc706c7688$var$img, 0, 0, $0544d5bc706c7688$var$img.width, $0544d5bc706c7688$var$img.height);\n    ctx.resetTransform();\n}\nvar $0544d5bc706c7688$var$redrawEditor = (0, $81b042702cd50b64$export$f98ed0023cec5998)($0544d5bc706c7688$var$drawEditor);\nvar $0544d5bc706c7688$var$redrawImgCanvas = (0, $81b042702cd50b64$export$f98ed0023cec5998)($0544d5bc706c7688$var$drawImgCanvas);\nvar $0544d5bc706c7688$var$pvRedrawing = false;\nvar $0544d5bc706c7688$var$pvRedrawNext = false;\nasync function $0544d5bc706c7688$var$redrawPreview() {\n    if ($0544d5bc706c7688$var$pvRedrawing) {\n        $0544d5bc706c7688$var$pvRedrawNext = true;\n        return;\n    }\n    $0544d5bc706c7688$var$pvRedrawing = true;\n    var flipH = $0544d5bc706c7688$var$inputs.flipH.checked;\n    var flipV = $0544d5bc706c7688$var$inputs.flipV.checked;\n    var src, isBlob;\n    if ((0, $3816ae512892ed40$export$2e2bcd8739ae039).isAnimated() || flipH || flipV || !($0544d5bc706c7688$var$img instanceof Image)) {\n        // Use the image data of the rendered ImageBitmap\n        var blob = await $0544d5bc706c7688$var$renderPreviewImg();\n        src = URL.createObjectURL(blob);\n        isBlob = true;\n    } else // Load the image directly if it's not an ANIMATED gif and there are no image modifications\n    // (except for background color)\n    src = $0544d5bc706c7688$var$img.src;\n    let count = 0;\n    for(let i = 0; i < $0544d5bc706c7688$var$previewImages.length; ++i){\n        var pImage = $0544d5bc706c7688$var$previewImages[i];\n        pImage.addEventListener(\"load\", function() {\n            if (++count == $0544d5bc706c7688$var$previewImages.length) {\n                $0544d5bc706c7688$var$pvRedrawing = false;\n                if (isBlob) URL.revokeObjectURL(src);\n                if ($0544d5bc706c7688$var$pvRedrawNext) {\n                    $0544d5bc706c7688$var$pvRedrawNext = false;\n                    $0544d5bc706c7688$var$redrawPreview();\n                }\n            }\n        }, {\n            once: true\n        });\n        pImage.src = src;\n    }\n}\nvar $0544d5bc706c7688$var$previewCanvas = document.createElement(\"canvas\");\nvar $0544d5bc706c7688$var$previewCtx = $0544d5bc706c7688$var$previewCanvas.getContext(\"2d\");\nfunction $0544d5bc706c7688$var$renderPreviewImg() {\n    let ctx = $0544d5bc706c7688$var$previewCtx;\n    ctx.clearRect(0, 0, $0544d5bc706c7688$var$img.width, $0544d5bc706c7688$var$img.height);\n    $0544d5bc706c7688$var$applyFlipTransform($0544d5bc706c7688$var$previewCanvas, ctx);\n    ctx.drawImage($0544d5bc706c7688$var$img, 0, 0, $0544d5bc706c7688$var$img.width, $0544d5bc706c7688$var$img.height);\n    ctx.resetTransform();\n    return new Promise((resolve)=>$0544d5bc706c7688$var$previewCanvas.toBlob(resolve));\n}\nfunction $0544d5bc706c7688$var$updatePreview() {\n    for(let i = 0; i < $0544d5bc706c7688$var$previewImages.length; ++i){\n        let pImage = $0544d5bc706c7688$var$previewImages[i];\n        var size = $0544d5bc706c7688$var$previewSizes[i];\n        var sx = size / $0544d5bc706c7688$var$crop.width, sy = size / $0544d5bc706c7688$var$crop.height;\n        pImage.style.left = -$0544d5bc706c7688$var$crop.x * sx + \"px\";\n        pImage.style.top = -$0544d5bc706c7688$var$crop.y * sy + \"px\";\n        pImage.style.width = $0544d5bc706c7688$var$img.width * sx + \"px\";\n        pImage.style.height = $0544d5bc706c7688$var$img.height * sy + \"px\";\n    }\n}\nfunction $0544d5bc706c7688$var$initPreview() {\n    $0544d5bc706c7688$var$redrawPreview();\n    $0544d5bc706c7688$var$updatePreview();\n}\nfunction $0544d5bc706c7688$var$updateImgRenders() {\n    $0544d5bc706c7688$var$redrawImgCanvas();\n    if ($0544d5bc706c7688$var$inputs.showPreview.checked) $0544d5bc706c7688$var$initPreview();\n}\nfunction $0544d5bc706c7688$var$getRenderPos() {\n    var flipH = $0544d5bc706c7688$var$inputs.flipH.checked;\n    var flipV = $0544d5bc706c7688$var$inputs.flipV.checked;\n    let x = $0544d5bc706c7688$var$crop.x, y = $0544d5bc706c7688$var$crop.y;\n    if (flipH) x = $0544d5bc706c7688$var$img.width - $0544d5bc706c7688$var$crop.width - x;\n    if (flipV) y = $0544d5bc706c7688$var$img.height - $0544d5bc706c7688$var$crop.height - y;\n    return [\n        x,\n        y\n    ];\n}\nfunction $0544d5bc706c7688$var$drawCroppedImage(canvas, ctx) {\n    $0544d5bc706c7688$var$applyFlipTransform(canvas, ctx);\n    let [x, y] = $0544d5bc706c7688$var$getRenderPos();\n    ctx.drawImage($0544d5bc706c7688$var$img, x, y, $0544d5bc706c7688$var$crop.width, $0544d5bc706c7688$var$crop.height, 0, 0, $0544d5bc706c7688$var$crop.width, $0544d5bc706c7688$var$crop.height // Placement\n    );\n    ctx.resetTransform();\n}\nfunction $0544d5bc706c7688$var$render(canvas, filter) {\n    if (!canvas) canvas = $0544d5bc706c7688$var$renderCanvas;\n    let ctx = canvas.getContext(\"2d\");\n    canvas.width = $0544d5bc706c7688$var$crop.width;\n    canvas.height = $0544d5bc706c7688$var$crop.height;\n    ctx.fillStyle = $0544d5bc706c7688$var$inputs.bgColor.style.backgroundColor;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    if (filter) ctx.filter = filter;\n    $0544d5bc706c7688$var$drawCroppedImage(canvas, ctx);\n}\nfunction $0544d5bc706c7688$var$saveFile(href, filename) {\n    $0544d5bc706c7688$var$saveAnchor.href = href;\n    $0544d5bc706c7688$var$saveAnchor.download = filename;\n    $0544d5bc706c7688$var$saveAnchor.click();\n}\nfunction $0544d5bc706c7688$var$saveImage() {\n    $0544d5bc706c7688$var$renderCanvas.toBlob(function(blob) {\n        var url = URL.createObjectURL(blob);\n        $0544d5bc706c7688$var$saveFile(url, $0544d5bc706c7688$var$currentName + \"_cropped.png\");\n        setTimeout(function() {\n            URL.revokeObjectURL(url);\n        }, 0);\n    });\n}\nasync function $0544d5bc706c7688$var$renderAndSaveGif() {\n    var renderer = new (0, $3816ae512892ed40$export$2e2bcd8739ae039).Renderer($0544d5bc706c7688$var$crop.width, $0544d5bc706c7688$var$crop.height, {\n        loop: Math.floor($0544d5bc706c7688$var$inputs.loopCount.value)\n    });\n    var frames = (0, $3816ae512892ed40$export$2e2bcd8739ae039).frames;\n    var lastFrame = frames.length ? frames.length - 1 : 0;\n    var start = Math.max(0, Math.min(Math.floor($0544d5bc706c7688$var$inputs.startFrame.value), lastFrame));\n    var length = Math.max(0, Math.min(Math.floor($0544d5bc706c7688$var$inputs.endFrame.value), lastFrame)) + 1;\n    var filter = (0, $8432c3b0480904ec$export$2e2bcd8739ae039).optionsToFilter($0544d5bc706c7688$var$gifFilters);\n    (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).setProgress(0);\n    (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).show();\n    var keepColors = $0544d5bc706c7688$var$inputs.keepGifColors.checked;\n    var speedMult = +$0544d5bc706c7688$var$inputs.speedMult.value;\n    for(let i = start; i < length; ++i){\n        // Allow rendering static image\n        let delay = 0;\n        if (frames.length) {\n            var frame = frames[i];\n            $0544d5bc706c7688$var$img = frame.bitmap;\n            delay = speedMult ? frame.info.delay / speedMult : 0;\n        }\n        $0544d5bc706c7688$var$render($0544d5bc706c7688$var$renderCanvas, filter);\n        let imageData = $0544d5bc706c7688$var$renderCtx.getImageData(0, 0, $0544d5bc706c7688$var$crop.width, $0544d5bc706c7688$var$crop.height);\n        renderer.addFrame(imageData, {\n            delay: delay,\n            keepColors: keepColors\n        });\n        (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).setProgress((i + 1) / length);\n    }\n    renderer.end();\n    (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).hide();\n    $0544d5bc706c7688$var$renderCtx.filter = \"none\";\n    var uArray = renderer.getUint8Array();\n    var blob = new Blob([\n        uArray\n    ], {\n        type: \"image/gif\"\n    });\n    var url = URL.createObjectURL(blob);\n    $0544d5bc706c7688$var$saveFile(url, $0544d5bc706c7688$var$currentName + \"_cropped.gif\");\n    setTimeout(function() {\n        URL.revokeObjectURL(url);\n    }, 0);\n    // Reload current frame\n    if (frames.length) $0544d5bc706c7688$var$img = frames[$0544d5bc706c7688$var$inputs.frame.value].bitmap;\n}\nvar $0544d5bc706c7688$var$isInSelection = false;\nvar $0544d5bc706c7688$var$isResizing = false;\nvar $0544d5bc706c7688$var$resizeFromLeft = false;\nvar $0544d5bc706c7688$var$resizeFromTop = false;\nfunction $0544d5bc706c7688$var$checkMousePos(e) {\n    if ((0, $63fd6a7b35566806$export$2e2bcd8739ae039).isEyeDropperActive()) {\n        $0544d5bc706c7688$var$innerBox.element.style.cursor = \"default\";\n        return;\n    }\n    var rect = $0544d5bc706c7688$var$canvasBox.element.getBoundingClientRect();\n    // canvas rect -> selection rect\n    rect.x += rect.width * ($0544d5bc706c7688$var$crop.x / $0544d5bc706c7688$var$img.width);\n    rect.y += rect.height * ($0544d5bc706c7688$var$crop.y / $0544d5bc706c7688$var$img.height);\n    rect.width *= $0544d5bc706c7688$var$crop.width / $0544d5bc706c7688$var$img.width;\n    rect.height *= $0544d5bc706c7688$var$crop.height / $0544d5bc706c7688$var$img.height;\n    var cursor;\n    $0544d5bc706c7688$var$isInSelection = (0, $81b042702cd50b64$export$3ed9b644ed65412a)(e.clientX, e.clientY, rect);\n    if ($0544d5bc706c7688$var$isInSelection && !$0544d5bc706c7688$var$touchPinching) {\n        var cx = rect.x + rect.width / 2;\n        var cy = rect.y + rect.height / 2;\n        $0544d5bc706c7688$var$isResizing = !(0, $81b042702cd50b64$export$489c99c59eb9ceb1)(e.clientX, e.clientY, cx, cy, rect.width / 2);\n        if ($0544d5bc706c7688$var$isResizing) {\n            $0544d5bc706c7688$var$resizeFromLeft = e.clientX < cx;\n            $0544d5bc706c7688$var$resizeFromTop = e.clientY < cy;\n            if ($0544d5bc706c7688$var$resizeFromTop) {\n                if ($0544d5bc706c7688$var$resizeFromLeft) cursor = \"nw-resize\";\n                else cursor = \"ne-resize\";\n            } else if ($0544d5bc706c7688$var$resizeFromLeft) cursor = \"sw-resize\";\n            else cursor = \"se-resize\";\n        } else cursor = \"move\";\n    } else cursor = \"grab\";\n    $0544d5bc706c7688$var$innerBox.element.style.cursor = cursor;\n}\nvar $0544d5bc706c7688$var$mouseDown = false;\nvar $0544d5bc706c7688$var$innerBoxFocused = true;\nfunction $0544d5bc706c7688$var$mouseDownListener(e) {\n    if ($0544d5bc706c7688$var$isHidden() || e.button != 0) return;\n    $0544d5bc706c7688$var$innerBoxFocused = true;\n    if ((0, $63fd6a7b35566806$export$2e2bcd8739ae039).isEyeDropperActive()) {\n        var rect = $0544d5bc706c7688$var$imgCanvas.getBoundingClientRect();\n        var detail = {\n            mode: \"rgb\"\n        };\n        if (!(0, $81b042702cd50b64$export$3ed9b644ed65412a)(e.clientX, e.clientY, rect)) // color of the outer area...lol\n        detail.color = [\n            30,\n            30,\n            30,\n            255\n        ];\n        else {\n            var x = (e.clientX - rect.x) / rect.width * $0544d5bc706c7688$var$imgCanvas.width;\n            var y = (e.clientY - rect.y) / rect.height * $0544d5bc706c7688$var$imgCanvas.height;\n            var imageData = $0544d5bc706c7688$var$imgCtx.getImageData(x, y, 1, 1);\n            detail.color = imageData.data;\n        }\n        $0544d5bc706c7688$var$imgCanvas.dispatchEvent(new CustomEvent(\"eyedrop\", {\n            detail: detail\n        }));\n    }\n    $0544d5bc706c7688$var$checkMousePos(e);\n    if (!$0544d5bc706c7688$var$isInSelection) $0544d5bc706c7688$var$innerBox.element.style.cursor = \"grabbing\";\n    $0544d5bc706c7688$var$mouseDown = true;\n}\nfunction $0544d5bc706c7688$var$unfocusInnerBox() {\n    $0544d5bc706c7688$var$innerBoxFocused = false;\n}\nvar $0544d5bc706c7688$var$prevX = null, $0544d5bc706c7688$var$prevY = null;\nfunction $0544d5bc706c7688$var$mouseMoveListener(e) {\n    if ($0544d5bc706c7688$var$isHidden()) return;\n    if (!$0544d5bc706c7688$var$mouseDown) {\n        $0544d5bc706c7688$var$checkMousePos(e);\n        return;\n    }\n    if ($0544d5bc706c7688$var$prevX != null && $0544d5bc706c7688$var$prevY != null) {\n        var dx = e.clientX - $0544d5bc706c7688$var$prevX;\n        var dy = e.clientY - $0544d5bc706c7688$var$prevY;\n        var ratio = $0544d5bc706c7688$var$inputs.scaleDevicePixel.checked ? 1 : devicePixelRatio;\n        var scale = $0544d5bc706c7688$var$canvasScale / ratio;\n        if (e.shiftKey) {\n            // = 1 pixel\n            dx = scale * Math.sign(dx);\n            dy = scale * Math.sign(dy);\n        }\n        if ($0544d5bc706c7688$var$isInSelection) {\n            dx = Math.round(dx / scale);\n            dy = Math.round(dy / scale);\n            var px = $0544d5bc706c7688$var$crop.x, py = $0544d5bc706c7688$var$crop.y;\n            var xSign = $0544d5bc706c7688$var$resizeFromLeft ? -1 : 1;\n            var ySign = $0544d5bc706c7688$var$resizeFromTop ? -1 : 1;\n            if ($0544d5bc706c7688$var$isResizing) {\n                var width = $0544d5bc706c7688$var$crop.width, height = $0544d5bc706c7688$var$crop.height;\n                if ($0544d5bc706c7688$var$cropShape == $0544d5bc706c7688$var$cropShapes.FREEFORM) {\n                    width += dx * xSign;\n                    height += dy * ySign;\n                    if ($0544d5bc706c7688$var$resizeFromLeft) {\n                        px += dx;\n                        if (px < 0) {\n                            width += px;\n                            px = 0;\n                        }\n                    }\n                    if ($0544d5bc706c7688$var$resizeFromTop) {\n                        py += dy;\n                        if (py < 0) {\n                            height += py;\n                            py = 0;\n                        }\n                    }\n                } else {\n                    var delta = Math.abs(dx) > Math.abs(dy) ? dx * xSign : dy * ySign;\n                    var hDelta = delta * xSign, vDelta = delta * ySign;\n                    let left = px + hDelta, top = py + vDelta, right = left + width + delta, bottom = top + height + delta;\n                    var d = 0;\n                    if (!$0544d5bc706c7688$var$inputs.allowOffscreen.checked) {\n                        if ($0544d5bc706c7688$var$resizeFromLeft && left < 0) d = -left;\n                        if ($0544d5bc706c7688$var$resizeFromTop && top < 0) d = -top;\n                        if (right > $0544d5bc706c7688$var$img.width) d = right - $0544d5bc706c7688$var$img.width - hDelta;\n                        if (bottom > $0544d5bc706c7688$var$img.height) d = bottom - $0544d5bc706c7688$var$img.height - vDelta;\n                    }\n                    if (d) delta = d > delta ? 0 : delta - d;\n                    width = height += delta;\n                    if ($0544d5bc706c7688$var$resizeFromLeft) px += delta * xSign;\n                    if ($0544d5bc706c7688$var$resizeFromTop) py += delta * ySign;\n                }\n                if ($0544d5bc706c7688$var$resizeFromLeft && width < 10) px -= 10 - width;\n                if ($0544d5bc706c7688$var$resizeFromTop && height < 10) py -= 10 - height;\n                // Set the crop positions first so setCropSize could clamp the values correctly\n                $0544d5bc706c7688$var$crop.x = px;\n                $0544d5bc706c7688$var$crop.y = py;\n                $0544d5bc706c7688$var$setCropSize(width, height);\n                $0544d5bc706c7688$var$setCropPosition(px, py);\n            } else {\n                px += dx;\n                py += dy;\n                $0544d5bc706c7688$var$setCropPosition(px, py);\n            }\n            $0544d5bc706c7688$var$redrawEditor();\n            if ($0544d5bc706c7688$var$inputs.showPreview.checked) $0544d5bc706c7688$var$updatePreview();\n        } else $0544d5bc706c7688$var$setCanvasMargins($0544d5bc706c7688$var$canvasX + dx, $0544d5bc706c7688$var$canvasY + dy);\n    }\n    $0544d5bc706c7688$var$prevX = e.clientX;\n    $0544d5bc706c7688$var$prevY = e.clientY;\n}\nfunction $0544d5bc706c7688$var$mouseUpListener(e) {\n    if ($0544d5bc706c7688$var$isHidden() || e.button != 0) return;\n    $0544d5bc706c7688$var$checkMousePos(e);\n    $0544d5bc706c7688$var$mouseDown = false;\n    $0544d5bc706c7688$var$prevX = $0544d5bc706c7688$var$prevY = null;\n    $0544d5bc706c7688$var$isInSelection = false;\n}\nfunction $0544d5bc706c7688$var$wheelListener(e) {\n    if ($0544d5bc706c7688$var$isHidden()) return;\n    var incr = 0.1;\n    if (e.deltaY > 0) incr = -incr;\n    $0544d5bc706c7688$var$setCanvasScale($0544d5bc706c7688$var$canvasScale + incr);\n}\nvar $0544d5bc706c7688$var$touchPinching = false;\nfunction $0544d5bc706c7688$var$touchStartListener(e) {\n    (0, $81b042702cd50b64$export$b9d4e1086abc9c4d).call(this, e);\n    if (e.touches.length >= 2) {\n        $0544d5bc706c7688$var$touchPinching = true;\n        $0544d5bc706c7688$var$prevTouchDist = (0, $81b042702cd50b64$export$98e4a82bd6040cf1)(e.touches[0], e.touches[1]);\n        $0544d5bc706c7688$var$isInSelection = false;\n    }\n}\nvar $0544d5bc706c7688$var$prevTouchDist;\nfunction $0544d5bc706c7688$var$touchMoveListener(e) {\n    if ($0544d5bc706c7688$var$touchPinching) {\n        var dist = (0, $81b042702cd50b64$export$98e4a82bd6040cf1)(e.touches[0], e.touches[1]);\n        var diff = dist - $0544d5bc706c7688$var$prevTouchDist;\n        $0544d5bc706c7688$var$setCanvasScale($0544d5bc706c7688$var$canvasScale + diff / 200);\n        $0544d5bc706c7688$var$prevTouchDist = dist;\n    }\n}\nfunction $0544d5bc706c7688$var$touchEndListener(e) {\n    if ($0544d5bc706c7688$var$touchPinching && e.touches.length < 2) $0544d5bc706c7688$var$touchPinching = false;\n}\nfunction $0544d5bc706c7688$var$keyDownListener(e) {\n    if (!$0544d5bc706c7688$var$innerBoxFocused) return;\n    var code;\n    if (e.code) code = e.code;\n    else switch(e.keyCode){\n        case 38:\n            code = \"ArrowUp\";\n            break;\n        case 40:\n            code = \"ArrowDown\";\n            break;\n        case 37:\n            code = \"ArrowLeft\";\n            break;\n        case 39:\n            code = \"ArrowRight\";\n            break;\n        default:\n            return;\n    }\n    var incr = e.shiftKey ? 2 : 1;\n    switch(code){\n        case \"ArrowUp\":\n            incr = -incr;\n        /* fallthrough */ case \"ArrowDown\":\n            e.ctrlKey ? $0544d5bc706c7688$var$setCropSize($0544d5bc706c7688$var$crop.width, $0544d5bc706c7688$var$crop.height + incr, incr > 0) : $0544d5bc706c7688$var$setCropPosition($0544d5bc706c7688$var$crop.x, $0544d5bc706c7688$var$crop.y + incr);\n            break;\n        case \"ArrowLeft\":\n            incr = -incr;\n        /* fallthrough */ case \"ArrowRight\":\n            e.ctrlKey ? $0544d5bc706c7688$var$setCropSize($0544d5bc706c7688$var$crop.width + incr, $0544d5bc706c7688$var$crop.height, incr > 0) : $0544d5bc706c7688$var$setCropPosition($0544d5bc706c7688$var$crop.x + incr, $0544d5bc706c7688$var$crop.y);\n            break;\n        default:\n            return;\n    }\n    $0544d5bc706c7688$var$redrawEditor();\n    if ($0544d5bc706c7688$var$inputs.showPreview.checked) $0544d5bc706c7688$var$updatePreview();\n}\nvar $0544d5bc706c7688$var$editor = {\n    init: $0544d5bc706c7688$var$init,\n    open: $0544d5bc706c7688$var$open,\n    show: $0544d5bc706c7688$var$show,\n    hide: $0544d5bc706c7688$var$hide\n};\nvar $0544d5bc706c7688$export$2e2bcd8739ae039 = $0544d5bc706c7688$var$editor;\n\n\n\n\n\n\nvar $8fbe71eb0c76eaad$var$dialog;\nvar $c33aa7f6b2b897c2$exports = {};\n\n$c33aa7f6b2b897c2$exports = (parcelRequire(\"l35ZM\")).getBundleURL(\"6gEBg\") + \"banner.2c50771c.svg\";\n\n\nfunction $8fbe71eb0c76eaad$var$init(container) {\n    $8fbe71eb0c76eaad$var$dialog = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Dialog((0, $313f6ce5359206e9$export$71511d61b312f219)(\"About\"));\n    $8fbe71eb0c76eaad$var$dialog.element.style.textAlign = \"center\";\n    container.appendChild($8fbe71eb0c76eaad$var$dialog);\n    var banner = document.createElement(\"img\");\n    banner.src = new URL($c33aa7f6b2b897c2$exports);\n    banner.alt = \"Banner\";\n    banner.width = 740;\n    banner.height = 128;\n    banner.style.width = \"auto\";\n    banner.style.height = \"3rem\";\n    banner.style.marginBottom = \"0.5rem\";\n    banner.draggable = true;\n    $8fbe71eb0c76eaad$var$dialog.body.appendChild(banner);\n    $8fbe71eb0c76eaad$var$dialog.body.appendChild(document.createElement(\"br\"));\n    var text1 = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Simple and accurate avatar cropping tool.\\n\"));\n    $8fbe71eb0c76eaad$var$dialog.appendChild(text1);\n    var text2 = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Source code: \"));\n    $8fbe71eb0c76eaad$var$dialog.appendChild(text2);\n    var srcLink = document.createElement(\"a\");\n    srcLink.href = \"https://github.com/LeadRDRK/AvatarCropper\";\n    srcLink.innerText = srcLink.href + \"\\n\";\n    srcLink.target = \"_blank\";\n    srcLink.draggable = false;\n    $8fbe71eb0c76eaad$var$dialog.body.appendChild(srcLink);\n    $8fbe71eb0c76eaad$var$dialog.body.appendChild(document.createElement(\"hr\"));\n    var text3 = document.createElement(\"b\");\n    text3.innerText = (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Translators\\n\");\n    $8fbe71eb0c76eaad$var$dialog.body.appendChild(text3);\n    var langs = (0, $313f6ce5359206e9$export$2e2bcd8739ae039).getLanguages();\n    for(const i in langs){\n        var info = langs[i];\n        var entry = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label(info.name + \" - \" + info.author + \"\\n\");\n        $8fbe71eb0c76eaad$var$dialog.appendChild(entry);\n    }\n    var okBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"OK\"));\n    $8fbe71eb0c76eaad$var$dialog.appendButton(okBtn);\n    okBtn.addEventListener(\"click\", $8fbe71eb0c76eaad$var$hide);\n    var guyUrl = \"https://leadrdrk.com/static/generic.png\";\n    banner.addEventListener(\"dragstart\", function(e) {\n        e.dataTransfer.setData(\"text/pain\", guyUrl);\n    });\n    banner.addEventListener(\"dragend\", function(e) {\n        (0, $cff5b25a521f554e$export$2e2bcd8739ae039).show(\"it's him! (drawn by @ReikoRobo)\");\n        $8fbe71eb0c76eaad$var$hide();\n    });\n}\nfunction $8fbe71eb0c76eaad$var$show() {\n    $8fbe71eb0c76eaad$var$dialog.show();\n}\nfunction $8fbe71eb0c76eaad$var$hide() {\n    $8fbe71eb0c76eaad$var$dialog.hide();\n}\nvar $8fbe71eb0c76eaad$var$aboutDialog = {\n    init: $8fbe71eb0c76eaad$var$init,\n    show: $8fbe71eb0c76eaad$var$show,\n    hide: $8fbe71eb0c76eaad$var$hide\n};\nvar $8fbe71eb0c76eaad$export$2e2bcd8739ae039 = $8fbe71eb0c76eaad$var$aboutDialog;\n\n\n\n\nvar $5e2a4df4dcef8b9d$var$dialog;\nfunction $5e2a4df4dcef8b9d$var$init(container) {\n    $5e2a4df4dcef8b9d$var$dialog = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Dialog((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Privacy\"));\n    container.appendChild($5e2a4df4dcef8b9d$var$dialog);\n    $5e2a4df4dcef8b9d$var$dialog.body.innerText = (0, $313f6ce5359206e9$export$71511d61b312f219)(\"This app runs entirely in your browser! No image or data is ever uploaded to any external server.\");\n    var okBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"OK\"));\n    $5e2a4df4dcef8b9d$var$dialog.appendButton(okBtn);\n    okBtn.addEventListener(\"click\", $5e2a4df4dcef8b9d$var$hide);\n}\nfunction $5e2a4df4dcef8b9d$var$show() {\n    $5e2a4df4dcef8b9d$var$dialog.show();\n}\nfunction $5e2a4df4dcef8b9d$var$hide() {\n    $5e2a4df4dcef8b9d$var$dialog.hide();\n}\nvar $5e2a4df4dcef8b9d$var$privacyDialog = {\n    init: $5e2a4df4dcef8b9d$var$init,\n    show: $5e2a4df4dcef8b9d$var$show,\n    hide: $5e2a4df4dcef8b9d$var$hide\n};\nvar $5e2a4df4dcef8b9d$export$2e2bcd8739ae039 = $5e2a4df4dcef8b9d$var$privacyDialog;\n\n\n\n\nvar $fac49d8f1486f244$var$container, $fac49d8f1486f244$var$box, $fac49d8f1486f244$var$urlDialog;\n\nfunction $fac49d8f1486f244$var$init(_container, callback) {\n    $fac49d8f1486f244$var$container = _container;\n    (0, $8fbe71eb0c76eaad$export$2e2bcd8739ae039).init($fac49d8f1486f244$var$container);\n    (0, $5e2a4df4dcef8b9d$export$2e2bcd8739ae039).init($fac49d8f1486f244$var$container);\n    $fac49d8f1486f244$var$box = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox;\n    $fac49d8f1486f244$var$box.element.id = \"welcomeScreen\";\n    $fac49d8f1486f244$var$box.justifyContent = \"center\";\n    $fac49d8f1486f244$var$box.alignItems = \"center\";\n    var titleBox = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox(\"column\");\n    titleBox.element.id = \"titleBox\";\n    titleBox.gap = \"0.25rem\";\n    var title = document.createElement(\"img\");\n    title.src = new URL($c33aa7f6b2b897c2$exports);\n    title.width = 740;\n    title.height = 128;\n    title.id = \"title\";\n    title.alt = \"Banner\";\n    title.draggable = false;\n    title.onload = callback;\n    titleBox.element.appendChild(title);\n    var versionLabel = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label(\"v2.1.3 - \");\n    versionLabel.element.id = \"versionLabel\";\n    var aboutBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"About\"), \"link\");\n    versionLabel.appendChild(aboutBtn);\n    versionLabel.element.appendChild(document.createTextNode(\" | \"));\n    var privacyBtn = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Privacy\"), \"link\");\n    versionLabel.appendChild(privacyBtn);\n    versionLabel.element.appendChild(document.createTextNode(\" | \"));\n    var changelogLink = document.createElement(\"a\");\n    changelogLink.innerText = (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Changelog\");\n    changelogLink.href = \"https://github.com/LeadRDRK/AvatarCropper/releases\";\n    changelogLink.draggable = false;\n    changelogLink.target = \"_blank\";\n    versionLabel.element.appendChild(changelogLink);\n    titleBox.appendChild(versionLabel);\n    var langSelector = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Selector;\n    langSelector.element.id = \"langSelector\";\n    var langs = (0, $313f6ce5359206e9$export$2e2bcd8739ae039).getLanguages();\n    for(const i in langs)langSelector.addOption(langs[i].name, i);\n    langSelector.value = localStorage.getItem(\"lang\");\n    titleBox.appendChild(langSelector);\n    var buttonsBox = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox(\"column\");\n    buttonsBox.element.id = \"openButtonsBox\";\n    //buttonsBox.flexBasis = \"310px\";\n    buttonsBox.gap = \"0.5rem\";\n    var openButton = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Open File...\"));\n    buttonsBox.appendChild(openButton);\n    var urlButton = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Button((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Paste Image...\"), \"secondary\");\n    buttonsBox.appendChild(urlButton);\n    var hint = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label((0, $313f6ce5359206e9$export$71511d61b312f219)(\"You can also drag and drop an image here.\"));\n    hint.element.style.textAlign = \"center\";\n    hint.element.style.fontStyle = \"italic\";\n    buttonsBox.appendChild(hint);\n    $fac49d8f1486f244$var$box.appendChild(titleBox);\n    $fac49d8f1486f244$var$box.appendChild(buttonsBox);\n    openButton.addEventListener(\"click\", $fac49d8f1486f244$var$openFilePicker);\n    $fac49d8f1486f244$var$initURLDialog();\n    urlButton.addEventListener(\"click\", $fac49d8f1486f244$var$urlDialog.show.bind($fac49d8f1486f244$var$urlDialog));\n    aboutBtn.addEventListener(\"click\", (0, $8fbe71eb0c76eaad$export$2e2bcd8739ae039).show.bind((0, $8fbe71eb0c76eaad$export$2e2bcd8739ae039)));\n    privacyBtn.addEventListener(\"click\", (0, $5e2a4df4dcef8b9d$export$2e2bcd8739ae039).show.bind((0, $5e2a4df4dcef8b9d$export$2e2bcd8739ae039)));\n    langSelector.addEventListener(\"change\", function() {\n        localStorage.setItem(\"lang\", this.value);\n        // Reinitialize the app\n        (0, $bd5af8eefd2d0f75$export$2e2bcd8739ae039)();\n    });\n    $fac49d8f1486f244$var$welcomeScreen.shown = true;\n}\nfunction $fac49d8f1486f244$var$initURLDialog() {\n    $fac49d8f1486f244$var$urlDialog = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Dialog((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Paste Image\"));\n    var label = (0, $313f6ce5359206e9$export$71511d61b312f219)(\"Paste your image into the input box.\");\n    var hint = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Label(label);\n    hint.element.style.marginBottom = \"0.5rem\";\n    $fac49d8f1486f244$var$urlDialog.appendChild(hint);\n    var input = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Input(\"text\");\n    input.element.id = \"urlInput\";\n    input.element.setAttribute(\"aria-label\", label);\n    $fac49d8f1486f244$var$urlDialog.appendChild(input);\n    $fac49d8f1486f244$var$urlDialog.appendHideButton((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Cancel\"));\n    input.addEventListener(\"paste\", function(e) {\n        var data = e.clipboardData || e.originalEvent.clipboardData;\n        if (!data) return;\n        var items = data.items;\n        for(let i = 0; i < items.length; ++i){\n            let item = items[i];\n            if (item.kind == \"file\") {\n                let file = item.getAsFile();\n                if (file.type.startsWith(\"image/\")) {\n                    (0, $0544d5bc706c7688$export$2e2bcd8739ae039).open(file, $fac49d8f1486f244$var$hide);\n                    break;\n                }\n            }\n        }\n    });\n    input.addEventListener(\"input\", function() {\n        input.value = \"\";\n    });\n    $fac49d8f1486f244$var$container.appendChild($fac49d8f1486f244$var$urlDialog);\n}\nfunction $fac49d8f1486f244$var$show() {\n    setTimeout(function() {\n        $fac49d8f1486f244$var$box.element.classList.remove(\"hide\");\n    }, 0);\n    $fac49d8f1486f244$var$container.appendChild($fac49d8f1486f244$var$box);\n    $fac49d8f1486f244$var$container.appendChild($fac49d8f1486f244$var$urlDialog);\n    $fac49d8f1486f244$var$welcomeScreen.shown = true;\n}\nfunction $fac49d8f1486f244$var$hide() {\n    $fac49d8f1486f244$var$box.element.classList.add(\"hide\");\n    $fac49d8f1486f244$var$urlDialog.hide();\n    $fac49d8f1486f244$var$welcomeScreen.shown = false;\n    $fac49d8f1486f244$var$container.removeChildAfterTransition($fac49d8f1486f244$var$box, function() {\n        if ($fac49d8f1486f244$var$container.contains($fac49d8f1486f244$var$urlDialog)) $fac49d8f1486f244$var$container.removeChild($fac49d8f1486f244$var$urlDialog);\n    });\n}\nvar $fac49d8f1486f244$var$inputEl = document.createElement(\"input\");\n$fac49d8f1486f244$var$inputEl.type = \"file\";\n$fac49d8f1486f244$var$inputEl.accept = \"image/*\";\nfunction $fac49d8f1486f244$var$openFilePicker() {\n    $fac49d8f1486f244$var$inputEl.value = null;\n    $fac49d8f1486f244$var$inputEl.click();\n}\n$fac49d8f1486f244$var$inputEl.addEventListener(\"change\", function(e) {\n    var fileList = this.files;\n    for(let i = 0; i < fileList.length; ++i){\n        let file = fileList[i];\n        if (file.type.startsWith(\"image/\")) {\n            (0, $0544d5bc706c7688$export$2e2bcd8739ae039).open(file, $fac49d8f1486f244$var$hide);\n            return;\n        }\n    }\n    (0, $cff5b25a521f554e$export$2e2bcd8739ae039).show((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Invalid image file.\"));\n});\nvar $fac49d8f1486f244$var$welcomeScreen = {\n    shown: false,\n    init: $fac49d8f1486f244$var$init,\n    show: $fac49d8f1486f244$var$show,\n    hide: $fac49d8f1486f244$var$hide\n};\nvar $fac49d8f1486f244$export$2e2bcd8739ae039 = $fac49d8f1486f244$var$welcomeScreen;\n\n\n\n\n\nfunction $c96730ec68fc0f7f$var$dispatchImageDrop(detail, element) {\n    var idEvent = new CustomEvent(\"imagedrop\", {\n        detail: detail\n    });\n    element.dispatchEvent(idEvent);\n}\nfunction $c96730ec68fc0f7f$var$dispatchFile(file, element) {\n    if (file.type.startsWith(\"image/\")) {\n        $c96730ec68fc0f7f$var$dispatchImageDrop(file, element);\n        return true;\n    }\n    return false;\n}\nvar $c96730ec68fc0f7f$var$lolMessages = [\n    \"Hey, you should drop your file into the window.\",\n    \"Just drop it...\",\n    \"I'm getting rather impatient.\",\n    \"What are you doing!?\",\n    \"Drop it now!\",\n    \"Stop teasing me!\",\n    \"I beg you!\",\n    \"Please, just give me your file!!!\"\n];\nfunction $c96730ec68fc0f7f$var$DndHandler(container, element) {\n    this.element = element;\n    var overlay = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Flexbox;\n    overlay.element.id = \"dndOverlay\";\n    var lol = 0;\n    var counter = 0;\n    element.addEventListener(\"dragenter\", function() {\n        if (counter == 0) {\n            container.appendChild(overlay);\n            if (++lol >= 10) {\n                var msg = $c96730ec68fc0f7f$var$lolMessages[Math.min(lol - 10, $c96730ec68fc0f7f$var$lolMessages.length - 1)];\n                (0, $cff5b25a521f554e$export$2e2bcd8739ae039).show(msg);\n            }\n        }\n        ++counter;\n    });\n    element.addEventListener(\"dragleave\", function() {\n        if (--counter == 0) container.removeChild(overlay);\n    });\n    element.addEventListener(\"drop\", function(e) {\n        e.preventDefault();\n        if (lol >= 10 + $c96730ec68fc0f7f$var$lolMessages.length - 1) (0, $cff5b25a521f554e$export$2e2bcd8739ae039).show(\"Thank you.\");\n        lol = 0;\n        container.removeChild(overlay);\n        counter = 0;\n        var value = e.dataTransfer.getData(\"text/pain\");\n        if (value) {\n            $c96730ec68fc0f7f$var$dispatchImageDrop(value, element);\n            return;\n        }\n        if (e.dataTransfer.items) for (const item of e.dataTransfer.items){\n            if (item.kind != \"file\") continue;\n            const file = item.getAsFile();\n            if ($c96730ec68fc0f7f$var$dispatchFile(file, element)) return;\n        }\n        else for (const file of e.dataTransfer.files){\n            if ($c96730ec68fc0f7f$var$dispatchFile(file, element)) return;\n        }\n        (0, $cff5b25a521f554e$export$2e2bcd8739ae039).show((0, $313f6ce5359206e9$export$71511d61b312f219)(\"Invalid image file.\"));\n    });\n    element.addEventListener(\"dragover\", function(e) {\n        e.preventDefault();\n    });\n}\n$c96730ec68fc0f7f$var$DndHandler.prototype.addListener = function(listener) {\n    this.element.addEventListener(\"imagedrop\", listener);\n};\nvar $c96730ec68fc0f7f$export$2e2bcd8739ae039 = $c96730ec68fc0f7f$var$DndHandler;\n\n\n\n\n\n\n\nvar $e8ba750d6580a72a$exports = {};\n\n$e8ba750d6580a72a$exports = (parcelRequire(\"l35ZM\")).getBundleURL(\"6gEBg\") + \"sw.js\";\n\n\nfunction $bd5af8eefd2d0f75$var$registerServiceWorker() {\n    if (\"serviceWorker\" in navigator && true) navigator.serviceWorker.register($e8ba750d6580a72a$exports);\n}\nfunction $bd5af8eefd2d0f75$var$getLang() {\n    var lang = localStorage.getItem(\"lang\");\n    if (lang == null) {\n        var langs = (0, $313f6ce5359206e9$export$2e2bcd8739ae039).getLanguages();\n        var preferredLang = navigator.language.toLowerCase();\n        for(const i in langs)if (i.indexOf(preferredLang) == 0) {\n            lang = i;\n            break;\n        }\n        if (lang == null) lang = \"en-us\";\n        localStorage.setItem(\"lang\", lang);\n    }\n    return lang;\n}\nasync function $bd5af8eefd2d0f75$var$appInit() {\n    $bd5af8eefd2d0f75$var$registerServiceWorker();\n    document.body.innerHTML = \"\";\n    var container = new (0, $21104bc65c54f4d6$export$2e2bcd8739ae039).Container;\n    container.element.style.backgroundColor = \"#1e1e1e\";\n    container.createShadow();\n    (0, $cff5b25a521f554e$export$2e2bcd8739ae039).init(container);\n    try {\n        await (0, $313f6ce5359206e9$export$2e2bcd8739ae039).init();\n        var lang = $bd5af8eefd2d0f75$var$getLang();\n        try {\n            await (0, $313f6ce5359206e9$export$2e2bcd8739ae039).loadLanguage(lang);\n        } catch (e) {\n            (0, $cff5b25a521f554e$export$2e2bcd8739ae039).show(\"Failed to load translations for \" + lang);\n        }\n    } catch (e) {\n        (0, $cff5b25a521f554e$export$2e2bcd8739ae039).show(\"Failed to initialize i18n.\");\n    }\n    (0, $0544d5bc706c7688$export$2e2bcd8739ae039).init(container);\n    (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).init(container);\n    (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).setProgress(-1);\n    (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).show();\n    (0, $fac49d8f1486f244$export$2e2bcd8739ae039).init(container, function() {\n        (0, $fac49d8f1486f244$export$2e2bcd8739ae039).show();\n        (0, $4244c5b4a8c0a9c7$export$2e2bcd8739ae039).hide();\n    });\n    var dnd = new (0, $c96730ec68fc0f7f$export$2e2bcd8739ae039)(container, document.body);\n    dnd.addListener((e)=>{\n        (0, $0544d5bc706c7688$export$2e2bcd8739ae039).open(e.detail, function() {\n            if ((0, $fac49d8f1486f244$export$2e2bcd8739ae039).shown) (0, $fac49d8f1486f244$export$2e2bcd8739ae039).hide();\n        });\n    });\n    if (\"ontouchmove\" in document) {\n        document.addEventListener(\"touchmove\", (0, $81b042702cd50b64$export$b9d4e1086abc9c4d), {\n            passive: true\n        });\n        document.addEventListener(\"touchend\", (0, $81b042702cd50b64$export$b9d4e1086abc9c4d), {\n            passive: true\n        });\n    }\n    window.scrollTo(0, 1);\n}\n$bd5af8eefd2d0f75$var$appInit();\nvar $bd5af8eefd2d0f75$export$2e2bcd8739ae039 = $bd5af8eefd2d0f75$var$appInit;\n\n\n//# sourceMappingURL=index.1836cb60.js.map\n","import pbfe from \"./pbfe.js\"\nimport welcomeScreen from \"./welcome-screen.js\";\nimport DndHandler from \"./dnd.js\";\nimport loadingDialog from \"./loading-dialog.js\";\nimport editor from \"./editor.js\";\nimport toast from \"./toast.js\";\nimport i18n from \"./i18n.js\";\nimport { touchToMouseEvent } from \"./utils.js\";\n\nfunction registerServiceWorker() {\n    if (\"serviceWorker\" in navigator && process.env.NODE_ENV == \"production\") {\n        navigator.serviceWorker.register(new URL(\"sw.js\", import.meta.url));\n    }\n}\n\nfunction getLang() {\n    var lang = localStorage.getItem(\"lang\");\n    if (lang == null) {\n        var langs = i18n.getLanguages();\n        var preferredLang = navigator.language.toLowerCase();\n        for (const i in langs) {\n            if (i.indexOf(preferredLang) == 0) {\n                lang = i;\n                break;\n            }\n        }\n        if (lang == null) lang = \"en-us\";\n        localStorage.setItem(\"lang\", lang);\n    }\n    return lang;\n}\n\nasync function appInit() {\n    registerServiceWorker();\n    document.body.innerHTML = \"\";\n\n    var container = new pbfe.Container;\n    container.element.style.backgroundColor = \"#1e1e1e\";\n    container.createShadow();\n\n    toast.init(container);\n\n    try {\n        await i18n.init();\n        var lang = getLang();\n        try {\n            await i18n.loadLanguage(lang);\n        }\n        catch {\n            toast.show(\"Failed to load translations for \" + lang);\n        }\n    }\n    catch {\n        toast.show(\"Failed to initialize i18n.\");\n    }\n\n    editor.init(container);\n    loadingDialog.init(container);\n\n    loadingDialog.setProgress(-1);\n    loadingDialog.show();\n\n    welcomeScreen.init(container, function() {\n        welcomeScreen.show();\n        loadingDialog.hide();\n    });\n\n    var dnd = new DndHandler(container, document.body);\n    dnd.addListener(e => {\n        editor.open(e.detail, function() {\n            if (welcomeScreen.shown)\n                welcomeScreen.hide();\n        });\n    });\n\n    if (\"ontouchmove\" in document) {\n        document.addEventListener(\"touchmove\", touchToMouseEvent, { passive: true });\n        document.addEventListener(\"touchend\", touchToMouseEvent, { passive: true });\n    }\n\n    window.scrollTo(0, 1);\n}\nappInit();\n\nexport default appInit;","function inherit(cls, className) {\n    var proto = Object.create(cls.prototype);\n    proto.className = className;\n    return proto;\n}\n\nfunction addElementProperty(cls, name) {\n    Object.defineProperty(cls.prototype, name, {\n        get: function() {\n            return this.element[name];\n        },\n        set: function(value) {\n            this.element[name] = value;\n        }\n    })\n}\n\nfunction addStyleProperty(cls, name) {\n    Object.defineProperty(cls.prototype, name, {\n        get: function() {\n            return this.element.style[name];\n        },\n        set: function(text) {\n            this.element.style[name] = text;\n        }\n    })\n}\n\nfunction Widget() {\n    if (!this.element) this.element = document.createElement(\"div\");\n    if (!this.body) this.body = this.element;\n    this.element.classList.add(\"pbfe\" + (this.className ? this.className : \"Widget\"));\n}\n\nWidget.prototype.appendChild = function(widget) {\n    this.body.appendChild(widget.element);\n}\n\nWidget.prototype.appendChildren = function(array) {\n    for (var i = 0; i < array.length; ++i) {\n        this.appendChild(array[i]);\n    }\n}\n\nWidget.prototype.removeChild = function(widget) {\n    this.body.removeChild(widget.element);\n}\n\nWidget.prototype.removeChildAfterTransition = function(widget, callback) {\n    var body = this.body;\n    this.element.addEventListener(\"transitionend\", function listener() {\n        body.removeChild(widget.element);\n        if (callback) callback();\n        this.removeEventListener(\"transitionend\", listener);\n    });\n}\n\nWidget.prototype.addEventListener = function(type, listener) {\n    this.element.addEventListener.apply(this.element, arguments);\n}\n\nWidget.prototype.contains = function(widget) {\n    return widget.element.parentNode == this.element;\n}\n\naddStyleProperty(Widget, \"width\");\naddStyleProperty(Widget, \"height\");\naddStyleProperty(Widget, \"order\");\naddStyleProperty(Widget, \"flexGrow\");\naddStyleProperty(Widget, \"flexShrink\");\naddStyleProperty(Widget, \"flexBasis\");\naddStyleProperty(Widget, \"alignSelf\");\n\nfunction Container(element) {\n    if (!element) {\n        element = document.createElement(\"div\");\n        document.body.appendChild(element);\n    }\n\n    this.element = element;\n    Widget.call(this);\n}\n\nContainer.prototype = inherit(Widget, \"Container\");\n\nContainer.prototype.createShadow = function() {\n    if (document.getElementById(\"pbfeShadow\")) return;\n    var div = document.createElement(\"div\");\n    div.style.cssText = \"position:fixed;top:0;left:0;width:100%;height:100%;z-index:100;\";\n    div.id = \"pbfeShadow\";\n    this.element.appendChild(div);\n}\n\nContainer.prototype.showToast = function(text, timeout, waitHideTransition) {\n    var toast = new Toast(text);\n    this.appendChild(toast);\n    // Force transition to play, if any.\n    setTimeout(toast.show.bind(toast), 0);\n\n    var self = this;\n    setTimeout(function() {\n        if (waitHideTransition) {\n            toast.element.addEventListener(\"transitionend\", function listener() {\n                self.removeChild(toast);\n                toast.element.removeEventListener(\"transitionend\", listener);\n            });\n            toast.hide();\n        }\n        else this.removeChild(toast);\n    }, timeout);\n}\n\nfunction Flexbox(direction) {\n    var element = document.createElement(\"div\");\n    element.style.display = \"flex\";\n    element.style.flexDirection = direction;\n    this.element = element;\n    Widget.call(this);\n}\n\nFlexbox.prototype = inherit(Widget, \"Flexbox\");\naddStyleProperty(Flexbox, \"flexDirection\");\naddStyleProperty(Flexbox, \"justifyContent\");\naddStyleProperty(Flexbox, \"alignItems\");\naddStyleProperty(Flexbox, \"alignContent\");\naddStyleProperty(Flexbox, \"gap\");\naddStyleProperty(Flexbox, \"rowGap\");\naddStyleProperty(Flexbox, \"columnGap\");\n\nfunction Floatbox() {\n    var element = document.createElement(\"div\");\n    element.style.position = \"fixed\";\n    this.element = element;\n    Widget.call(this);\n}\n\nFloatbox.prototype = inherit(Widget, \"Floatbox\");\naddStyleProperty(Floatbox, \"zIndex\");\naddStyleProperty(Floatbox, \"top\");\naddStyleProperty(Floatbox, \"left\");\naddStyleProperty(Floatbox, \"bottom\");\naddStyleProperty(Floatbox, \"right\");\n\nfunction Label(text) {\n    var element = document.createElement(\"span\");\n    element.innerText = text;\n    this.element = element;\n    Widget.call(this);\n}\n\nLabel.prototype = inherit(Widget, \"Label\");\n\nObject.defineProperty(Label.prototype, \"text\", {\n    get: function() {\n        return this.element.innerText;\n    },\n    set: function(text) {\n        this.element.innerText = text;\n    }\n})\n\nfunction Button(text, type) {\n    var element = document.createElement(\"button\");\n    if (text) element.innerText = text;\n    if (type) element.classList.add(type);\n    this.element = element;\n    Widget.call(this);\n}\n\nButton.prototype = inherit(Label, \"Button\");\n\nfunction Dialog(titleText) {\n    var element = document.createElement(\"div\");\n    element.style.zIndex = 101;\n\n    var title = document.createElement(\"div\");\n    title.classList.add(\"pbfeDialogTitle\");\n    title.innerText = titleText;\n    element.appendChild(title);\n\n    var body = document.createElement(\"div\");\n    body.classList.add(\"pbfeDialogBody\");\n    element.appendChild(body);\n\n    var buttons = document.createElement(\"div\");\n    buttons.classList.add(\"pbfeDialogButtons\");\n    buttons.style.display = \"flex\";\n    element.appendChild(buttons);\n\n    this.element = element;\n    this.title = title;\n    this.body = body;\n    this.buttons = buttons;\n    Widget.call(this);\n}\n\nDialog.prototype = inherit(Widget, \"Dialog\");\n\nDialog.prototype.show = function() {\n    this.element.classList.add(\"show\");\n    var shadow = document.getElementById(\"pbfeShadow\");\n    if (shadow) shadow.classList.add(\"show\");\n}\n\nDialog.prototype.hide = function() {\n    if (this.element.classList.contains(\"show\")) {\n        this.element.classList.remove(\"show\");\n        var shadow = document.getElementById(\"pbfeShadow\");\n        if (shadow) shadow.classList.remove(\"show\");\n    }\n}\n\nDialog.prototype.appendButton = function(widget) {\n    this.buttons.appendChild(widget.element);\n}\n\nDialog.prototype.removeButton = function(widget) {\n    this.buttons.removeChild(widget.element);\n}\n\nDialog.prototype.appendHideButton = function(btnText, type) {\n    var btn = new Button(btnText, type);\n    btn.addEventListener(\"click\", this.hide.bind(this));\n    this.appendButton(btn);\n}\n\nObject.defineProperty(Dialog.prototype, \"titleText\", {\n    get: function() {\n        return this._title.innerText;\n    },\n    set: function(text) {\n        this._title.innerText = text;\n    }\n})\n\nfunction Input(type) {\n    function createCheckbox() {\n        var element = document.createElement(\"button\");\n        element.classList.add(\"pbfeCheckbox\");\n\n        var inner = document.createElement(\"div\");\n        inner.classList.add(\"pbfeCheckboxInner\");\n        element.appendChild(inner);\n\n        Object.defineProperty(element, \"checked\", {\n            get: function() {\n                return this._checked;\n            },\n            set: function(value) {\n                if (this._checked == value) return;\n                this._checked = value;\n                if (value) element.classList.add(\"checked\");\n                else element.classList.remove(\"checked\");\n\n                element.dispatchEvent(new Event(\"change\"));\n            }\n        });\n        element._checked = false;\n\n        element.addEventListener(\"click\", function() {\n            this.checked = !this.checked;\n        });\n\n        return element;\n    }\n\n    var element;\n    switch (type) {\n        case \"checkbox\":\n            element = createCheckbox();\n            break;\n\n        default:\n            // no replacement, fallback to input element\n            element = document.createElement(\"input\");\n            element.type = type;\n            break;\n\n    }\n    this.element = element;\n    this.type = type;\n    Widget.call(this);\n}\n\nInput.prototype = inherit(Widget, \"Input\");\n\naddElementProperty(Input, \"value\");\naddElementProperty(Input, \"placeholder\");\naddElementProperty(Input, \"min\");\naddElementProperty(Input, \"max\");\naddElementProperty(Input, \"step\");\n\nfunction ProgressBar() {\n    var element = document.createElement(\"div\");\n    var inner = document.createElement(\"div\");\n    inner.classList.add(\"pbfeProgressBarInner\");\n    inner.style.width = \"0%\";\n    inner.style.height = \"100%\";\n    element.appendChild(inner);\n\n    this.element = element;\n    this.inner = inner;\n    Widget.call(this);\n}\n\nProgressBar.prototype = inherit(Widget, \"ProgressBar\");\n\nProgressBar.prototype.setProgress = function(value) {\n    var inner = this.inner;\n    if (typeof value == \"number\") {\n        if (value < 0) {\n            inner.style.removeProperty(\"width\");\n            inner.classList.add(\"indeterminate\");\n            return;\n        }\n        else\n            value = (value * 100) + \"%\";\n    }\n\n    if (inner.classList.contains(\"indeterminate\"))\n        inner.classList.remove(\"indeterminate\");\n\n    inner.style.width = value;\n}\n\nfunction Canvas() {\n    this.element = document.createElement(\"canvas\");\n    Widget.call(this);\n}\n\nCanvas.prototype = inherit(Widget, \"Canvas\");\n\nCanvas.prototype.getContext = function() {\n    return this.element.getContext.apply(this.element, arguments);\n}\n\nfunction Toast(text) {\n    var element = document.createElement(\"div\");\n    element.style.zIndex = 102;\n    element.innerText = text;\n    this.element = element;\n    Widget.call(this);\n}\n\nToast.prototype = inherit(Label, \"Toast\");\n\nToast.prototype.show = function() {\n    this.element.classList.add(\"show\");\n}\n\nToast.prototype.hide = function() {\n    this.element.classList.remove(\"show\");\n}\n\nfunction Selector() {\n    var element = document.createElement(\"select\");\n    this.element = element;\n    Widget.call(this);\n}\n\nSelector.prototype = inherit(Widget, \"Selector\");\n\nSelector.prototype.addOption = function(text, value, isPlaceholder) {\n    var option = document.createElement(\"option\");\n    option.text = text;\n    if (value) option.value = value;\n    if (isPlaceholder) {\n        option.hidden = option.disabled = option.selected = true;\n    }\n    this.element.appendChild(option);\n}\n\naddElementProperty(Selector, \"value\");\n\nconst pbfe = {\n    Container,\n    Widget,\n    Flexbox,\n    Floatbox,\n    Label,\n    Button,\n    Dialog,\n    Input,\n    ProgressBar,\n    Canvas,\n    Toast,\n    Selector\n}\n\nexport default pbfe;","import pbfe from \"./pbfe.js\"\nimport editor from \"./editor.js\";\nimport toast from \"./toast.js\";\nimport aboutDialog from \"./about-dialog.js\";\nimport privacyDialog from \"./privacy-dialog.js\";\nimport i18n, { _ } from \"./i18n.js\";\nimport appInit from \"./index.js\";\n\nvar container, box, urlDialog;\n\nfunction init(_container, callback) {\n    container = _container;\n    aboutDialog.init(container);\n    privacyDialog.init(container);\n\n    box = new pbfe.Flexbox;\n    box.element.id = \"welcomeScreen\";\n    box.justifyContent = \"center\";\n    box.alignItems = \"center\";\n\n    var titleBox = new pbfe.Flexbox(\"column\");\n    titleBox.element.id = \"titleBox\";\n    titleBox.gap = \"0.25rem\";\n    \n    var title = document.createElement(\"img\");\n    title.src = new URL('./banner.svg', import.meta.url);\n    title.width = 740;\n    title.height = 128;\n    title.id = \"title\";\n    title.alt = \"Banner\";\n    title.draggable = false;\n    title.onload = callback;\n    titleBox.element.appendChild(title);\n\n    var versionLabel = new pbfe.Label(\"v\" + process.env.npm_package_version + \" - \");\n    versionLabel.element.id = \"versionLabel\";\n\n    var aboutBtn = new pbfe.Button(_(\"About\"), \"link\");\n    versionLabel.appendChild(aboutBtn);\n\n    versionLabel.element.appendChild(document.createTextNode(\" | \"));\n\n    var privacyBtn = new pbfe.Button(_(\"Privacy\"), \"link\");\n    versionLabel.appendChild(privacyBtn);\n\n    versionLabel.element.appendChild(document.createTextNode(\" | \"));\n\n    var changelogLink = document.createElement(\"a\");\n    changelogLink.innerText = _(\"Changelog\");\n    changelogLink.href = \"https://github.com/LeadRDRK/AvatarCropper/releases\";\n    changelogLink.draggable = false;\n    changelogLink.target = \"_blank\";\n    versionLabel.element.appendChild(changelogLink);\n\n    titleBox.appendChild(versionLabel);\n\n    var langSelector = new pbfe.Selector;\n    langSelector.element.id = \"langSelector\";\n    var langs = i18n.getLanguages();\n    for (const i in langs) {\n        langSelector.addOption(langs[i].name, i);\n    }\n    langSelector.value = localStorage.getItem(\"lang\");\n    titleBox.appendChild(langSelector);\n\n    var buttonsBox = new pbfe.Flexbox(\"column\");\n    buttonsBox.element.id = \"openButtonsBox\";\n    //buttonsBox.flexBasis = \"310px\";\n    buttonsBox.gap = \"0.5rem\";\n    \n    var openButton = new pbfe.Button(_(\"Open File...\"));\n    buttonsBox.appendChild(openButton);\n\n    var urlButton = new pbfe.Button(_(\"Paste Image...\"), \"secondary\");\n    buttonsBox.appendChild(urlButton);\n\n    var hint = new pbfe.Label(_(\"You can also drag and drop an image here.\"));\n    hint.element.style.textAlign = \"center\";\n    hint.element.style.fontStyle = \"italic\";\n    buttonsBox.appendChild(hint);\n\n    box.appendChild(titleBox);\n    box.appendChild(buttonsBox);\n\n    openButton.addEventListener(\"click\", openFilePicker);\n    initURLDialog();\n    urlButton.addEventListener(\"click\", urlDialog.show.bind(urlDialog));\n    aboutBtn.addEventListener(\"click\", aboutDialog.show.bind(aboutDialog));\n    privacyBtn.addEventListener(\"click\", privacyDialog.show.bind(privacyDialog));\n\n    langSelector.addEventListener(\"change\", function() {\n        localStorage.setItem(\"lang\", this.value);\n        // Reinitialize the app\n        appInit();\n    });\n\n    welcomeScreen.shown = true;\n}\n\nfunction initURLDialog() {\n    urlDialog = new pbfe.Dialog(_(\"Paste Image\"));\n\n    var label = _(\"Paste your image into the input box.\");\n    var hint = new pbfe.Label(label);\n    hint.element.style.marginBottom = \"0.5rem\";\n    urlDialog.appendChild(hint);\n\n    var input = new pbfe.Input(\"text\");\n    input.element.id = \"urlInput\";\n    input.element.setAttribute(\"aria-label\", label);\n    urlDialog.appendChild(input);\n\n    urlDialog.appendHideButton(_(\"Cancel\"));\n\n    input.addEventListener(\"paste\", function(e) {\n        var data = e.clipboardData || e.originalEvent.clipboardData;\n        if (!data) return;\n\n        var items = data.items;\n        for (let i = 0; i < items.length; ++i) {\n            let item = items[i];\n            if (item.kind == \"file\") {\n                let file = item.getAsFile();\n                if (file.type.startsWith(\"image/\")) {\n                    editor.open(file, hide);\n                    break;\n                }\n            }\n        }\n    });\n\n    input.addEventListener(\"input\", function() {\n        input.value = \"\";\n    });\n\n    container.appendChild(urlDialog);\n}\n\nfunction show() {\n    setTimeout(function() { box.element.classList.remove(\"hide\"); }, 0);\n    container.appendChild(box);\n    container.appendChild(urlDialog);\n    welcomeScreen.shown = true;\n}\n\nfunction hide() {\n    box.element.classList.add(\"hide\");\n    urlDialog.hide();\n    welcomeScreen.shown = false;\n\n    container.removeChildAfterTransition(box, function() {\n        if (container.contains(urlDialog)) container.removeChild(urlDialog);\n    });\n}\n\nvar inputEl = document.createElement(\"input\");\ninputEl.type = \"file\";\ninputEl.accept = \"image/*\";\n\nfunction openFilePicker() {\n    inputEl.value = null;\n    inputEl.click();\n}\n\ninputEl.addEventListener(\"change\", function(e) {\n    var fileList = this.files;\n    for (let i = 0; i < fileList.length; ++i) {\n        let file = fileList[i];\n        if (file.type.startsWith(\"image/\")) {\n            editor.open(file, hide);\n            return;\n        }\n    }\n    toast.show(_(\"Invalid image file.\"));\n});\n\nvar welcomeScreen = {\n    shown: false, init, show, hide\n}\nexport default welcomeScreen;","import loadingDialog from \"./loading-dialog.js\";\nimport pbfe from \"./pbfe.js\";\nimport toast from \"./toast.js\";\nimport welcomeScreen from \"./welcome-screen.js\";\nimport { _ } from \"./i18n.js\";\nimport gif from \"./gif.js\";\nimport colorPicker from \"./color-picker.js\";\nimport imageFilters from \"./image-filters.js\";\nimport webPreview from \"./web-preview.js\";\nimport {\n    redrawFunc,\n    touchToMouseEvent,\n    MenuInputs,\n    createRangeDetents, \n    isPointInRect,\n    isPointInCircle,\n    getTouchDist,\n    createLine\n} from \"./utils.js\";\n\nvar container, box;\nvar innerBox, canvasBox, editorCanvas, editorCtx, imgCanvas, imgCtx;\nvar menuBox, inputs = new MenuInputs;\nvar notifBox;\nvar renderCanvas, renderCtx;\nvar previewBox, previewImages;\nvar saveAnchor = document.createElement(\"a\");\nvar saveDialog, gifOptionsDialog, rotateDialog;\n\nvar cropShapes = {\n    CIRCLE: 1,\n    SQUARE: 2,\n    FREEFORM: 3\n};\nvar cropShape = cropShapes.CIRCLE;\nvar previewSizes = [128, 64, 32];\n\nfunction init(_container) {\n    container = _container;\n\n    box = new pbfe.Flexbox;\n    box.element.id = \"editorBox\";\n    box.element.classList.add(\"hide\");\n\n    initInnerBox();\n    initMenuBox();\n    initNotifBox();\n    initSaveDialog();\n    initGifOptions();\n    initRotateDialog();\n\n    innerBox.addEventListener(\"mousedown\", mouseDownListener);\n    menuBox.addEventListener(\"mousedown\", unfocusInnerBox);\n    document.addEventListener(\"mousemove\", mouseMoveListener);\n    document.addEventListener(\"mouseup\", mouseUpListener);\n    document.addEventListener(\"blur\", mouseUpListener);\n    innerBox.addEventListener(\"wheel\", wheelListener, { passive: true });\n\n    if (\"ontouchstart\" in document) {\n        innerBox.addEventListener(\"touchstart\", touchStartListener, { passive: true });\n        document.addEventListener(\"touchmove\", touchMoveListener, { passive: true });\n        document.addEventListener(\"touchend\", touchEndListener, { passive: true });\n    }\n\n    document.addEventListener(\"keydown\", keyDownListener);\n}\n\nfunction initInnerBox() {\n    innerBox = new pbfe.Flexbox;\n    innerBox.element.id = \"editorInnerBox\";\n    innerBox.element.style.cursor = \"grab\";\n    box.appendChild(innerBox);\n\n    canvasBox = new pbfe.Widget;\n    canvasBox.element.id = \"canvasBox\";\n    innerBox.appendChild(canvasBox);\n\n    imgCanvas = document.createElement(\"canvas\");\n    imgCanvas.id = \"imgCanvas\";\n    canvasBox.body.appendChild(imgCanvas);\n\n    imgCtx = imgCanvas.getContext(\"2d\");\n\n    editorCanvas = document.createElement(\"canvas\");\n    editorCanvas.id = \"editorCanvas\";\n    canvasBox.body.appendChild(editorCanvas);\n\n    editorCtx = editorCanvas.getContext(\"2d\");\n    editorCtx.lineWidth = 1;\n\n    var fullscreenBtn = new pbfe.Button(\"⛶\");\n    fullscreenBtn.element.classList.add(\"innerBoxBtn\");\n    fullscreenBtn.element.title = _(\"Toggle fullscreen\");\n    fullscreenBtn.element.style.right = \"0\";\n    fullscreenBtn.element.style.lineHeight = \"1.4\";\n    innerBox.appendChild(fullscreenBtn);\n\n    var tutorialBtn = new pbfe.Button(\"?\");\n    tutorialBtn.element.classList.add(\"innerBoxBtn\");\n    tutorialBtn.element.title = _(\"Show tutorial\");\n    tutorialBtn.element.style.right = \"2.5rem\";\n    tutorialBtn.element.style.lineHeight = \"1.4\";\n    innerBox.appendChild(tutorialBtn);\n\n    fullscreenBtn.addEventListener(\"click\", function() {\n        if (document.fullscreenElement)\n            document.exitFullscreen();\n        else\n            document.body.requestFullscreen();\n    });\n\n    initTutorialDialog();\n    tutorialBtn.addEventListener(\"click\", showTutorialDialog);\n\n    previewBox = new pbfe.Flexbox;\n    previewBox.element.id = \"previewBox\";\n\n    previewImages = [];\n    for (let i = 0; i < 3; ++i) {\n        var size = previewSizes[i];\n\n        let container = new pbfe.Widget;\n        let style = container.element.style;\n        style.width = style.height = size + \"px\";\n        style.borderRadius = size/2 + \"px\";\n        previewBox.appendChild(container);\n\n        let img = new Image;\n        container.element.appendChild(img);\n        previewImages.push(img);\n    }\n\n    innerBox.appendChild(previewBox);\n}\n\nvar tutorialDialog, demoVideo;\nfunction initTutorialDialog() {\n    tutorialDialog = new pbfe.Dialog(_(\"Tutorial\"));\n    tutorialDialog.element.style.textAlign = \"center\";\n    container.appendChild(tutorialDialog);\n\n    var text1 = new pbfe.Label(_(\"Drag the crop selector to move or resize it.\"));\n    tutorialDialog.appendChild(text1);\n\n    demoVideo = document.createElement(\"video\");\n    demoVideo.style.pointerEvents = \"none\";\n    demoVideo.style.width = \"100%\";\n    demoVideo.style.marginTop = \"0.5rem\";\n    demoVideo.loop = true;\n    demoVideo.poster = new URL(\"./demo-thumbnail.jpg\", import.meta.url);\n    tutorialDialog.body.appendChild(demoVideo);\n\n    var text2 = new pbfe.Label(_(\"Dragging anywhere outside of the crop selector will move the viewport. Use the mouse wheel or pinch the screen with two fingers to zoom in/out.\\nOnce you're done, press the \\\"Save image...\\\" button to save your cropped image.\\n\\nYou may view this tutorial at any time by pressing the \\\"?\\\" button at the top right of the screen.\"));\n    tutorialDialog.appendChild(text2);\n\n    tutorialDialog.appendHideButton(_(\"OK\"));\n}\n\nfunction showTutorialDialog() {\n    if (!demoVideo.src) {\n        demoVideo.src = \"./demo.mp4\";\n        demoVideo.play();\n    }\n    tutorialDialog.show();\n}\n\nfunction initMenuBox() {\n    colorPicker.init(container);\n\n    menuBox = new pbfe.Flexbox;\n    menuBox.element.id = \"editorMenu\";\n    box.appendChild(menuBox);\n\n    var saveBtn = createMenuButton(_(\"Save image...\"));\n    var saveGifBtn = createMenuButton(_(\"Save as GIF...\"));\n    var fitBtn = createMenuButton(_(\"Fit image to viewport\"));\n    var rotateBtn = createMenuButton(_(\"Rotate...\"));\n\n    var shapeBtnContainer = new pbfe.Widget;\n    shapeBtnContainer.element.id = \"shapeBtnContainer\";\n    var circleBtn = createShapeButton(_(\"Circle\"), \"circle\", true);\n    var squareBtn = createShapeButton(_(\"Square\"), \"square\");\n    var freeformBtn = createShapeButton(_(\"Freeform\"), \"freeform\");\n    shapeBtnContainer.appendChildren([ circleBtn, squareBtn, freeformBtn ]);\n    prevShapeBtn = circleBtn.element;\n\n    menuBox.appendChildren([\n        /* Save */\n        createSectionTitle(_(\"Save\")),\n        saveBtn,\n        saveGifBtn,\n\n        /* Crop Area */\n        createSectionTitle(_(\"Crop Area\")),\n        inputs.create(\"width\", _(\"Width\"), \"text\", true),\n        inputs.create(\"height\", _(\"Height\"), \"text\", true),\n        inputs.create(\"xPos\", _(\"X Pos\"), \"text\", true),\n        inputs.create(\"yPos\", _(\"Y Pos\"), \"text\", true),\n        inputs.create(\"allowOffscreen\", _(\"Allow offscreen\"), \"checkbox\"),\n\n        /* Crop Shape */\n        createSectionTitle(_(\"Crop Shape\")),\n        shapeBtnContainer,\n        inputs.create(\"showGuidelines\", _(\"Show guidelines\"), \"checkbox\"),\n        inputs.create(\"guideColor\", _(\"Guidelines color\"), \"color\"),\n\n        /* Image */\n        createSectionTitle(_(\"Image\")),\n        inputs.create(\"flipH\", _(\"Flip horizontally\"), \"checkbox\"),\n        inputs.create(\"flipV\", _(\"Flip vertically\"), \"checkbox\"),\n        rotateBtn,\n        inputs.create(\"frame\", _(\"Frame\"), \"range\"),\n        inputs.create(\"playGif\", _(\"Play GIF\"), \"checkbox\"),\n        inputs.create(\"bgColor\", _(\"Background color\"), \"color\"),\n\n        /* Viewport */\n        createSectionTitle(_(\"Viewport\")),\n        inputs.create(\"zoom\", _(\"Zoom\"), \"range\"),\n        inputs.create(\"scaleDevicePixel\", _(\"Scale to device pixel\"), \"checkbox\"),\n        fitBtn,\n        inputs.create(\"showPreview\", _(\"Show preview\"), \"checkbox\")\n    ]);\n\n    /* Input defaults */\n    inputs.frame.value = 0;\n    inputs.frame.disabled = true;\n    inputs.showPreview.checked = true;\n    inputs.bgColor.style.backgroundColor = \"rgba(255,255,255,0)\";\n    inputs.guideColor.style.backgroundColor = \"rgb(255,255,0)\";\n\n    /* Other */\n    var returnBtn = new pbfe.Button(_(\"Open another image\"), \"secondary\");\n    returnBtn.element.id = \"returnBtn\";\n    menuBox.appendChild(returnBtn);\n\n    var hideBtn = new pbfe.Button(_(\"Hide panel\"));\n    hideBtn.element.id = \"hideBtn\";\n    menuBox.appendChild(hideBtn);\n\n    /* Events */\n    returnBtn.addEventListener(\"click\", function() {\n        hide();\n        welcomeScreen.show();\n    });\n\n    var innerStyle = innerBox.element.style;\n    hideBtn.addEventListener(\"click\", function() {\n        if (innerStyle.width && innerStyle.height) {\n            innerStyle.removeProperty(\"width\");\n            innerStyle.removeProperty(\"height\");\n            previewBox.element.classList.remove(\"panelHidden\");\n            hideBtn.text = _(\"Hide panel\");\n        }\n        else {\n            innerStyle.width = \"100%\";\n            innerStyle.height = \"100%\";\n            previewBox.element.classList.add(\"panelHidden\");\n            hideBtn.text = _(\"Show panel\");\n        }\n    });\n\n    inputs.width.addEventListener(\"input\", function() {\n        updateSizeInputValue(this, \"width\");\n    });\n\n    inputs.height.addEventListener(\"input\", function() {\n        updateSizeInputValue(this, \"height\");\n    });\n\n    inputs.xPos.addEventListener(\"input\", function() {\n        updatePosInputValue(this, \"x\");\n    });\n\n    inputs.yPos.addEventListener(\"input\", function() {\n        updatePosInputValue(this, \"y\");\n    });\n\n    inputs.showGuidelines.addEventListener(\"change\", redrawEditor);\n\n    inputs.flipH.addEventListener(\"change\", updateImgRenders);\n    inputs.flipV.addEventListener(\"change\", updateImgRenders);\n\n    var zoomDetents = createRangeDetents(\"zoomDetents\", [50, 100, 200, 400]);\n    var zoomInput = inputs.zoom;\n    zoomInput.min = 10;\n    zoomInput.max = 800;\n    zoomInput.value = canvasScale;\n    zoomInput.setAttribute(\"list\", zoomDetents);\n    zoomInput.addEventListener(\"input\", function() {\n        setCanvasScale(this.value / 100);\n    });\n\n    inputs.scaleDevicePixel.addEventListener(\"change\", function() {\n        setCanvasScale(canvasScale);\n    });\n\n    fitBtn.addEventListener(\"click\", function() {\n        fitImageToViewport();\n    });\n\n    inputs.showPreview.addEventListener(\"change\", function(e) {\n        if (this.checked) {\n            previewBox.element.style.display = \"flex\";\n            initPreview();\n        }\n        else\n            previewBox.element.style.display = \"none\";\n    });\n\n    rotateBtn.addEventListener(\"click\", showRotateDialog);\n\n    inputs.frame.addEventListener(\"input\", function() {\n        if (gif.isAnimated()) {\n            var value = this.value;\n            img = gif.frames[value].bitmap;\n            updateImgRenders();\n            showNotification(_(\"Frame: \") + value);\n        }\n    });\n\n    saveBtn.addEventListener(\"click\", showSaveDialog);\n    saveGifBtn.addEventListener(\"click\", showGifOptions);\n\n    inputs.playGif.addEventListener(\"change\", function() {\n        if (gif.frames.length < 2) return;\n        if (this.checked)\n            playNextGifFrame();\n    });\n\n    inputs.bgColor.addEventListener(\"click\", function() { colorPicker.show(this, imgCanvas); });\n    inputs.guideColor.addEventListener(\"click\", function() { colorPicker.show(this, imgCanvas); });\n\n    inputs.bgColor.addEventListener(\"colorchange\", function() {\n        redrawImgCanvas();\n        var color = inputs.bgColor.style.backgroundColor;\n        for (let i = 0; i < previewImages.length; ++i) {\n            var parentStyle = previewImages[i].parentNode.style;\n            parentStyle.backgroundColor = color;\n        }\n    });\n\n    inputs.guideColor.addEventListener(\"colorchange\", redrawEditor);\n    menuBox.addEventListener(\"scroll\", colorPicker.hide, { passive: true });\n\n    imgCanvas.addEventListener(\"edstatechange\", function(e) {\n        if (e.detail) editorCanvas.style.display = \"none\";\n        else editorCanvas.style.removeProperty(\"display\");\n    });\n}\n\nfunction updateSizeInputValue(input, type) {\n    var value = parseInputValue(input);\n    if (!value || value < 10) return;\n    \n    if (cropShape != cropShapes.FREEFORM) {\n        inputs.width.value = inputs.height.value = value;\n        crop.width = crop.height = value;\n    }\n    else crop[type] = value;\n\n    setCropSize(crop.width, crop.height);\n    redrawEditor();\n    if (inputs.showPreview.checked) updatePreview();\n}\n\nfunction updatePosInputValue(input, type) {\n    var value = parseInputValue(input);\n    if (value === undefined) return;\n    crop[type] = value;\n\n    setCropPosition(crop.x, crop.y);\n    redrawEditor();\n    if (inputs.showPreview.checked) updatePreview();\n}\n\nfunction playNextGifFrame() {\n    if (!inputs.playGif.checked) return;\n    var nextFrame = ++inputs.frame.value;\n    if (nextFrame == gif.frames.length) {\n        inputs.frame.value = nextFrame = 0;\n    }\n    var frame = gif.frames[nextFrame];\n    img = frame.bitmap;\n    updateImgRenders();\n    setTimeout(playNextGifFrame, frame.info.delay * 10);\n}\n\nfunction createSectionTitle(text) {\n    var title = new pbfe.Label(text);\n    title.element.classList.add(\"sectionTitle\");\n    return title;\n}\n\nvar prevShapeBtn;\nfunction shapeBtnHandler(value) {\n    return function() {\n        if (cropShape == value) return;\n        cropShape = value;\n        if (value != cropShapes.FREEFORM)\n            setCropSize(crop.width, crop.width);\n        \n        for (let i = 0; i < previewImages.length; ++i) {\n            let parent = previewImages[i].parentNode;\n            parent.style.borderRadius = (value == cropShapes.CIRCLE ? previewSizes[i] : 0) + \"px\";\n        }\n\n        this.classList.add(\"chosen\");\n        prevShapeBtn.classList.remove(\"chosen\");\n        prevShapeBtn = this;\n\n        redrawEditor();\n        if (inputs.showPreview.checked) updatePreview();\n    };\n}\n\nfunction parseInputValue(el) {\n    if (el.value == \"\") return;\n    var value = Number(el.value);\n    if (isNaN(value)) {\n        showNotification(_(\"Invalid value\"));\n        return;\n    }\n    return value;\n}\n\nfunction createMenuButton(label, split, chosen) {\n    var btn = new pbfe.Button(label);\n    var classes = [\"menuBtn\"];\n    if (split) classes.push(\"split\");\n    if (chosen) classes.push(\"chosen\");\n    btn.element.classList.add(...classes);\n    return btn;\n}\n\nfunction createShapeIcon(type) {\n    var el = document.createElement(\"span\");\n    el.classList.add(\"shapeIcon\", type);\n    return el;\n}\n\nfunction createShapeButton(label, type, chosen) {\n    var btn = createMenuButton(label, false, chosen);\n    var icon = createShapeIcon(type);\n    btn.element.prepend(icon);\n\n    btn.addEventListener(\"click\", shapeBtnHandler(cropShapes[type.toUpperCase()]));\n    return btn;\n}\n\nfunction initNotifBox() {\n    notifBox = new pbfe.Floatbox;\n    notifBox.element.id = \"notifBox\";\n    box.appendChild(notifBox);\n}\n\nvar notifTimeout = null;\nfunction showNotification(text, time) {\n    if (notifTimeout != null) clearTimeout(notifTimeout);\n    if (!time) time = 1000;\n    var notifEl = notifBox.element;\n    notifEl.innerText = text;\n    notifEl.classList.add(\"show\");\n\n    notifTimeout = setTimeout(function() {\n        notifEl.classList.remove(\"show\");\n        notifTimeout = null;\n    }, time);\n}\n\nfunction initGifOptions() {\n    gifOptionsDialog = new pbfe.Dialog(_(\"GIF Options\"));\n    gifOptionsDialog.appendChildren([\n        inputs.create(\"startFrame\", _(\"Start frame\"), \"number\"),\n        inputs.create(\"endFrame\", _(\"End frame\"), \"number\"),\n        inputs.create(\"loopCount\", _(\"Loop count\"), \"number\"),\n        inputs.create(\"speedMult\", _(\"Speed multiplier\"), \"number\"),\n        inputs.create(\"keepGifColors\", _(\"Keep original colors\"), \"checkbox\")\n    ]);\n\n    var filtersLabel = new pbfe.Label(_(\"Filters\"));\n    filtersLabel.element.classList.add(\"menuInputBox\");\n    gifOptionsDialog.appendChild(filtersLabel);\n\n    var filtersBtn = new pbfe.Button(\"✨ \" + _(\"Options...\"));\n    filtersBtn.element.style.marginLeft = \"auto\";\n    filtersLabel.appendChild(filtersBtn);\n\n    inputs.startFrame.value = inputs.startFrame.min = 0;\n    inputs.endFrame.value = inputs.endFrame.min = 0;\n    inputs.loopCount.value = inputs.loopCount.min = 0;\n    inputs.speedMult.value = 1;\n    inputs.speedMult.step = 0.25;\n    inputs.speedMult.min = 0;\n\n    inputs.keepGifColors.style.paddingTop = \"0\";\n    \n    var saveBtn = new pbfe.Button(_(\"Save\"));\n    gifOptionsDialog.appendButton(saveBtn);\n    saveBtn.addEventListener(\"click\", function() {\n        gifOptionsDialog.hide();\n        renderAndSaveGif();\n    });\n\n    filtersBtn.addEventListener(\"click\", function() {\n        gifOptionsDialog.hide();\n\n        // Render a static image for the image filters canvas\n        render();\n        imageFilters.showOptions(gifFilters, renderCanvas, function() {\n            gifOptionsDialog.show();\n        });\n    });\n\n    gifOptionsDialog.appendHideButton(_(\"Cancel\"), \"secondary\");\n    container.appendChild(gifOptionsDialog);\n}\n\nvar gifFilters;\nfunction showGifOptions() {\n    gifFilters = {}\n    gifOptionsDialog.show();\n}\n\nfunction initSaveDialog() {\n    imageFilters.init(container);\n    webPreview.init(container);\n\n    saveDialog = new pbfe.Dialog(_(\"Save Image\"));\n    saveDialog.element.id = \"saveDialog\";\n    container.appendChild(saveDialog);\n\n    var label = new pbfe.Label(_(\"You can save the image now, or apply some filters and check how your avatar would look on some websites.\"));\n    saveDialog.appendChild(label);\n\n    saveDialog.body.appendChild(document.createElement(\"br\"));\n\n    renderCanvas = document.createElement(\"canvas\");\n    renderCtx = renderCanvas.getContext(\"2d\", { willReadFrequently: true });\n    saveDialog.body.appendChild(renderCanvas);\n\n    var actionsContainer = new pbfe.Widget;\n    actionsContainer.element.id = \"imgActionsContainer\";\n    saveDialog.appendChild(actionsContainer);\n\n    var filtersBtn = new pbfe.Button(\"✨ \" + _(\"Filters...\"));\n    actionsContainer.appendChild(filtersBtn);\n\n    var previewBtn = new pbfe.Button(\"🖼️ \" + _(\"Preview...\"));\n    actionsContainer.appendChild(previewBtn);\n\n    var saveBtn = new pbfe.Button(_(\"Save\"));\n    saveDialog.appendButton(saveBtn);\n\n    var closeBtn = new pbfe.Button(_(\"Close\"), \"secondary\");\n    saveDialog.appendButton(closeBtn);\n\n    saveBtn.addEventListener(\"click\", saveImage);\n    closeBtn.addEventListener(\"click\", function() {\n        saveDialog.hide();\n    });\n\n    filtersBtn.addEventListener(\"click\", function() {\n        saveDialog.hide();\n        imageFilters.showOptions(null, renderCanvas, function() {\n            renderCtx.clearRect(0, 0, crop.width, crop.height);\n            renderCtx.drawImage(imageFilters.canvas, 0, 0);\n            saveDialog.show();\n        });\n    });\n\n    previewBtn.addEventListener(\"click\", function() {\n        saveDialog.hide();\n        webPreview.show(renderCanvas, function() {\n            saveDialog.show();\n        });\n    });\n}\n\nfunction showSaveDialog() {\n    render();\n    saveDialog.show();\n}\n\nvar rotateCanvas, rotateCtx, rotateSlider, angleLabel;\nfunction initRotateDialog() {\n    rotateDialog = new pbfe.Dialog(_(\"Rotate\"));\n    rotateDialog.element.style.textAlign = \"center\";\n    container.appendChild(rotateDialog);\n\n    rotateCanvas = document.createElement(\"canvas\");\n    rotateCanvas.id = \"rotateCanvas\";\n    rotateCtx = rotateCanvas.getContext(\"2d\");\n    rotateDialog.body.appendChild(rotateCanvas);\n\n    angleLabel = new pbfe.Label(\"0°\");\n    rotateDialog.appendChild(angleLabel);\n\n    var rotateDetents = createRangeDetents(\"rotateDetents\", [90, 180, 270]);\n    rotateSlider = new pbfe.Input(\"range\");\n    rotateSlider.element.style.width = \"100%\";\n    rotateSlider.min = 0;\n    rotateSlider.max = 360;\n    rotateSlider.step = 0.1;\n    rotateSlider.value = 0;\n    rotateSlider.element.setAttribute(\"list\", rotateDetents);\n    rotateSlider.element.setAttribute(\"aria-label\", _(\"Rotation angle\"));\n    rotateDialog.appendChild(rotateSlider);\n\n    var applyBtn = new pbfe.Button(_(\"Apply\"));\n    rotateDialog.appendButton(applyBtn);\n    applyBtn.addEventListener(\"click\", function() {\n        rotateDialog.hide();\n        openRotatedImg(rotateSlider.value);\n    });\n\n    rotateDialog.appendHideButton(_(\"Cancel\"), \"secondary\");\n\n    rotateSlider.addEventListener(\"input\", function() {\n        angleLabel.text = this.value + \"°\";\n        rotateCanvas.style.transform = \"rotate(\" + this.value + \"deg)\";\n    });\n}\n\nvar origImg, origFrames, rotateCanvasInit;\nfunction showRotateDialog() {\n    if (rotateCanvasInit) {\n        var src = gif.isAnimated() ? gif.frames[0].bitmap : img;\n        rotateCanvas.width = src.width;\n        rotateCanvas.height = src.height;\n        rotateCtx.drawImage(src, 0, 0);\n        rotateCanvasInit = false;\n    }\n\n    rotateDialog.show();\n}\n\nfunction renderRotatedImg(src, angle) {\n    var w = src.width;\n    var h = src.height;\n    var absSin = Math.abs(Math.sin(angle));\n    var absCos = Math.abs(Math.cos(angle));\n    var rw = Math.ceil(w * absCos + h * absSin);\n    var rh = Math.ceil(w * absSin + h * absCos);\n\n    renderCanvas.width = rw;\n    renderCanvas.height = rh;\n\n    renderCtx.translate(rw/2, rh/2);\n    renderCtx.rotate(angle);\n    renderCtx.drawImage(src, -w/2, -h/2);\n\n    return createImageBitmap(renderCtx.getImageData(0, 0, rw, rh));\n}\n\nasync function openRotatedImg(angle) {\n    if (angle != 0 && angle != 360) {\n        angle = angle * Math.PI / 180;\n\n        if (gif.isAnimated()) {\n            if (!origFrames) origFrames = gif.frames;\n            var frames = [];\n            for (var i = 0; i < origFrames.length; ++i) {\n                var { info, bitmap } = origFrames[i];\n                var rotBitmap = await renderRotatedImg(bitmap, angle);\n                frames[i] = { info, bitmap: rotBitmap };\n            }\n            gif.frames = frames;\n        }\n        else {\n            if (!origImg) origImg = img;\n            img = await renderRotatedImg(origImg, angle);\n        }\n    }\n    else if (origImg) {\n        img = origImg;\n        origImg = null;\n    }\n    else if (origFrames) {\n        gif.frames = origFrames;\n        origFrames = null;\n    }\n    else\n        return;\n    \n    if (gif.isAnimated()) {\n        var currentFrame = inputs.frame.value;\n        img = gif.frames[currentFrame].bitmap;\n    }\n        \n    setMainCanvasesSize(img.width, img.height);\n    editorCanvasInit = true;\n\n    show();\n    reset();\n}\n\nfunction setMainCanvasesSize(w, h) {\n    imgCanvas.width  = editorCanvas.width  = previewCanvas.width  = w;\n    imgCanvas.height = editorCanvas.height = previewCanvas.height = h;\n}\n\nvar img;\nvar usingObjectUrl = false;\nvar currentName;\nfunction open(src, successCb) {\n    if (usingObjectUrl) {\n        URL.revokeObjectURL(origImg ? origImg.src : img.src);\n        usingObjectUrl = false;\n    }\n    origImg = origFrames = null;\n\n    if (gif.reset()) {\n        inputs.frame.value = 0;\n        inputs.frame.disabled = true;\n        inputs.startFrame.value = 0;\n        inputs.endFrame.value = 0;\n        inputs.loopCount.value = 0;\n        inputs.keepGifColors.checked = false;\n        inputs.playGif.checked = false;\n    }\n\n    loadingDialog.setProgress(-1);\n    loadingDialog.show();\n\n    if (src instanceof File) {\n        currentName = src.name.slice(0, src.name.lastIndexOf(\".\"));\n        if (src.type == \"image/gif\") gif.load(src, inputs);\n        src = URL.createObjectURL(src);\n        usingObjectUrl = true;\n    }\n    else {\n        if (src == \"\") return;\n        if (img && src == img.src) {\n            loadingDialog.hide();\n            show();\n            reset();\n            successCb();\n            return;\n        }\n        currentName = src.slice(src.lastIndexOf(\"/\") + 1, src.lastIndexOf(\".\"));\n    }\n\n    if (!(img instanceof Image)) img = new Image;\n    var loadCb, errorCb\n    img.addEventListener(\"load\", loadCb = function() {\n        loadingDialog.setProgress(1);\n        loadingDialog.hide();\n\n        setMainCanvasesSize(img.width, img.height);\n        editorCanvasInit = true;\n\n        rotateSlider.value = 0;\n        angleLabel.text = \"0°\";\n        rotateCanvas.style.transform = \"\";\n        rotateCanvasInit = true;\n\n        show();\n        reset();\n        successCb();\n\n        img.removeEventListener(\"load\", loadCb);\n        img.removeEventListener(\"error\", errorCb);\n    });\n    img.addEventListener(\"error\", errorCb = function() {\n        loadingDialog.hide();\n        toast.show(_(\"Failed to load image.\"));\n\n        img.removeEventListener(\"load\", loadCb);\n        img.removeEventListener(\"error\", errorCb);\n    });\n    img.src = src;\n}\n\nfunction show() {\n    container.appendChild(box);\n    setTimeout(function() { box.element.classList.remove(\"hide\"); }, 0);\n\n    if (!localStorage.getItem(\"tutorialShown\")) {\n        showTutorialDialog();\n        localStorage.setItem(\"tutorialShown\", \"true\");\n    }\n}\n\nfunction hide() {\n    box.element.classList.add(\"hide\");\n    container.removeChildAfterTransition(box);\n    colorPicker.hide();\n    inputs.playGif.checked = false;\n}\n\nfunction isHidden() {\n    return box.element.classList.contains(\"hide\");\n}\n\nfunction reset() {\n    fitImageToViewport();\n    resetCropArea();\n    inputs.flipH.checked = inputs.flipV.checked = false;\n\n    redrawEditor();\n    updateImgRenders();\n}\n\nfunction resetCropArea() {\n    var s = Math.floor((img.width < img.height ? img.width : img.height) * 0.5);\n    s -= s % 10;\n    \n    crop.x = crop.y = 0;\n    setCropSize(s, s);\n    setCropPosition(0, 0);\n}\n\nfunction fitImageToViewport() {\n    var innerEl = innerBox.element;\n    var vpWidth = innerEl.offsetWidth;\n    var vpHeight = innerEl.offsetHeight;\n    var vpAspectRatio = vpWidth / vpHeight;\n    var imgAspectRatio = img.width / img.height;\n\n    var ratio = inputs.scaleDevicePixel.checked ? 1 : devicePixelRatio;\n    setCanvasScale((vpAspectRatio > imgAspectRatio ? vpHeight / img.height : vpWidth / img.width) * ratio);\n    setCanvasMargins(0, 0);\n}\n\nfunction setCropPosition(x, y) {\n    if (!inputs.allowOffscreen.checked) {\n        x = Math.max(0, Math.min(x, img.width - crop.width));\n        y = Math.max(0, Math.min(y, img.height - crop.height));\n    }\n\n    crop.x = x;\n    crop.y = y;\n    inputs.xPos.value = x;\n    inputs.yPos.value = y;\n}\n\nfunction setCropSize(width, height, preferHigher) {\n    if (!inputs.allowOffscreen.checked) {\n        width = Math.min(width, img.width - crop.x);\n        height = Math.min(height, img.height - crop.y);\n    }\n    var min = (img.width < 50 || img.height < 50) ? 1 : 10;\n    width = Math.max(min, width);\n    height = Math.max(min, height);\n\n    if (cropShape != cropShapes.FREEFORM) {\n        if (preferHigher ? width > height : width < height) height = width;\n        else width = height;\n    }\n    crop.width = width;\n    crop.height = height;\n    inputs.width.value = width;\n    inputs.height.value = height;\n}\n\nvar canvasX = 0, canvasY = 0;\nfunction setCanvasMargins(x, y) {\n    canvasX = x;\n    canvasY = y;\n\n    var element = canvasBox.element;\n    element.style.marginLeft = canvasX + \"px\";\n    element.style.marginTop  = canvasY + \"px\";\n}\n\nvar canvasScale = 1;\nfunction setCanvasScale(scale) {\n    var ratio = inputs.scaleDevicePixel.checked ? 1 : devicePixelRatio;\n    scale = Math.round(Math.max(0.1, Math.min(scale, 8)) * 1000) / 1000;\n    var realScale = scale / ratio;\n    canvasBox.element.style.transform = \"scale(\" + realScale.toFixed(3) + \")\";\n    inputs.zoom.value = Math.round(scale * 100);\n\n    var newLineWidth = Math.ceil(Math.max(1, 1 / (realScale * devicePixelRatio)));\n    if (newLineWidth != editorCtx.lineWidth) {\n        editorCtx.lineWidth = newLineWidth;\n        redrawEditor();\n    }\n\n    var mScale = scale / canvasScale;\n    setCanvasMargins(canvasX * mScale, canvasY * mScale);\n\n    canvasScale = scale;\n    showNotification(_(\"Zoom: \") + (+(scale*100).toFixed(1)) + \"%\");\n}\n\nfunction applyFlipTransform(canvas, ctx) {\n    var flipH = inputs.flipH.checked;\n    var flipV = inputs.flipV.checked;\n    var sx = 1, sy = 1;\n    if (flipH) {\n        ctx.translate(canvas.width, 0);\n        sx = -1;\n    }\n    if (flipV) {\n        ctx.translate(0, canvas.height);\n        sy = -1;\n    }\n    ctx.scale(sx, sy);\n}\n\nvar crop = { x: 0, y: 0, width: 0, height: 0 };\nvar prevRect;\nvar editorCanvasInit = false;\nfunction drawEditor() {\n    var ctx = editorCtx;\n    ctx.globalCompositeOperation = \"source-over\";\n\n    // Draw the mask\n    var maskRect;\n    if (editorCanvasInit) {\n        maskRect = [0, 0, editorCanvas.width, editorCanvas.height];\n        editorCanvasInit = false;\n    }\n    else {\n        maskRect = prevRect;\n        ctx.clearRect(...maskRect);\n    }\n    ctx.fillStyle = \"rgba(0,0,0,0.5)\";\n    ctx.fillRect(...maskRect);\n\n    // Draw the crop selector\n    var lw = ctx.lineWidth;\n    var x = crop.x - lw/2,\n        y = crop.y - lw/2,\n        width = crop.width + lw,\n        height = crop.height + lw;\n    var cx, cy;\n\n    ctx.strokeStyle = \"#ffffff\";\n    if (cropShape == cropShapes.CIRCLE) {\n        ctx.strokeRect(x, y, width, height);\n        cx = crop.x + crop.width/2;\n        cy = crop.y + crop.height/2;\n\n        ctx.beginPath();\n        ctx.arc(cx, cy, width/2 - lw/2, 0, 2 * Math.PI);\n    }\n    else {\n        ctx.beginPath();\n        ctx.rect(x, y, width, height);\n    }\n\n    // Save the path, draw the outline, then poke the hole\n    ctx.save();\n    ctx.stroke();\n    ctx.restore();\n    ctx.globalCompositeOperation = \"destination-out\";\n    ctx.fillStyle = \"#000000\";\n    ctx.fill();\n\n    // Draw guidelines\n    if (inputs.showGuidelines.checked) {\n        ctx.globalCompositeOperation = \"source-over\";\n        ctx.setLineDash([10, 10]);\n        ctx.strokeStyle = inputs.guideColor.style.backgroundColor;\n\n        ctx.lineWidth += 1 + Math.floor((crop.width * crop.height) / 1000000);\n\n        if (cx === undefined) {\n            cx = crop.x + crop.width/2;\n            cy = crop.y + crop.height/2;\n        }\n        var right = crop.x + crop.width;\n        var bottom = crop.y + crop.height;\n\n        ctx.beginPath();\n        createLine(ctx, cx, cy, cx, crop.y); // top\n        createLine(ctx, cx, cy, crop.x, cy); // left\n        createLine(ctx, cx, cy, cx, bottom); // bottom\n        createLine(ctx, cx, cy, right, cy);  // right\n        ctx.stroke();\n\n        ctx.setLineDash([]);\n        ctx.lineWidth = lw;\n    }\n\n    prevRect = [\n        crop.x - lw,       crop.y - lw,\n        crop.width + lw*2, crop.height + lw*2\n    ];\n}\n\nfunction drawImgCanvas() {\n    var ctx = imgCtx;\n    ctx.clearRect(0, 0, img.width, img.height);\n    ctx.fillStyle = inputs.bgColor.style.backgroundColor;\n    ctx.fillRect(0, 0, img.width, img.height);\n\n    applyFlipTransform(imgCanvas, ctx);\n    ctx.drawImage(img, 0, 0, img.width, img.height);\n    ctx.resetTransform();\n}\n\nvar redrawEditor = redrawFunc(drawEditor);\nvar redrawImgCanvas = redrawFunc(drawImgCanvas);\n\nvar pvRedrawing = false;\nvar pvRedrawNext = false;\nasync function redrawPreview() {\n    if (pvRedrawing) {\n        pvRedrawNext = true;\n        return;\n    }\n\n    pvRedrawing = true;\n\n    var flipH = inputs.flipH.checked;\n    var flipV = inputs.flipV.checked;\n    var src, isBlob;\n    if (gif.isAnimated() || flipH || flipV || !(img instanceof Image)) {\n        // Use the image data of the rendered ImageBitmap\n        var blob = await renderPreviewImg();\n        src = URL.createObjectURL(blob);\n        isBlob = true;\n    }\n    else {\n        // Load the image directly if it's not an ANIMATED gif and there are no image modifications\n        // (except for background color)\n        src = img.src;\n    }\n\n    let count = 0;\n    for (let i = 0; i < previewImages.length; ++i) {\n        var pImage = previewImages[i];\n        pImage.addEventListener(\"load\", function() {\n            if (++count == previewImages.length) {\n                pvRedrawing = false;\n                if (isBlob) URL.revokeObjectURL(src);\n                if (pvRedrawNext) {\n                    pvRedrawNext = false;\n                    redrawPreview();\n                }\n            }\n        }, { once: true });\n\n        pImage.src = src;\n    }\n}\n\nvar previewCanvas = document.createElement(\"canvas\");\nvar previewCtx = previewCanvas.getContext(\"2d\");\nfunction renderPreviewImg() {\n    let ctx = previewCtx;\n    ctx.clearRect(0, 0, img.width, img.height);\n\n    applyFlipTransform(previewCanvas, ctx);\n    ctx.drawImage(img, 0, 0, img.width, img.height);\n    ctx.resetTransform();\n\n    return new Promise(resolve => previewCanvas.toBlob(resolve));\n}\n\nfunction updatePreview() {\n    for (let i = 0; i < previewImages.length; ++i) {\n        let pImage = previewImages[i];\n        var size = previewSizes[i];\n        var sx = size/crop.width, sy = size/crop.height;\n        pImage.style.left = -crop.x * sx + \"px\";\n        pImage.style.top = -crop.y * sy + \"px\";\n        pImage.style.width = img.width * sx + \"px\";\n        pImage.style.height = img.height * sy + \"px\";\n    }\n}\n\nfunction initPreview() {\n    redrawPreview();\n    updatePreview();\n}\n\nfunction updateImgRenders() {\n    redrawImgCanvas();\n    if (inputs.showPreview.checked) initPreview();\n}\n\nfunction getRenderPos() {\n    var flipH = inputs.flipH.checked;\n    var flipV = inputs.flipV.checked;\n    let x = crop.x, y = crop.y;\n    if (flipH) x = (img.width - crop.width) - x;\n    if (flipV) y = (img.height - crop.height) - y;\n    return [x, y];\n}\n\nfunction drawCroppedImage(canvas, ctx) {\n    applyFlipTransform(canvas, ctx);\n    let [x, y] = getRenderPos();\n    ctx.drawImage(img,\n        x, y, crop.width, crop.height, // Crop\n        0, 0, crop.width, crop.height  // Placement\n    );\n    ctx.resetTransform();\n}\n\nfunction render(canvas, filter) {\n    if (!canvas) canvas = renderCanvas;\n    let ctx = canvas.getContext(\"2d\");\n    canvas.width = crop.width;\n    canvas.height = crop.height;\n\n    ctx.fillStyle = inputs.bgColor.style.backgroundColor;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    if (filter) ctx.filter = filter;\n    drawCroppedImage(canvas, ctx);\n}\n\nfunction saveFile(href, filename) {\n    saveAnchor.href = href;\n    saveAnchor.download = filename;\n    saveAnchor.click();\n}\n\nfunction saveImage() {\n    renderCanvas.toBlob(function(blob) {\n        var url = URL.createObjectURL(blob);\n        saveFile(url, currentName + \"_cropped.png\");\n        setTimeout(function() {\n            URL.revokeObjectURL(url);\n        }, 0);\n    });\n}\n\nasync function renderAndSaveGif() {\n    var renderer = new gif.Renderer(crop.width, crop.height, { loop: Math.floor(inputs.loopCount.value) });\n\n    var frames = gif.frames;\n    var lastFrame = frames.length ? frames.length - 1 : 0;\n    var start = Math.max(0, Math.min(Math.floor(inputs.startFrame.value), lastFrame));\n    var length = Math.max(0, Math.min(Math.floor(inputs.endFrame.value), lastFrame)) + 1;\n    var filter = imageFilters.optionsToFilter(gifFilters);\n\n    loadingDialog.setProgress(0);\n    loadingDialog.show();\n    var keepColors = inputs.keepGifColors.checked;\n    var speedMult = +inputs.speedMult.value;\n    for (let i = start; i < length; ++i) {\n        // Allow rendering static image\n        let delay = 0;\n        if (frames.length) {\n            var frame = frames[i];\n            img = frame.bitmap;\n            delay = speedMult ? frame.info.delay / speedMult : 0;\n        }\n        render(renderCanvas, filter);\n\n        let imageData = renderCtx.getImageData(0, 0, crop.width, crop.height);\n        renderer.addFrame(imageData, { delay, keepColors });\n        loadingDialog.setProgress((i + 1) / length);\n    }\n    \n    renderer.end();\n    loadingDialog.hide();\n    renderCtx.filter = \"none\";\n\n    var uArray = renderer.getUint8Array();\n    var blob = new Blob([uArray], {type: \"image/gif\"});\n    var url = URL.createObjectURL(blob);\n    saveFile(url, currentName + \"_cropped.gif\");\n    setTimeout(function() {\n        URL.revokeObjectURL(url);\n    }, 0);\n\n    // Reload current frame\n    if (frames.length) img = frames[inputs.frame.value].bitmap;\n}\n\nvar isInSelection = false;\nvar isResizing = false;\nvar resizeFromLeft = false;\nvar resizeFromTop = false;\nfunction checkMousePos(e) {\n    if (colorPicker.isEyeDropperActive()) {\n        innerBox.element.style.cursor = \"default\";\n        return;\n    }\n\n    var rect = canvasBox.element.getBoundingClientRect();\n    // canvas rect -> selection rect\n    rect.x += rect.width * (crop.x / img.width);\n    rect.y += rect.height * (crop.y / img.height);\n    rect.width *= crop.width / img.width;\n    rect.height *= crop.height / img.height;\n\n    var cursor;\n    isInSelection = isPointInRect(e.clientX, e.clientY, rect);\n    if (isInSelection && !touchPinching) {\n        var cx = rect.x + rect.width/2;\n        var cy = rect.y + rect.height/2;\n        isResizing = !isPointInCircle(e.clientX, e.clientY, cx, cy, rect.width / 2);\n        if (isResizing) {\n            resizeFromLeft = e.clientX < cx;\n            resizeFromTop = e.clientY < cy;\n            if (resizeFromTop) {\n                if (resizeFromLeft) cursor = \"nw-resize\";\n                else cursor = \"ne-resize\";\n            }\n            else {\n                if (resizeFromLeft) cursor = \"sw-resize\";\n                else cursor = \"se-resize\";\n            }\n        }\n        else cursor = \"move\";\n    }\n    else cursor = \"grab\";\n\n    innerBox.element.style.cursor = cursor;\n}\n\nvar mouseDown = false;\nvar innerBoxFocused = true;\nfunction mouseDownListener(e) {\n    if (isHidden() || e.button != 0) return;\n    innerBoxFocused = true;\n\n    if (colorPicker.isEyeDropperActive()) {\n        var rect = imgCanvas.getBoundingClientRect();\n        var detail = { mode: \"rgb\" };\n        if (!isPointInRect(e.clientX, e.clientY, rect)) {\n            // color of the outer area...lol\n            detail.color = [30, 30, 30, 255];\n        }\n        else {\n            var x = ((e.clientX - rect.x) / rect.width) * imgCanvas.width;\n            var y = ((e.clientY - rect.y) / rect.height) * imgCanvas.height;\n            var imageData = imgCtx.getImageData(x, y, 1, 1);\n            detail.color = imageData.data;\n        }\n\n        imgCanvas.dispatchEvent(new CustomEvent(\"eyedrop\", { detail }));\n    }\n\n    checkMousePos(e);\n    if (!isInSelection)\n        innerBox.element.style.cursor = \"grabbing\";\n\n    mouseDown = true;\n}\n\nfunction unfocusInnerBox() {\n    innerBoxFocused = false;\n}\n\nvar prevX = null, prevY = null;\nfunction mouseMoveListener(e) {\n    if (isHidden()) return;\n    if (!mouseDown) {\n        checkMousePos(e);\n        return;\n    }\n\n    if (prevX != null && prevY != null) {\n        var dx = e.clientX - prevX;\n        var dy = e.clientY - prevY;\n\n        var ratio = inputs.scaleDevicePixel.checked ? 1 : devicePixelRatio;\n        var scale = canvasScale / ratio;\n\n        if (e.shiftKey) {\n            // = 1 pixel\n            dx = scale * Math.sign(dx);\n            dy = scale * Math.sign(dy);\n        }\n        \n        if (isInSelection) {\n            dx = Math.round(dx / scale);\n            dy = Math.round(dy / scale);\n\n            var px = crop.x, py = crop.y;\n            var xSign = (resizeFromLeft ? -1 : 1);\n            var ySign = (resizeFromTop ? -1 : 1);\n            if (isResizing) {\n                var width = crop.width, height = crop.height;\n                if (cropShape == cropShapes.FREEFORM) {\n                    width += dx * xSign;\n                    height += dy * ySign;\n                    if (resizeFromLeft) {\n                        px += dx;\n                        if (px < 0) {\n                            width += px;\n                            px = 0;\n                        }\n                    }\n                    if (resizeFromTop) {\n                        py += dy;\n                        if (py < 0) {\n                            height += py;\n                            py = 0;\n                        }\n                    }\n                }\n                else {\n                    var delta = (Math.abs(dx) > Math.abs(dy)) ? dx * xSign : dy * ySign;\n                    var hDelta = delta * xSign,\n                        vDelta = delta * ySign;\n                    let left = px + hDelta,\n                        top = py + vDelta,\n                        right = left + width + delta,\n                        bottom = top + height + delta;\n                    \n                    var d = 0;\n\n                    if (!inputs.allowOffscreen.checked) {\n                        if (resizeFromLeft && left < 0) d = -left;\n                        if (resizeFromTop && top < 0) d = -top;\n\n                        if (right > img.width) d = right - img.width - hDelta;\n                        if (bottom > img.height) d = bottom - img.height - vDelta;\n                    }\n\n                    if (d) delta = (d > delta ? 0 : delta - d);\n\n                    width = height += delta;\n                    if (resizeFromLeft) px += delta * xSign;\n                    if (resizeFromTop) py += delta * ySign;\n                }\n\n                if (resizeFromLeft && width < 10)\n                    px -= 10 - width;\n                \n                if (resizeFromTop && height < 10)\n                    py -= 10 - height;\n\n                // Set the crop positions first so setCropSize could clamp the values correctly\n                crop.x = px; crop.y = py;\n                setCropSize(width, height);\n                setCropPosition(px, py);\n            }\n            else {\n                px += dx;\n                py += dy;\n                setCropPosition(px, py);\n            }\n            \n            redrawEditor();\n            if (inputs.showPreview.checked) updatePreview();\n        }\n        else {\n            setCanvasMargins(canvasX + dx, canvasY + dy);\n        }\n    }\n    prevX = e.clientX;\n    prevY = e.clientY;\n}\n\nfunction mouseUpListener(e) {\n    if (isHidden() || e.button != 0) return;\n    checkMousePos(e);\n    mouseDown = false;\n    prevX = prevY = null;\n    isInSelection = false;\n}\n\nfunction wheelListener(e) {\n    if (isHidden()) return;\n    var incr = 0.1;\n    if (e.deltaY > 0)\n        incr = -incr;\n\n    setCanvasScale(canvasScale + incr);\n}\n\nvar touchPinching = false;\nfunction touchStartListener(e) {\n    touchToMouseEvent.call(this, e);\n    if (e.touches.length >= 2) {\n        touchPinching = true;\n        prevTouchDist = getTouchDist(e.touches[0], e.touches[1]);\n        isInSelection = false;\n    }\n}\n\nvar prevTouchDist;\nfunction touchMoveListener(e) {\n    if (touchPinching) {\n        var dist = getTouchDist(e.touches[0], e.touches[1]);\n        var diff = dist - prevTouchDist;\n        setCanvasScale(canvasScale + diff/200);\n        prevTouchDist = dist;\n    }\n}\n\nfunction touchEndListener(e) {\n    if (touchPinching && e.touches.length < 2)\n        touchPinching = false;\n}\n\nfunction keyDownListener(e) {\n    if (!innerBoxFocused) return;\n    var code;\n    if (e.code) code = e.code;\n    else {\n        switch (e.keyCode) {\n            case 38: code = \"ArrowUp\";    break;\n            case 40: code = \"ArrowDown\";  break;\n            case 37: code = \"ArrowLeft\";  break;\n            case 39: code = \"ArrowRight\"; break;\n            default: return;\n        }\n    }\n\n    var incr = e.shiftKey ? 2 : 1;\n    switch (code) {\n        case \"ArrowUp\":\n            incr = -incr;\n            /* fallthrough */\n\n        case \"ArrowDown\": \n            e.ctrlKey ? setCropSize(crop.width, crop.height + incr, incr > 0) : setCropPosition(crop.x, crop.y + incr);\n            break;\n\n        case \"ArrowLeft\":\n            incr = -incr;\n            /* fallthrough */\n\n        case \"ArrowRight\":\n            e.ctrlKey ? setCropSize(crop.width + incr, crop.height, incr > 0) : setCropPosition(crop.x + incr, crop.y);\n            break;\n\n        default: return;\n    }\n    redrawEditor();\n    if (inputs.showPreview.checked) updatePreview();\n}\n\nvar editor = {\n    init, open, show, hide\n}\nexport default editor;","import pbfe from \"./pbfe.js\"\nimport { _ } from \"./i18n.js\";\n\nvar dialog, progressBar;\nfunction init(container) {\n    dialog = new pbfe.Dialog(_(\"Loading...\"));\n    container.appendChild(dialog);\n\n    progressBar = new pbfe.ProgressBar;\n    progressBar.element.id = \"loadingBar\";\n    dialog.appendChild(progressBar);\n}\n\nfunction show() {\n    dialog.show();\n}\n\nfunction hide() {\n    dialog.hide();\n}\n\nfunction setProgress(value) {\n    progressBar.setProgress(value);\n}\n\nvar loadingDialog = {\n    init, show, hide, setProgress\n}\nexport default loadingDialog;","var strings = {};\nvar langs = {};\n\nasync function init() {\n    var res = await fetch(\"./i18n/langs.json\");\n    var json = await res.json();\n    langs = json;\n}\n\nasync function loadLanguage(lang) {\n    if (!(lang in langs)) throw new Error;\n    var res = await fetch(\"./i18n/\" + lang + \".json\");\n    var json = await res.json();\n    strings = json;\n}\n\nfunction getString(str) {\n    if (str in strings)\n        return strings[str];\n    else\n        return str;\n}\n\nfunction getLanguages() {\n    return langs;\n}\n\nvar i18n = {\n    init,\n    loadLanguage,\n    getString,\n    getLanguages\n};\nexport default i18n;\nexport var _ = getString;","var container;\nfunction init(_container) {\n    container = _container;\n}\n\nfunction show(text) {\n    container.showToast(text, 3000, true);\n}\n\nvar toast = {\n    init,\n    show\n}\nexport default toast;","import { GifReader, GifWriter } from \"./omggif.js\";\nvar frames = [];\n\nfunction load(file, inputs) {\n    var reader = new FileReader;\n    reader.onloadend = async function() {\n        if (reader.error) {\n            toast.show(_(\"Failed to load GIF frames.\"));\n            return;\n        }\n\n        var view = new Uint8Array(reader.result);\n        var gifReader;\n        try {\n            gifReader = new GifReader(view);\n        }\n        catch (e) {\n            toast.show(_(\"Failed to load GIF frames: \") + e.message);\n            return;\n        }\n\n        var { width, height } = gifReader;\n        inputs.loopCount.value = gifReader.loopCount();\n\n        var ndFrameData, lastFrameData;\n        var clearBg;\n        for (let i = 0; i < gifReader.numFrames(); ++i) {\n            const info = gifReader.frameInfo(i);\n            let inheritFrame;\n            if (!clearBg) {\n                if (info.disposal == 3)\n                    inheritFrame = ndFrameData;\n                else if (info.disposal != 0 && i > 0)\n                    inheritFrame = lastFrameData;\n            }\n            else clearBg = false;\n            \n            let imageData;\n            if (inheritFrame)\n                imageData = new ImageData(new Uint8ClampedArray(inheritFrame), width, height);\n            else\n                imageData = new ImageData(width, height);\n\n            gifReader.decodeAndBlitFrameRGBA(i, imageData.data);\n            lastFrameData = imageData.data;\n            \n            if (info.disposal == 0)\n                ndFrameData = imageData.data;\n            else if (info.disposal == 2)\n                clearBg = true;\n\n            let bitmap = await createImageBitmap(imageData);\n            frames[i] = { info, bitmap };\n        }\n\n        var lastFrame = gifReader.numFrames() - 1;\n        inputs.frame.min = 0;\n        inputs.frame.max = lastFrame;\n        inputs.frame.value = 0;\n        inputs.frame.disabled = false;\n        inputs.endFrame.value = lastFrame;\n        inputs.keepGifColors.checked = true;\n    }\n    reader.readAsArrayBuffer(file);\n}\n\nfunction Renderer(width, height, gopts) {\n    this.buffer = [];\n    this.writer = new GifWriter(this.buffer, width, height, gopts);\n}\n\nRenderer.prototype.addFrame = function(imageData, opts) {\n    let delay = opts.delay != undefined ? opts.delay : 0;\n    let disposal = opts.disposal != undefined ? opts.disposal : 2;\n    let keepColors = opts.keepColors;\n    let x = opts.x != undefined ? opts.x : 0;\n    let y = opts.y != undefined ? opts.y : 0;\n\n    let width = imageData.width;\n    let height = imageData.height;\n\n    let palette = [];\n    let indexedPixels = [];\n    let transparent = createFrame(imageData.data, palette, indexedPixels, keepColors);\n    this.writer.addFrame(x, y, width, height, indexedPixels, {\n        palette, delay, transparent, disposal\n    });\n}\n\nRenderer.prototype.end = function() {\n    this.writer.end();\n}\n\nRenderer.prototype.getUint8Array = function() {\n    return Uint8Array.from(this.buffer);\n}\n\nfunction createFrame(px, palette, indexedPixels, keepColors) {\n    var transparentIndex = null;\n    for (let i = 0; i < px.length; i += 4) {\n        let r = px[i];\n        let g = px[i+1];\n        let b = px[i+2];\n        let a = px[i+3];\n\n        if (a == 0) {\n            if (transparentIndex == null) {\n                if (palette.length < 256)\n                    transparentIndex = palette.push(0) - 1;\n                else {\n                    indexedPixels.push(0);\n                    continue;\n                }\n            }\n\n            indexedPixels.push(transparentIndex);\n            continue;\n        }\n\n        let rgb = ((r & 0xff) << 16) + ((g & 0xff) << 8) + (b & 0xff);\n        let index, lastDiff = null;\n        for (let x = 1; x < palette.length; ++x) {\n            // Find color in palette\n            let prgb = palette[x];\n            if (prgb == rgb) {\n                index = x;\n                lastDiff = null;\n                break;\n            }\n\n            // Check if color is close\n            if (!keepColors || palette.length == 256) {\n                let pr = (prgb >> 16) & 0xff;\n                let pg = (prgb >> 8) & 0xff;\n                let pb = prgb & 0xff;\n                let diff = Math.abs(r - pr) + Math.abs(g - pg) + Math.abs(b - pb);\n                if (lastDiff == null || diff < lastDiff) {\n                    index = x;\n                    lastDiff = diff;\n                }\n            }\n        }\n        // Exponentially increase tolerance\n        var tolerance = 15 + (40 * Math.pow(2, 10 * (palette.length / 256) - 10));\n        if (palette.length != 256 && lastDiff > tolerance)\n            index = null;\n\n        if (!index)\n            index = palette.push(rgb) - 1;\n        \n        indexedPixels.push(index);\n    }\n\n    if (palette.length == 256) return transparentIndex;\n    // Palette length needs to be a power of 2\n    // We do a *bit* of twiddling\n    let v = palette.length; // max is 256 = 8 bits\n    if (v < 2)\n        v = 2\n    else {\n        --v;\n        v |= v >> 1;\n        v |= v >> 2;\n        v |= v >> 4;\n        ++v;\n    }\n\n    // Pad extra values\n    let needed = v - palette.length;\n    for (let i = 0; i < needed; ++i)\n        palette.push(0);\n    \n    return transparentIndex;\n}\n\nfunction reset() {\n    if (frames.length) {\n        gif.frames = frames = [];\n        return true;\n    }\n    return false;\n}\n\nfunction isAnimated() {\n    return frames.length > 1;\n}\n\nvar gif = {\n    Renderer,\n    load,\n    reset,\n    isAnimated,\n    frames\n}\nexport default gif;","// (c) Dean McNamee <dean@gmail.com>, 2013.\n//\n// https://github.com/deanm/omggif\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n//\n// omggif is a JavaScript implementation of a GIF 89a encoder and decoder,\n// including animation and compression.  It does not rely on any specific\n// underlying system, so should run in the browser, Node, or Plask.\n\n\"use strict\";\n\nfunction GifWriter(buf, width, height, gopts) {\n  var p = 0;\n\n  var gopts = gopts === undefined ? { } : gopts;\n  var loop_count = gopts.loop === undefined ? null : gopts.loop;\n  var global_palette = gopts.palette === undefined ? null : gopts.palette;\n\n  if (width <= 0 || height <= 0 || width > 65535 || height > 65535)\n    throw new Error(\"Width/Height invalid.\");\n\n  function check_palette_and_num_colors(palette) {\n    var num_colors = palette.length;\n    if (num_colors < 2 || num_colors > 256 ||  num_colors & (num_colors-1)) {\n      throw new Error(\n          \"Invalid code/color length, must be power of 2 and 2 .. 256.\");\n    }\n    return num_colors;\n  }\n\n  // - Header.\n  buf[p++] = 0x47; buf[p++] = 0x49; buf[p++] = 0x46;  // GIF\n  buf[p++] = 0x38; buf[p++] = 0x39; buf[p++] = 0x61;  // 89a\n\n  // Handling of Global Color Table (palette) and background index.\n  var gp_num_colors_pow2 = 0;\n  var background = 0;\n  if (global_palette !== null) {\n    var gp_num_colors = check_palette_and_num_colors(global_palette);\n    while (gp_num_colors >>= 1) ++gp_num_colors_pow2;\n    gp_num_colors = 1 << gp_num_colors_pow2;\n    --gp_num_colors_pow2;\n    if (gopts.background !== undefined) {\n      background = gopts.background;\n      if (background >= gp_num_colors)\n        throw new Error(\"Background index out of range.\");\n      // The GIF spec states that a background index of 0 should be ignored, so\n      // this is probably a mistake and you really want to set it to another\n      // slot in the palette.  But actually in the end most browsers, etc end\n      // up ignoring this almost completely (including for dispose background).\n      if (background === 0)\n        throw new Error(\"Background index explicitly passed as 0.\");\n    }\n  }\n\n  // - Logical Screen Descriptor.\n  // NOTE(deanm): w/h apparently ignored by implementations, but set anyway.\n  buf[p++] = width & 0xff; buf[p++] = width >> 8 & 0xff;\n  buf[p++] = height & 0xff; buf[p++] = height >> 8 & 0xff;\n  // NOTE: Indicates 0-bpp original color resolution (unused?).\n  buf[p++] = (global_palette !== null ? 0x80 : 0) |  // Global Color Table Flag.\n             gp_num_colors_pow2;  // NOTE: No sort flag (unused?).\n  buf[p++] = background;  // Background Color Index.\n  buf[p++] = 0;  // Pixel aspect ratio (unused?).\n\n  // - Global Color Table\n  if (global_palette !== null) {\n    for (var i = 0, il = global_palette.length; i < il; ++i) {\n      var rgb = global_palette[i];\n      buf[p++] = rgb >> 16 & 0xff;\n      buf[p++] = rgb >> 8 & 0xff;\n      buf[p++] = rgb & 0xff;\n    }\n  }\n\n  if (loop_count !== null) {  // Netscape block for looping.\n    if (loop_count < 0 || loop_count > 65535)\n      throw new Error(\"Loop count invalid.\");\n    // Extension code, label, and length.\n    buf[p++] = 0x21; buf[p++] = 0xff; buf[p++] = 0x0b;\n    // NETSCAPE2.0\n    buf[p++] = 0x4e; buf[p++] = 0x45; buf[p++] = 0x54; buf[p++] = 0x53;\n    buf[p++] = 0x43; buf[p++] = 0x41; buf[p++] = 0x50; buf[p++] = 0x45;\n    buf[p++] = 0x32; buf[p++] = 0x2e; buf[p++] = 0x30;\n    // Sub-block\n    buf[p++] = 0x03; buf[p++] = 0x01;\n    buf[p++] = loop_count & 0xff; buf[p++] = loop_count >> 8 & 0xff;\n    buf[p++] = 0x00;  // Terminator.\n  }\n\n\n  var ended = false;\n\n  this.addFrame = function(x, y, w, h, indexed_pixels, opts) {\n    if (ended === true) { --p; ended = false; }  // Un-end.\n\n    opts = opts === undefined ? { } : opts;\n\n    // TODO(deanm): Bounds check x, y.  Do they need to be within the virtual\n    // canvas width/height, I imagine?\n    if (x < 0 || y < 0 || x > 65535 || y > 65535)\n      throw new Error(\"x/y invalid.\");\n\n    if (w <= 0 || h <= 0 || w > 65535 || h > 65535)\n      throw new Error(\"Width/Height invalid.\");\n\n    if (indexed_pixels.length < w * h)\n      throw new Error(\"Not enough pixels for the frame size.\");\n\n    var using_local_palette = true;\n    var palette = opts.palette;\n    if (palette === undefined || palette === null) {\n      using_local_palette = false;\n      palette = global_palette;\n    }\n\n    if (palette === undefined || palette === null)\n      throw new Error(\"Must supply either a local or global palette.\");\n\n    var num_colors = check_palette_and_num_colors(palette);\n\n    // Compute the min_code_size (power of 2), destroying num_colors.\n    var min_code_size = 0;\n    while (num_colors >>= 1) ++min_code_size;\n    num_colors = 1 << min_code_size;  // Now we can easily get it back.\n\n    var delay = opts.delay === undefined ? 0 : opts.delay;\n\n    // From the spec:\n    //     0 -   No disposal specified. The decoder is\n    //           not required to take any action.\n    //     1 -   Do not dispose. The graphic is to be left\n    //           in place.\n    //     2 -   Restore to background color. The area used by the\n    //           graphic must be restored to the background color.\n    //     3 -   Restore to previous. The decoder is required to\n    //           restore the area overwritten by the graphic with\n    //           what was there prior to rendering the graphic.\n    //  4-7 -    To be defined.\n    // NOTE(deanm): Dispose background doesn't really work, apparently most\n    // browsers ignore the background palette index and clear to transparency.\n    var disposal = opts.disposal === undefined ? 0 : opts.disposal;\n    if (disposal < 0 || disposal > 3)  // 4-7 is reserved.\n      throw new Error(\"Disposal out of range.\");\n\n    var use_transparency = false;\n    var transparent_index = 0;\n    if (opts.transparent !== undefined && opts.transparent !== null) {\n      use_transparency = true;\n      transparent_index = opts.transparent;\n      if (transparent_index < 0 || transparent_index >= num_colors)\n        throw new Error(\"Transparent color index.\");\n    }\n\n    if (disposal !== 0 || use_transparency || delay !== 0) {\n      // - Graphics Control Extension\n      buf[p++] = 0x21; buf[p++] = 0xf9;  // Extension / Label.\n      buf[p++] = 4;  // Byte size.\n\n      buf[p++] = disposal << 2 | (use_transparency === true ? 1 : 0);\n      buf[p++] = delay & 0xff; buf[p++] = delay >> 8 & 0xff;\n      buf[p++] = transparent_index;  // Transparent color index.\n      buf[p++] = 0;  // Block Terminator.\n    }\n\n    // - Image Descriptor\n    buf[p++] = 0x2c;  // Image Seperator.\n    buf[p++] = x & 0xff; buf[p++] = x >> 8 & 0xff;  // Left.\n    buf[p++] = y & 0xff; buf[p++] = y >> 8 & 0xff;  // Top.\n    buf[p++] = w & 0xff; buf[p++] = w >> 8 & 0xff;\n    buf[p++] = h & 0xff; buf[p++] = h >> 8 & 0xff;\n    // NOTE: No sort flag (unused?).\n    // TODO(deanm): Support interlace.\n    buf[p++] = using_local_palette === true ? (0x80 | (min_code_size-1)) : 0;\n\n    // - Local Color Table\n    if (using_local_palette === true) {\n      for (var i = 0, il = palette.length; i < il; ++i) {\n        var rgb = palette[i];\n        buf[p++] = rgb >> 16 & 0xff;\n        buf[p++] = rgb >> 8 & 0xff;\n        buf[p++] = rgb & 0xff;\n      }\n    }\n\n    p = GifWriterOutputLZWCodeStream(\n            buf, p, min_code_size < 2 ? 2 : min_code_size, indexed_pixels);\n\n    return p;\n  };\n\n  this.end = function() {\n    if (ended === false) {\n      buf[p++] = 0x3b;  // Trailer.\n      ended = true;\n    }\n    return p;\n  };\n\n  this.getOutputBuffer = function() { return buf; };\n  this.setOutputBuffer = function(v) { buf = v; };\n  this.getOutputBufferPosition = function() { return p; };\n  this.setOutputBufferPosition = function(v) { p = v; };\n}\n\n// Main compression routine, palette indexes -> LZW code stream.\n// |index_stream| must have at least one entry.\nfunction GifWriterOutputLZWCodeStream(buf, p, min_code_size, index_stream) {\n  buf[p++] = min_code_size;\n  var cur_subblock = p++;  // Pointing at the length field.\n\n  var clear_code = 1 << min_code_size;\n  var code_mask = clear_code - 1;\n  var eoi_code = clear_code + 1;\n  var next_code = eoi_code + 1;\n\n  var cur_code_size = min_code_size + 1;  // Number of bits per code.\n  var cur_shift = 0;\n  // We have at most 12-bit codes, so we should have to hold a max of 19\n  // bits here (and then we would write out).\n  var cur = 0;\n\n  function emit_bytes_to_buffer(bit_block_size) {\n    while (cur_shift >= bit_block_size) {\n      buf[p++] = cur & 0xff;\n      cur >>= 8; cur_shift -= 8;\n      if (p === cur_subblock + 256) {  // Finished a subblock.\n        buf[cur_subblock] = 255;\n        cur_subblock = p++;\n      }\n    }\n  }\n\n  function emit_code(c) {\n    cur |= c << cur_shift;\n    cur_shift += cur_code_size;\n    emit_bytes_to_buffer(8);\n  }\n\n  // I am not an expert on the topic, and I don't want to write a thesis.\n  // However, it is good to outline here the basic algorithm and the few data\n  // structures and optimizations here that make this implementation fast.\n  // The basic idea behind LZW is to build a table of previously seen runs\n  // addressed by a short id (herein called output code).  All data is\n  // referenced by a code, which represents one or more values from the\n  // original input stream.  All input bytes can be referenced as the same\n  // value as an output code.  So if you didn't want any compression, you\n  // could more or less just output the original bytes as codes (there are\n  // some details to this, but it is the idea).  In order to achieve\n  // compression, values greater then the input range (codes can be up to\n  // 12-bit while input only 8-bit) represent a sequence of previously seen\n  // inputs.  The decompressor is able to build the same mapping while\n  // decoding, so there is always a shared common knowledge between the\n  // encoding and decoder, which is also important for \"timing\" aspects like\n  // how to handle variable bit width code encoding.\n  //\n  // One obvious but very important consequence of the table system is there\n  // is always a unique id (at most 12-bits) to map the runs.  'A' might be\n  // 4, then 'AA' might be 10, 'AAA' 11, 'AAAA' 12, etc.  This relationship\n  // can be used for an effecient lookup strategy for the code mapping.  We\n  // need to know if a run has been seen before, and be able to map that run\n  // to the output code.  Since we start with known unique ids (input bytes),\n  // and then from those build more unique ids (table entries), we can\n  // continue this chain (almost like a linked list) to always have small\n  // integer values that represent the current byte chains in the encoder.\n  // This means instead of tracking the input bytes (AAAABCD) to know our\n  // current state, we can track the table entry for AAAABC (it is guaranteed\n  // to exist by the nature of the algorithm) and the next character D.\n  // Therefor the tuple of (table_entry, byte) is guaranteed to also be\n  // unique.  This allows us to create a simple lookup key for mapping input\n  // sequences to codes (table indices) without having to store or search\n  // any of the code sequences.  So if 'AAAA' has a table entry of 12, the\n  // tuple of ('AAAA', K) for any input byte K will be unique, and can be our\n  // key.  This leads to a integer value at most 20-bits, which can always\n  // fit in an SMI value and be used as a fast sparse array / object key.\n\n  // Output code for the current contents of the index buffer.\n  var ib_code = index_stream[0] & code_mask;  // Load first input index.\n  var code_table = { };  // Key'd on our 20-bit \"tuple\".\n\n  emit_code(clear_code);  // Spec says first code should be a clear code.\n\n  // First index already loaded, process the rest of the stream.\n  for (var i = 1, il = index_stream.length; i < il; ++i) {\n    var k = index_stream[i] & code_mask;\n    var cur_key = ib_code << 8 | k;  // (prev, k) unique tuple.\n    var cur_code = code_table[cur_key];  // buffer + k.\n\n    // Check if we have to create a new code table entry.\n    if (cur_code === undefined) {  // We don't have buffer + k.\n      // Emit index buffer (without k).\n      // This is an inline version of emit_code, because this is the core\n      // writing routine of the compressor (and V8 cannot inline emit_code\n      // because it is a closure here in a different context).  Additionally\n      // we can call emit_byte_to_buffer less often, because we can have\n      // 30-bits (from our 31-bit signed SMI), and we know our codes will only\n      // be 12-bits, so can safely have 18-bits there without overflow.\n      // emit_code(ib_code);\n      cur |= ib_code << cur_shift;\n      cur_shift += cur_code_size;\n      while (cur_shift >= 8) {\n        buf[p++] = cur & 0xff;\n        cur >>= 8; cur_shift -= 8;\n        if (p === cur_subblock + 256) {  // Finished a subblock.\n          buf[cur_subblock] = 255;\n          cur_subblock = p++;\n        }\n      }\n\n      if (next_code === 4096) {  // Table full, need a clear.\n        emit_code(clear_code);\n        next_code = eoi_code + 1;\n        cur_code_size = min_code_size + 1;\n        code_table = { };\n      } else {  // Table not full, insert a new entry.\n        // Increase our variable bit code sizes if necessary.  This is a bit\n        // tricky as it is based on \"timing\" between the encoding and\n        // decoder.  From the encoders perspective this should happen after\n        // we've already emitted the index buffer and are about to create the\n        // first table entry that would overflow our current code bit size.\n        if (next_code >= (1 << cur_code_size)) ++cur_code_size;\n        code_table[cur_key] = next_code++;  // Insert into code table.\n      }\n\n      ib_code = k;  // Index buffer to single input k.\n    } else {\n      ib_code = cur_code;  // Index buffer to sequence in code table.\n    }\n  }\n\n  emit_code(ib_code);  // There will still be something in the index buffer.\n  emit_code(eoi_code);  // End Of Information.\n\n  // Flush / finalize the sub-blocks stream to the buffer.\n  emit_bytes_to_buffer(1);\n\n  // Finish the sub-blocks, writing out any unfinished lengths and\n  // terminating with a sub-block of length 0.  If we have already started\n  // but not yet used a sub-block it can just become the terminator.\n  if (cur_subblock + 1 === p) {  // Started but unused.\n    buf[cur_subblock] = 0;\n  } else {  // Started and used, write length and additional terminator block.\n    buf[cur_subblock] = p - cur_subblock - 1;\n    buf[p++] = 0;\n  }\n  return p;\n}\n\nfunction GifReader(buf) {\n  var p = 0;\n\n  // - Header (GIF87a or GIF89a).\n  if (buf[p++] !== 0x47 ||            buf[p++] !== 0x49 || buf[p++] !== 0x46 ||\n      buf[p++] !== 0x38 || (buf[p++]+1 & 0xfd) !== 0x38 || buf[p++] !== 0x61) {\n    throw new Error(\"Invalid GIF 87a/89a header.\");\n  }\n\n  // - Logical Screen Descriptor.\n  var width = buf[p++] | buf[p++] << 8;\n  var height = buf[p++] | buf[p++] << 8;\n  var pf0 = buf[p++];  // <Packed Fields>.\n  var global_palette_flag = pf0 >> 7;\n  var num_global_colors_pow2 = pf0 & 0x7;\n  var num_global_colors = 1 << (num_global_colors_pow2 + 1);\n  var background = buf[p++];\n  buf[p++];  // Pixel aspect ratio (unused?).\n\n  var global_palette_offset = null;\n  var global_palette_size   = null;\n\n  if (global_palette_flag) {\n    global_palette_offset = p;\n    global_palette_size = num_global_colors;\n    p += num_global_colors * 3;  // Seek past palette.\n  }\n\n  var no_eof = true;\n\n  var frames = [ ];\n\n  var delay = 0;\n  var transparent_index = null;\n  var disposal = 0;  // 0 - No disposal specified.\n  var loop_count = null;\n\n  this.width = width;\n  this.height = height;\n\n  while (no_eof && p < buf.length) {\n    switch (buf[p++]) {\n      case 0x21:  // Graphics Control Extension Block\n        switch (buf[p++]) {\n          case 0xff:  // Application specific block\n            // Try if it's a Netscape block (with animation loop counter).\n            if (buf[p   ] !== 0x0b ||  // 21 FF already read, check block size.\n                // NETSCAPE2.0\n                buf[p+1 ] == 0x4e && buf[p+2 ] == 0x45 && buf[p+3 ] == 0x54 &&\n                buf[p+4 ] == 0x53 && buf[p+5 ] == 0x43 && buf[p+6 ] == 0x41 &&\n                buf[p+7 ] == 0x50 && buf[p+8 ] == 0x45 && buf[p+9 ] == 0x32 &&\n                buf[p+10] == 0x2e && buf[p+11] == 0x30 &&\n                // Sub-block\n                buf[p+12] == 0x03 && buf[p+13] == 0x01 && buf[p+16] == 0) {\n              p += 14;\n              loop_count = buf[p++] | buf[p++] << 8;\n              p++;  // Skip terminator.\n            } else {  // We don't know what it is, just try to get past it.\n              p += 12;\n              while (true) {  // Seek through subblocks.\n                var block_size = buf[p++];\n                // Bad block size (ex: undefined from an out of bounds read).\n                if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n                if (block_size === 0) break;  // 0 size is terminator\n                p += block_size;\n              }\n            }\n            break;\n\n          case 0xf9:  // Graphics Control Extension\n            if (buf[p++] !== 0x4 || buf[p+4] !== 0)\n              throw new Error(\"Invalid graphics extension block.\");\n            var pf1 = buf[p++];\n            delay = buf[p++] | buf[p++] << 8;\n            transparent_index = buf[p++];\n            if ((pf1 & 1) === 0) transparent_index = null;\n            disposal = pf1 >> 2 & 0x7;\n            p++;  // Skip terminator.\n            break;\n\n          // Plain Text Extension could be present and we just want to be able\n          // to parse past it.  It follows the block structure of the comment\n          // extension enough to reuse the path to skip through the blocks.\n          case 0x01:  // Plain Text Extension (fallthrough to Comment Extension)\n          case 0xfe:  // Comment Extension.\n            while (true) {  // Seek through subblocks.\n              var block_size = buf[p++];\n              // Bad block size (ex: undefined from an out of bounds read).\n              if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n              if (block_size === 0) break;  // 0 size is terminator\n              // console.log(buf.slice(p, p+block_size).toString('ascii'));\n              p += block_size;\n            }\n            break;\n\n          default:\n            throw new Error(\n                \"Unknown graphic control label: 0x\" + buf[p-1].toString(16));\n        }\n        break;\n\n      case 0x2c:  // Image Descriptor.\n        var x = buf[p++] | buf[p++] << 8;\n        var y = buf[p++] | buf[p++] << 8;\n        var w = buf[p++] | buf[p++] << 8;\n        var h = buf[p++] | buf[p++] << 8;\n        var pf2 = buf[p++];\n        var local_palette_flag = pf2 >> 7;\n        var interlace_flag = pf2 >> 6 & 1;\n        var num_local_colors_pow2 = pf2 & 0x7;\n        var num_local_colors = 1 << (num_local_colors_pow2 + 1);\n        var palette_offset = global_palette_offset;\n        var palette_size = global_palette_size;\n        var has_local_palette = false;\n        if (local_palette_flag) {\n          var has_local_palette = true;\n          palette_offset = p;  // Override with local palette.\n          palette_size = num_local_colors;\n          p += num_local_colors * 3;  // Seek past palette.\n        }\n\n        var data_offset = p;\n\n        p++;  // codesize\n        while (true) {\n          var block_size = buf[p++];\n          // Bad block size (ex: undefined from an out of bounds read).\n          if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n          if (block_size === 0) break;  // 0 size is terminator\n          p += block_size;\n        }\n\n        frames.push({x: x, y: y, width: w, height: h,\n                     has_local_palette: has_local_palette,\n                     palette_offset: palette_offset,\n                     palette_size: palette_size,\n                     data_offset: data_offset,\n                     data_length: p - data_offset,\n                     transparent_index: transparent_index,\n                     interlaced: !!interlace_flag,\n                     delay: delay,\n                     disposal: disposal});\n        break;\n\n      case 0x3b:  // Trailer Marker (end of file).\n        no_eof = false;\n        break;\n\n      default:\n        throw new Error(\"Unknown gif block: 0x\" + buf[p-1].toString(16));\n        break;\n    }\n  }\n\n  this.numFrames = function() {\n    return frames.length;\n  };\n\n  this.loopCount = function() {\n    return loop_count;\n  };\n\n  this.frameInfo = function(frame_num) {\n    if (frame_num < 0 || frame_num >= frames.length)\n      throw new Error(\"Frame index out of range.\");\n    return frames[frame_num];\n  };\n\n  this.decodeAndBlitFrameBGRA = function(frame_num, pixels) {\n    var frame = this.frameInfo(frame_num);\n    var num_pixels = frame.width * frame.height;\n    var index_stream = new Uint8Array(num_pixels);  // At most 8-bit indices.\n    GifReaderLZWOutputIndexStream(\n        buf, frame.data_offset, index_stream, num_pixels);\n    var palette_offset = frame.palette_offset;\n\n    // NOTE(deanm): It seems to be much faster to compare index to 256 than\n    // to === null.  Not sure why, but CompareStub_EQ_STRICT shows up high in\n    // the profile, not sure if it's related to using a Uint8Array.\n    var trans = frame.transparent_index;\n    if (trans === null) trans = 256;\n\n    // We are possibly just blitting to a portion of the entire frame.\n    // That is a subrect within the framerect, so the additional pixels\n    // must be skipped over after we finished a scanline.\n    var framewidth  = frame.width;\n    var framestride = width - framewidth;\n    var xleft       = framewidth;  // Number of subrect pixels left in scanline.\n\n    // Output index of the top left corner of the subrect.\n    var opbeg = ((frame.y * width) + frame.x) * 4;\n    // Output index of what would be the left edge of the subrect, one row\n    // below it, i.e. the index at which an interlace pass should wrap.\n    var opend = ((frame.y + frame.height) * width + frame.x) * 4;\n    var op    = opbeg;\n\n    var scanstride = framestride * 4;\n\n    // Use scanstride to skip past the rows when interlacing.  This is skipping\n    // 7 rows for the first two passes, then 3 then 1.\n    if (frame.interlaced === true) {\n      scanstride += width * 4 * 7;  // Pass 1.\n    }\n\n    var interlaceskip = 8;  // Tracking the row interval in the current pass.\n\n    for (var i = 0, il = index_stream.length; i < il; ++i) {\n      var index = index_stream[i];\n\n      if (xleft === 0) {  // Beginning of new scan line\n        op += scanstride;\n        xleft = framewidth;\n        if (op >= opend) { // Catch the wrap to switch passes when interlacing.\n          scanstride = framestride * 4 + width * 4 * (interlaceskip-1);\n          // interlaceskip / 2 * 4 is interlaceskip << 1.\n          op = opbeg + (framewidth + framestride) * (interlaceskip << 1);\n          interlaceskip >>= 1;\n        }\n      }\n\n      if (index === trans) {\n        op += 4;\n      } else {\n        var r = buf[palette_offset + index * 3];\n        var g = buf[palette_offset + index * 3 + 1];\n        var b = buf[palette_offset + index * 3 + 2];\n        pixels[op++] = b;\n        pixels[op++] = g;\n        pixels[op++] = r;\n        pixels[op++] = 255;\n      }\n      --xleft;\n    }\n  };\n\n  // I will go to copy and paste hell one day...\n  this.decodeAndBlitFrameRGBA = function(frame_num, pixels) {\n    var frame = this.frameInfo(frame_num);\n    var num_pixels = frame.width * frame.height;\n    var index_stream = new Uint8Array(num_pixels);  // At most 8-bit indices.\n    GifReaderLZWOutputIndexStream(\n        buf, frame.data_offset, index_stream, num_pixels);\n    var palette_offset = frame.palette_offset;\n\n    // NOTE(deanm): It seems to be much faster to compare index to 256 than\n    // to === null.  Not sure why, but CompareStub_EQ_STRICT shows up high in\n    // the profile, not sure if it's related to using a Uint8Array.\n    var trans = frame.transparent_index;\n    if (trans === null) trans = 256;\n\n    // We are possibly just blitting to a portion of the entire frame.\n    // That is a subrect within the framerect, so the additional pixels\n    // must be skipped over after we finished a scanline.\n    var framewidth  = frame.width;\n    var framestride = width - framewidth;\n    var xleft       = framewidth;  // Number of subrect pixels left in scanline.\n\n    // Output index of the top left corner of the subrect.\n    var opbeg = ((frame.y * width) + frame.x) * 4;\n    // Output index of what would be the left edge of the subrect, one row\n    // below it, i.e. the index at which an interlace pass should wrap.\n    var opend = ((frame.y + frame.height) * width + frame.x) * 4;\n    var op    = opbeg;\n\n    var scanstride = framestride * 4;\n\n    // Use scanstride to skip past the rows when interlacing.  This is skipping\n    // 7 rows for the first two passes, then 3 then 1.\n    if (frame.interlaced === true) {\n      scanstride += width * 4 * 7;  // Pass 1.\n    }\n\n    var interlaceskip = 8;  // Tracking the row interval in the current pass.\n\n    for (var i = 0, il = index_stream.length; i < il; ++i) {\n      var index = index_stream[i];\n\n      if (xleft === 0) {  // Beginning of new scan line\n        op += scanstride;\n        xleft = framewidth;\n        if (op >= opend) { // Catch the wrap to switch passes when interlacing.\n          scanstride = framestride * 4 + width * 4 * (interlaceskip-1);\n          // interlaceskip / 2 * 4 is interlaceskip << 1.\n          op = opbeg + (framewidth + framestride) * (interlaceskip << 1);\n          interlaceskip >>= 1;\n        }\n      }\n\n      if (index === trans) {\n        op += 4;\n      } else {\n        var r = buf[palette_offset + index * 3];\n        var g = buf[palette_offset + index * 3 + 1];\n        var b = buf[palette_offset + index * 3 + 2];\n        pixels[op++] = r;\n        pixels[op++] = g;\n        pixels[op++] = b;\n        pixels[op++] = 255;\n      }\n      --xleft;\n    }\n  };\n}\n\nfunction GifReaderLZWOutputIndexStream(code_stream, p, output, output_length) {\n  var min_code_size = code_stream[p++];\n\n  var clear_code = 1 << min_code_size;\n  var eoi_code = clear_code + 1;\n  var next_code = eoi_code + 1;\n\n  var cur_code_size = min_code_size + 1;  // Number of bits per code.\n  // NOTE: This shares the same name as the encoder, but has a different\n  // meaning here.  Here this masks each code coming from the code stream.\n  var code_mask = (1 << cur_code_size) - 1;\n  var cur_shift = 0;\n  var cur = 0;\n\n  var op = 0;  // Output pointer.\n\n  var subblock_size = code_stream[p++];\n\n  // TODO(deanm): Would using a TypedArray be any faster?  At least it would\n  // solve the fast mode / backing store uncertainty.\n  // var code_table = Array(4096);\n  var code_table = new Int32Array(4096);  // Can be signed, we only use 20 bits.\n\n  var prev_code = null;  // Track code-1.\n\n  while (true) {\n    // Read up to two bytes, making sure we always 12-bits for max sized code.\n    while (cur_shift < 16) {\n      if (subblock_size === 0) break;  // No more data to be read.\n\n      cur |= code_stream[p++] << cur_shift;\n      cur_shift += 8;\n\n      if (subblock_size === 1) {  // Never let it get to 0 to hold logic above.\n        subblock_size = code_stream[p++];  // Next subblock.\n      } else {\n        --subblock_size;\n      }\n    }\n\n    // TODO(deanm): We should never really get here, we should have received\n    // and EOI.\n    if (cur_shift < cur_code_size)\n      break;\n\n    var code = cur & code_mask;\n    cur >>= cur_code_size;\n    cur_shift -= cur_code_size;\n\n    // TODO(deanm): Maybe should check that the first code was a clear code,\n    // at least this is what you're supposed to do.  But actually our encoder\n    // now doesn't emit a clear code first anyway.\n    if (code === clear_code) {\n      // We don't actually have to clear the table.  This could be a good idea\n      // for greater error checking, but we don't really do any anyway.  We\n      // will just track it with next_code and overwrite old entries.\n\n      next_code = eoi_code + 1;\n      cur_code_size = min_code_size + 1;\n      code_mask = (1 << cur_code_size) - 1;\n\n      // Don't update prev_code ?\n      prev_code = null;\n      continue;\n    } else if (code === eoi_code) {\n      break;\n    }\n\n    // We have a similar situation as the decoder, where we want to store\n    // variable length entries (code table entries), but we want to do in a\n    // faster manner than an array of arrays.  The code below stores sort of a\n    // linked list within the code table, and then \"chases\" through it to\n    // construct the dictionary entries.  When a new entry is created, just the\n    // last byte is stored, and the rest (prefix) of the entry is only\n    // referenced by its table entry.  Then the code chases through the\n    // prefixes until it reaches a single byte code.  We have to chase twice,\n    // first to compute the length, and then to actually copy the data to the\n    // output (backwards, since we know the length).  The alternative would be\n    // storing something in an intermediate stack, but that doesn't make any\n    // more sense.  I implemented an approach where it also stored the length\n    // in the code table, although it's a bit tricky because you run out of\n    // bits (12 + 12 + 8), but I didn't measure much improvements (the table\n    // entries are generally not the long).  Even when I created benchmarks for\n    // very long table entries the complexity did not seem worth it.\n    // The code table stores the prefix entry in 12 bits and then the suffix\n    // byte in 8 bits, so each entry is 20 bits.\n\n    var chase_code = code < next_code ? code : prev_code;\n\n    // Chase what we will output, either {CODE} or {CODE-1}.\n    var chase_length = 0;\n    var chase = chase_code;\n    while (chase > clear_code) {\n      chase = code_table[chase] >> 8;\n      ++chase_length;\n    }\n\n    var k = chase;\n\n    var op_end = op + chase_length + (chase_code !== code ? 1 : 0);\n    if (op_end > output_length) {\n      console.log(\"Warning, gif stream longer than expected.\");\n      return;\n    }\n\n    // Already have the first byte from the chase, might as well write it fast.\n    output[op++] = k;\n\n    op += chase_length;\n    var b = op;  // Track pointer, writing backwards.\n\n    if (chase_code !== code)  // The case of emitting {CODE-1} + k.\n      output[op++] = k;\n\n    chase = chase_code;\n    while (chase_length--) {\n      chase = code_table[chase];\n      output[--b] = chase & 0xff;  // Write backwards.\n      chase >>= 8;  // Pull down to the prefix code.\n    }\n\n    if (prev_code !== null && next_code < 4096) {\n      code_table[next_code++] = prev_code << 8 | k;\n      // TODO(deanm): Figure out this clearing vs code growth logic better.  I\n      // have an feeling that it should just happen somewhere else, for now it\n      // is awkward between when we grow past the max and then hit a clear code.\n      // For now just check if we hit the max 12-bits (then a clear code should\n      // follow, also of course encoded in 12-bits).\n      if (next_code >= code_mask+1 && cur_code_size < 12) {\n        ++cur_code_size;\n        code_mask = code_mask << 1 | 1;\n      }\n    }\n\n    prev_code = code;\n  }\n\n  if (op !== output_length) {\n    console.log(\"Warning, gif stream shorter than expected.\");\n  }\n\n  return output;\n}\n\n// CommonJS.\ntry { exports.GifWriter = GifWriter; exports.GifReader = GifReader } catch(e) {}\n","import pbfe from \"./pbfe.js\";\nimport { touchToMouseEvent } from \"./utils.js\";\nimport { _ } from \"./i18n.js\";\n\nvar container, box;\nvar hslModeBtn, rgbModeBtn, hexInput, edButton;\nvar pickers, mode;\n\nvar currentElement, currentEdElement;\nvar edActive = false;\n\nvar modeInfo = {\n    hsl: {\n        maxValues: [360, 100, 100, 255],\n        toCss: cssHsla,\n        toHex: hslToHex,\n        convFunc: rgbToHsl\n    },\n    rgb: {\n        maxValues: [255, 255, 255, 255],\n        toCss: cssRgba,\n        toHex: rgbToHex,\n        convFunc: hslToRgb\n    }\n};\n\nfunction init(_container) {\n    container = _container;\n\n    box = new pbfe.Floatbox;\n    box.element.classList.add(\"hide\");\n    box.element.id = \"colorPicker\";\n\n    var rootFlex = new pbfe.Flexbox;\n    rootFlex.flexDirection = \"column\";\n    rootFlex.gap = \"0.25rem\";\n    box.appendChild(rootFlex);\n\n    var modeFlex = new pbfe.Flexbox;\n    modeFlex.element.style.marginBottom = \"0.5rem\";\n    rootFlex.appendChild(modeFlex);\n\n    hslModeBtn = new pbfe.Button(\"HSL\");\n    hslModeBtn.element.classList.add(\"modeBtn\");\n    modeFlex.appendChild(hslModeBtn);\n\n    rgbModeBtn = new pbfe.Button(\"RGB\");\n    rgbModeBtn.element.classList.add(\"modeBtn\");\n    modeFlex.appendChild(rgbModeBtn);\n\n    pickers = [];\n    rootFlex.appendChildren([\n        createValuePicker(\"H\"),\n        createValuePicker(\"S\"),\n        createValuePicker(\"L\"),\n        createValuePicker(\"A\"),\n    ]);\n\n    var hexFlex = new pbfe.Flexbox;\n    hexFlex.justifyContent = \"center\";\n    hexFlex.alignItems = \"center\";\n    hexFlex.gap = \"0.5rem\";\n    rootFlex.appendChild(hexFlex);\n\n    var hexLabel = new pbfe.Label(\"Hex\");\n    hexFlex.appendChild(hexLabel);\n\n    hexInput = new pbfe.Input(\"text\");\n    hexInput.placeholder = \"ffffff\";\n    hexInput.element.style.fontFamily = \"monospace\";\n    hexFlex.appendChild(hexInput);\n\n    edButton = new pbfe.Button;\n    edButton.element.classList.add(\"edButton\");\n    var edIcon = document.createElement(\"img\");\n    edIcon.src = new URL(\"./eye-dropper.svg\", import.meta.url);\n    edIcon.width = edIcon.height = 16;\n    edButton.element.appendChild(edIcon);\n    hexFlex.appendChild(edButton);\n\n    var closeBtn = new pbfe.Button(_(\"Close\"));\n    closeBtn.element.style.marginTop = \"0.5rem\";\n    rootFlex.appendChild(closeBtn);\n\n    /* Events */\n    hslModeBtn.addEventListener(\"click\", setMode.bind(null, \"hsl\"));\n    rgbModeBtn.addEventListener(\"click\", setMode.bind(null, \"rgb\"));\n\n    for (var i = 0; i < pickers.length; ++i) {\n        var p = pickers[i];\n        p.input.addEventListener(\"input\", function() {\n            setInputValue(p.input, p.input.value);\n            updateColor();\n        });\n        var slider = p.slider;\n        slider.addEventListener(\"mousedown\", sliderMouseDown.bind(p));\n        document.addEventListener(\"mousemove\", mouseMoveListener);\n        document.addEventListener(\"mouseup\", mouseUpListener);\n        slider.addEventListener(\"touchstart\", touchToMouseEvent, { passive: true });\n    }\n\n    var hexColorRegexp = /^#?[0-9A-F]{6}$/i;\n    var a = pickers[3];\n    hexInput.addEventListener(\"input\", function() {\n        var value = this.value;\n        if (!hexColorRegexp.test(value)) return;\n        if (value[0] == \"#\") value = value.slice(1);\n\n        var [r, g, b] = hexToRgb(value);\n        setMode(\"rgb\");\n        setColor(r, g, b, getInputValue(pickers[3].input)); // keep alpha value\n    });\n\n    edButton.addEventListener(\"click\", function() {\n        setEyeDropperActive(!edActive);\n    });\n\n    closeBtn.addEventListener(\"click\", hide);\n\n    /* Init */\n    setSliderGradient(a.slider, [cssRgba(255, 255, 255, 0), cssRgba(255, 255, 255, 1)]);\n    mode = null;\n}\n\nfunction createValuePicker(text) {\n    var flex = new pbfe.Flexbox;\n    flex.element.classList.add(\"valueFlex\");\n\n    var label = new pbfe.Label(text);\n    flex.appendChild(label);\n\n    var slider = new pbfe.Widget;\n    slider.element.classList.add(\"slider\");\n    flex.appendChild(slider);\n\n    var point = new pbfe.Widget;\n    point.element.classList.add(\"sliderPoint\");\n    slider.appendChild(point);\n\n    var input = new pbfe.Input(\"number\");\n    input.element.min = input.value = 0;\n    flex.appendChild(input);\n\n    pickers.push({\n        label, slider, point, input, num: pickers.length\n    });\n    return flex;\n}\n\nfunction setInputValue(input, value) {\n    input.value = Math.round(value);\n    input.element.dataset.value = value;\n}\n\nfunction getInputValue(input) {\n    return +input.element.dataset.value;\n}\n\nfunction setMode(name) {\n    if (mode == name) return;\n    var prevMode = mode;\n    mode = name;\n\n    var [p0, p1, p2, p3] = pickers;\n    var { maxValues, convFunc } = modeInfo[name];\n\n    for (var i = 0; i < pickers.length; ++i) {\n        var p = pickers[i];\n        p.input.element.max = maxValues[i];\n        if (i < mode.length) p.label.text = mode[i].toUpperCase();\n    }\n\n    // Mode specific stuff\n    if (mode == \"hsl\") {\n        setSliderGradient(p0.slider, [\n            cssHsla(0,   100, 50, 1),\n            cssHsla(60,  100, 50, 1),\n            cssHsla(120, 100, 50, 1),\n            cssHsla(180, 100, 50, 1),\n            cssHsla(240, 100, 50, 1),\n            cssHsla(300, 100, 50, 1),\n            cssHsla(360, 100, 50, 1),\n        ])\n\n        hslModeBtn.element.classList.add(\"chosen\");\n        rgbModeBtn.element.classList.remove(\"chosen\");\n    }\n    else if (mode == \"rgb\") {\n        setSliderGradient(p0.slider, [\"#000000\", \"#ff0000\"]);\n        setSliderGradient(p1.slider, [\"#000000\", \"#00ff00\"]);\n        setSliderGradient(p2.slider, [\"#000000\", \"#0000ff\"]);\n\n        rgbModeBtn.element.classList.add(\"chosen\");\n        hslModeBtn.element.classList.remove(\"chosen\");\n    }\n\n    if (prevMode) {\n        setColor(\n            ...convFunc(\n                getInputValue(p0.input),\n                getInputValue(p1.input),\n                getInputValue(p2.input)\n            ),\n            getInputValue(p3.input)\n        );\n    }\n}\n\nfunction setSliderGradient(slider, list) {\n    slider.element.style.backgroundImage = \"linear-gradient(90deg,\" + list.join(\",\") + \")\";\n}\n\nfunction setColor(v1, v2, v3, a) {\n    if (mode == \"hsl\") {\n        var [h, s, l] = pickers;\n        setSliderGradient(s.slider, [cssHsla(v1, 0, v3, 1), cssHsla(v1, 100, v3, 1)]);\n        setSliderGradient(l.slider, [\"#000000\", cssHsla(v1, v2, 50, 1), \"#ffffff\"]);\n    }\n\n    var { maxValues, toCss, toHex } = modeInfo[mode];\n    for (var i = 0; i < pickers.length; ++i) {\n        var p = pickers[i];\n        setInputValue(p.input, arguments[i]);\n        p.point.element.style.left = (arguments[i] / maxValues[i]) * 100 + \"%\";\n    }\n\n    hexInput.value = toHex(v1, v2, v3);\n\n    if (currentElement) {\n        currentElement.style.backgroundColor = toCss(v1, v2, v3, a/255);\n        currentElement.dispatchEvent(new Event(\"colorchange\"));\n    }\n}\n\nfunction updateColor() {\n    var values = [];\n    for (var i = 0; i < pickers.length; ++i) {\n        values.push(pickers[i].input.value);\n    }\n    setColor(...values);\n}\n\nvar currentPicker;\nfunction sliderMouseDown(e) {\n    currentPicker = this;\n    mouseMoveListener(e);\n}\n\nfunction mouseMoveListener(e) {\n    if (currentPicker) {\n        e.preventDefault();\n\n        var p = currentPicker;\n        var sliderEl = p.slider.element;\n        var rect = sliderEl.getBoundingClientRect();\n        var rx = Math.max(rect.left, Math.min(e.clientX, rect.right)) - rect.left;\n        var max = modeInfo[mode].maxValues[p.num];\n        setInputValue(p.input, Math.round((rx / rect.width) * max));\n        updateColor();\n    }\n}\n\nfunction mouseUpListener(e) {\n    currentPicker = null;\n}\n\nfunction show(colorEl, eyeDropEl) {\n    if (!container.contains(box)) {\n        container.appendChild(box);\n        setTimeout(function() { box.element.classList.remove(\"hide\"); }, 0);\n    }\n\n    if (colorEl) {\n        if (currentElement == colorEl) return;\n        currentElement = colorEl;\n\n        var colorCss = colorEl.style.backgroundColor;\n        if (colorCss.startsWith(\"rgb\") || colorCss[0] == \"#\") {\n            setMode(\"rgb\");\n            var [r, g, b, a] = colorCss[0] == \"#\" ?\n                hexToRgb(colorCss.slice(1)) :\n                colorCss.replace(/(rgba?\\(|\\))| /g, \"\").split(\",\");\n            setColor(r, g, b, a === undefined ? 255 : a);\n        }\n        else if (colorCss.startsWith(\"hsl\")) {\n            setMode(\"hsl\");\n            var [h, s, l, a] = colorCss.replace(/(hsla?\\(|\\))| /g, \"\").split(\",\");\n            setColor(h, s, l, a === undefined ? 255 : a);\n        }\n\n        var rect = colorEl.getBoundingClientRect();\n        var boxEl = box.element;\n        var pickerRect = boxEl.getBoundingClientRect();\n\n        var top = Math.max(0, Math.min(rect.top - pickerRect.height - 6, window.innerHeight - pickerRect.height));\n        var left = Math.max(0, Math.min(rect.right - pickerRect.width, window.innerWidth - pickerRect.width));\n\n        boxEl.style.top = top + \"px\";\n        boxEl.style.left = left + \"px\";\n\n        if (eyeDropEl) currentEdElement = eyeDropEl;\n    }\n    else {\n        currentElement = null;\n        setMode(\"hsl\");\n        setColor(0, 100, 100, 255);\n    }\n}\n\nvar hiding = false;\nfunction hide() {\n    if (!container.contains(box) || hiding) return;\n    box.element.classList.add(\"hide\");\n    hiding = true;\n    container.removeChildAfterTransition(box, function() { hiding = false; });\n    currentElement = null;\n    if (currentEdElement) {\n        setEyeDropperActive(false);\n        currentEdElement = null;\n    }\n}\n\nfunction setEyeDropperActive(active) {\n    if (!currentEdElement) return;\n    edActive = active;\n    if (edActive) {\n        edButton.element.classList.add(\"active\");\n        currentEdElement.addEventListener(\"eyedrop\", eyeDropListener);\n    }\n    else {\n        edButton.element.classList.remove(\"active\");\n        currentEdElement.removeEventListener(\"eyedrop\", eyeDropListener);\n    }\n    currentEdElement.dispatchEvent(new CustomEvent(\"edstatechange\", { detail: edActive }));\n}\n\nfunction isEyeDropperActive() {\n    return edActive;\n}\n\nfunction eyeDropListener(e) {\n    if (!edActive) return;\n    setMode(e.detail.mode);\n    setColor(...e.detail.color);\n    setEyeDropperActive(false);\n};\n\nfunction rgbToHsl(r, g, b) {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const l = Math.max(r, g, b);\n    const s = l - Math.min(r, g, b);\n    const h = s\n        ? l === r\n            ? (g - b) / s\n            : l === g\n            ? 2 + (b - r) / s\n            : 4 + (r - g) / s\n        : 0;\n    return [\n        60 * h < 0 ? 60 * h + 360 : 60 * h,\n        100 * (s ? (l <= 0.5 ? s / (2 * l - s) : s / (2 - (2 * l - s))) : 0),\n        (100 * (2 * l - s)) / 2,\n    ];\n};\n\nfunction hslToRgb(h, s, l) {\n    s /= 100;\n    l /= 100;\n    const k = n => (n + h / 30) % 12;\n    const a = s * Math.min(l, 1 - l);\n    const f = n => l - a * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));\n    return [255 * f(0), 255 * f(8), 255 * f(4)];\n};\n\nfunction numToHex(num) {\n    var hex = num.toString(16);\n    return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nfunction rgbToHex(r, g, b) {\n    r = Math.floor(r);\n    g = Math.floor(g);\n    b = Math.floor(b);\n    return numToHex(r) + numToHex(g) + numToHex(b);\n}\n\nfunction hslToHex(h, s, l) {\n    return rgbToHex(...hslToRgb(h, s, l));\n}\n\nfunction hexToRgb(hex) {\n    return [parseInt(hex.slice(0, 2), 16), parseInt(hex.slice(2, 4), 16), parseInt(hex.slice(4, 6), 16)];\n}\n\nfunction cssRgba(r, g, b, a) {\n    return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a + \")\";\n}\n\nfunction cssHsla(h, s, l, a) {\n    return \"hsla(\" + h + \",\" + s + \"%,\" + l + \"%,\" + a + \")\";\n}\n\nvar colorPicker = {\n    init, show, hide, isEyeDropperActive\n}\nexport default colorPicker;","import pbfe from \"./pbfe.js\";\n\nexport function redrawFunc(draw) {\n    let frameRequested = false;\n    return function() {\n        if (frameRequested) return;\n        frameRequested = true;\n        window.requestAnimationFrame(function() {\n            draw();\n            frameRequested = false;\n        });\n    }\n}\n\nvar currentTouchId = null;\nexport function touchToMouseEvent(e) {\n    var touches = e.changedTouches;\n    var touch;\n    if (currentTouchId != null) {\n        for (let i = 0; i < touches.length; ++i) {\n            if (touches[i].identifier == currentTouchId) {\n                touch = touches[i];\n                break;\n            }\n        }\n    }\n\n    var type = \"\";\n    switch (e.type) {\n        case \"touchstart\":\n            if (currentTouchId != null || touches.length == 0) return;\n            type = \"mousedown\";\n            touch = touches[0];\n            currentTouchId = touch.identifier;\n            break;\n\n        case \"touchmove\":\n            type = \"mousemove\";\n            break;\n        \n        case \"touchend\":\n            if (touch) currentTouchId = null;\n            type = \"mouseup\";\n            break;\n\n        default: return;\n    }\n\n    if (!touch) return;\n\n    var simulatedEvent = new MouseEvent(type, {\n        bubbles: true,\n        cancelable: true,\n        view: window,\n        screenX: touch.screenX,\n        screenY: touch.screenY,\n        clientX: touch.clientX,\n        clientY: touch.clientY,\n        ctrlKey: false,\n        altKey: false,\n        metaKey: false,\n        button: 0,\n        relatedTarget: null\n    });\n\n    this.dispatchEvent(simulatedEvent);\n}\n\nexport function MenuInputs() {}\nMenuInputs.prototype.create = function(name, labelText, inputType, split) {\n    if (!labelText) labelText = name;\n    var label = new pbfe.Label(labelText);\n    label.element.classList.add(\"menuInputBox\");\n    if (split) label.element.classList.add(\"split\");\n\n    var input;\n    if (inputType == \"color\") {\n        input = new pbfe.Widget;\n        input.element.classList.add(\"cpButton\");\n    }\n    else {\n        input = new pbfe.Input(inputType);\n        input.element.setAttribute(\"aria-label\", labelText);\n    }\n    label.appendChild(input);\n    this[name] = input.element;\n    return label;\n}\n\nexport function createRangeDetents(id, values) {\n    var detents = document.createElement(\"datalist\");\n    detents.id = id;\n    for (let i = 0; i < values.length; ++i) {\n        let option = document.createElement(\"option\");\n        option.value = values[i];\n        detents.appendChild(option);\n    }\n    document.body.appendChild(detents);\n    return id;\n}\n\nexport function isPointInRect(x, y, rect) {\n    return (x >= rect.x && y >= rect.y &&\n            x <= rect.x + rect.width && y <= rect.y + rect.height);\n}\n\nexport function isPointInCircle(x, y, cx, cy, radius) {\n    return Math.pow(x - cx, 2) + Math.pow(y - cy, 2) < Math.pow(radius, 2);\n}\n\nexport function getTouchDist(touch1, touch2) {\n    return Math.hypot(touch1.pageX - touch2.pageX, touch1.pageY - touch2.pageY);\n}\n\nexport function createLine(ctx, x1, y1, x2, y2) {\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n}","module.exports = require('./helpers/bundle-url').getBundleURL('6gEBg') + \"eye-dropper.e70ddc8f.svg\";","import { _ } from \"./i18n.js\";\nimport pbfe from \"./pbfe.js\";\nimport { redrawFunc, MenuInputs, createRangeDetents } from \"./utils.js\";\n\nvar dialog, inputs = new MenuInputs;\nvar canvas = document.createElement(\"canvas\");\nvar ctx = canvas.getContext(\"2d\");\nvar imgSrc, callback;\n\nvar inputsInfo = {\n    \"brightness\": { name: \"Brightness\", min: 0, max: 200, unit: \"%\" },\n    \"contrast\":   { name: \"Contrast\",   min: 0, max: 200, unit: \"%\" },\n    \"hue-rotate\": { name: \"Hue\",        min: 0, max: 360, unit: \"deg\" },\n    \"saturate\":   { name: \"Saturation\", min: 0, max: 200, unit: \"%\" },\n    \"grayscale\":  { name: \"Grayscale\",  min: 0, max: 100, unit: \"%\" },\n    \"sepia\":      { name: \"Sepia\",      min: 0, max: 100, unit: \"%\" },\n    \"invert\":     { name: \"Invert\",     min: 0, max: 100, unit: \"%\" },\n    \"opacity\":    { name: \"Opacity\",    min: 0, max: 100, unit: \"%\" },\n    \"blur\":       { name: \"Blur\",       min: 0, max: 100, unit: \"px\" }\n}\n\nvar defaultInit = {\n    \"brightness\": 100,\n    \"contrast\":   100,\n    \"hue-rotate\": 0,\n    \"saturate\":   100,\n    \"grayscale\":  0,\n    \"sepia\":      0,\n    \"invert\":     0,\n    \"opacity\":    100,\n    \"blur\":       0\n}\n\nvar currentOptions;\n\nfunction init(container) {\n    dialog = new pbfe.Dialog(_(\"Filters\"));\n    dialog.element.style.textAlign = \"center\";\n    dialog.element.style.minWidth = \"min(22rem, 86%)\";\n    container.appendChild(dialog);\n\n    canvas.style.marginTop = \"0\";\n    canvas.style.marginBottom = \"0.5rem\";\n    dialog.body.appendChild(canvas);\n\n    var detent0 = createRangeDetents(\"filterDetent0\", [0]);\n    var detent100 = createRangeDetents(\"filterDetent100\", [100]);\n\n    var inputWidgets = [];\n    for (let func in inputsInfo) {\n        var info = inputsInfo[func];\n        var widget = inputs.create(func, _(info.name), \"range\");\n        var input = inputs[func];\n        input.min = info.min;\n        input.max = info.max;\n        \n        var defaultValue = defaultInit[func];\n        if (defaultValue == 0) input.setAttribute(\"list\", detent0);\n        else if (defaultValue == 100) input.setAttribute(\"list\", detent100);\n\n        input.addEventListener(\"input\", function() {\n            currentOptions[func] = this.value;\n            redrawCanvas();\n        });\n        inputWidgets.push(widget);\n    }\n\n    var inputsBox = new pbfe.Widget;\n    inputsBox.element.id = \"filtersInputsBox\";\n    inputsBox.appendChildren(inputWidgets);\n    dialog.appendChild(inputsBox);\n\n    var resetBtn = new pbfe.Button(_(\"Reset\"), \"secondary\");\n    resetBtn.element.style.marginRight = \"auto\";\n    dialog.appendButton(resetBtn);\n\n    var okBtn = new pbfe.Button(_(\"OK\"));\n    dialog.appendButton(okBtn);\n\n    okBtn.addEventListener(\"click\", function() {\n        dialog.hide();\n        if (callback) callback();\n    });\n\n    resetBtn.addEventListener(\"click\", function() {\n        for (let func in currentOptions) {\n            inputs[func].value = defaultInit[func];\n            delete currentOptions[func];\n        }\n        redrawCanvas();\n    });\n}\n\nfunction drawCanvas() {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.filter = optionsToFilter(currentOptions);\n    ctx.drawImage(imgSrc, 0, 0);\n}\n\nvar redrawCanvas = redrawFunc(drawCanvas);\n\nfunction showOptions(init, imgSrc_, callback_) {\n    if (!init) {\n        init = defaultInit;\n        currentOptions = {};\n    }\n    else currentOptions = init;\n\n    for (let func in inputsInfo) {\n        inputs[func].value = (func in init) ? init[func] : defaultInit[func];\n    }\n\n    imgSrc = imgSrc_;\n    callback = callback_;\n\n    canvas.width = imgSrc.width;\n    canvas.height = imgSrc.height;\n    redrawCanvas();\n    dialog.show();\n}\n\nfunction optionsToFilter(options) {\n    var filter = \"\";\n    for (let func in options) {\n        var value = options[func];\n        if (value == defaultInit[func]) continue;\n\n        var unit = inputsInfo[func].unit;\n        filter += func + \"(\" + options[func] + unit + \")\";\n    }\n    if (filter == \"\") filter = \"none\";\n    return filter;\n}\n\nvar imageFilters = {\n    init, showOptions, optionsToFilter, canvas\n};\nexport default imageFilters;","import pbfe from \"./pbfe.js\";\nimport { _ } from \"./i18n.js\";\nimport toast from \"./toast.js\";\n\nvar dialog, selector, iframe, loadNotif;\nvar imgSrc, callback;\n\nvar defaultPage = \"data:text/html;base64,PCFET0NUWVBFIGh0bWw+PGh0bWw+PGJvZHkgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IzI1MjcyOTsiPjwvYm9keT48L2h0bWw+\";\nvar templates = {\n    discord: new URL(\"./preview/discord.html\", import.meta.url)\n}\n\nfunction init(container) {\n    dialog = new pbfe.Dialog(_(\"Web Preview\"));\n    dialog.element.id = \"webPreviewDialog\";\n    dialog.body.innerText = _(\"Select a website:\");\n    container.appendChild(dialog);\n\n    var closeBtn = new pbfe.Button(_(\"Close\"));\n    dialog.appendButton(closeBtn);\n\n    selector = new pbfe.Selector;\n    selector.addOption(\"----\", \"placeholder\", true);\n    selector.addOption(\"Discord\", \"discord\");\n    selector.element.style.marginLeft = \"0.5rem\";\n    dialog.appendChild(selector);\n\n    var wrapper = new pbfe.Widget;\n    wrapper.element.id = \"previewIFrameWrapper\";\n    dialog.appendChild(wrapper)\n\n    iframe = document.createElement(\"iframe\");\n    iframe.id = \"previewIFrame\";\n    iframe.title = _(\"Web Preview\");\n    wrapper.body.appendChild(iframe);\n\n    loadNotif = new pbfe.Widget;\n    loadNotif.element.id = \"loadNotif\";\n    wrapper.appendChild(loadNotif);\n\n    var loadSpinner = document.createElement(\"img\");\n    loadSpinner.id = \"loadSpinner\";\n    loadSpinner.src = new URL(\"./loading.svg\", import.meta.url);\n    loadSpinner.width = loadSpinner.height = 128;\n    loadSpinner.alt = \"Loading\";\n    loadNotif.body.appendChild(loadSpinner);\n\n    var loadLabel = new pbfe.Label(_(\"Loading...\"));\n    loadNotif.appendChild(loadLabel);\n\n    closeBtn.addEventListener(\"click\", function() {\n        dialog.hide();\n        callback();\n    });\n\n    selector.addEventListener(\"change\", function() {\n        loadPreview(this.value);\n    });\n}\n\nfunction loadPreview(site) {\n    var loadNotifEl = loadNotif.element;\n    loadNotifEl.classList.add(\"show\");\n    iframe.src = templates[site];\n    iframe.addEventListener(\"load\", async function() {\n        if (iframe.contentDocument) await injectImages();\n        else toast.show(_(\"Failed to load preview page.\"));\n        loadNotifEl.classList.remove(\"show\");\n    }, { once: true });\n}\n\nfunction onImageLoadOnce(img) {\n    return new Promise(resolve => {\n        img.addEventListener(\"load\", resolve, { once: true });\n    });\n}\n\nasync function injectImages() {\n    var iDocument = iframe.contentDocument;\n    var list = iDocument.getElementsByClassName(\"avatar\");\n\n    var imgUrls = {};\n    for (var i = 0; i < list.length; ++i) {\n        var img = list[i];\n        var size = img.dataset.size;\n\n        var src = imgUrls[size];\n        if (!src)\n            imgUrls[size] = src = await renderScaledImage(size);\n        \n        img.src = src;\n        await onImageLoadOnce(img);\n        img.draggable = false;\n    }\n\n    for (var i in imgUrls) {\n        URL.revokeObjectURL(imgUrls[i]);\n    }\n}\n\nvar renderCanvas = document.createElement(\"canvas\");\nvar renderCtx = renderCanvas.getContext(\"2d\");\nasync function renderScaledImage(size) {\n    renderCanvas.width = renderCanvas.height = size;\n    renderCtx.imageSmoothingQuality = \"high\";\n    renderCtx.drawImage(imgSrc,\n        0, 0, imgSrc.width, imgSrc.height,\n        0, 0, size, size\n    );\n    var blob = await new Promise(resolve => renderCanvas.toBlob(resolve));\n    return URL.createObjectURL(blob);\n}\n\nfunction show(imgSrc_, callback_) {\n    imgSrc = imgSrc_;\n    callback = callback_;\n    selector.value = \"placeholder\";\n    iframe.src = defaultPage;\n    dialog.show();\n}\n\nvar webPreview = {\n    init, show\n}\nexport default webPreview;","module.exports = require('./helpers/bundle-url').getBundleURL('6gEBg') + \"discord.a4af9988.html\";","module.exports = require('./helpers/bundle-url').getBundleURL('6gEBg') + \"loading.f836516e.svg\";","module.exports = require('./helpers/bundle-url').getBundleURL('6gEBg') + \"demo-thumbnail.ee15827b.jpg\";","import pbfe from \"./pbfe.js\"\nimport i18n, { _ } from \"./i18n.js\";\nimport toast from \"./toast.js\";\n\nvar dialog;\nfunction init(container) {\n    dialog = new pbfe.Dialog(_(\"About\"));\n    dialog.element.style.textAlign = \"center\";\n    container.appendChild(dialog);\n\n    var banner = document.createElement(\"img\");\n    banner.src = new URL('./banner.svg', import.meta.url);\n    banner.alt = \"Banner\";\n    banner.width = 740;\n    banner.height = 128;\n    banner.style.width = \"auto\";\n    banner.style.height = \"3rem\";\n    banner.style.marginBottom = \"0.5rem\";\n    banner.draggable = true;\n    dialog.body.appendChild(banner);\n    dialog.body.appendChild(document.createElement(\"br\"));\n\n    var text1 = new pbfe.Label(_(\"Simple and accurate avatar cropping tool.\\n\"));\n    dialog.appendChild(text1);\n\n    var text2 = new pbfe.Label(_(\"Source code: \"));\n    dialog.appendChild(text2);\n\n    var srcLink = document.createElement(\"a\");\n    srcLink.href = \"https://github.com/LeadRDRK/AvatarCropper\";\n    srcLink.innerText = srcLink.href + \"\\n\";\n    srcLink.target = \"_blank\";\n    srcLink.draggable = false;\n    dialog.body.appendChild(srcLink);\n    \n    dialog.body.appendChild(document.createElement(\"hr\"));\n\n    var text3 = document.createElement(\"b\");\n    text3.innerText = _(\"Translators\\n\");\n    dialog.body.appendChild(text3);\n\n    var langs = i18n.getLanguages();\n    for (const i in langs) {\n        var info = langs[i];\n        var entry = new pbfe.Label(info.name + \" - \"  + info.author + \"\\n\");\n        dialog.appendChild(entry);\n    }\n\n    var okBtn = new pbfe.Button(_(\"OK\"));\n    dialog.appendButton(okBtn);\n    okBtn.addEventListener(\"click\", hide);\n\n    var guyUrl = \"https://leadrdrk.com/static/generic.png\";\n    banner.addEventListener(\"dragstart\", function(e) {\n        e.dataTransfer.setData(\"text/pain\", guyUrl);\n    });\n    banner.addEventListener(\"dragend\", function(e) {\n        toast.show(\"it's him! (drawn by @ReikoRobo)\");\n        hide();\n    });\n}\n\nfunction show() { dialog.show(); }\nfunction hide() { dialog.hide(); }\n\nvar aboutDialog = {\n    init, show, hide\n}\nexport default aboutDialog;","module.exports = require('./helpers/bundle-url').getBundleURL('6gEBg') + \"banner.2c50771c.svg\";","import pbfe from \"./pbfe.js\"\nimport { _ } from \"./i18n.js\";\n\nvar dialog;\nfunction init(container) {\n    dialog = new pbfe.Dialog(_(\"Privacy\"));\n    container.appendChild(dialog);\n\n    dialog.body.innerText =\n        _(\"This app runs entirely in your browser! No image or data is ever uploaded to any external server.\");\n\n    var okBtn = new pbfe.Button(_(\"OK\"));\n    dialog.appendButton(okBtn);\n    okBtn.addEventListener(\"click\", hide);\n}\n\nfunction show() { dialog.show(); }\nfunction hide() { dialog.hide(); }\n\nvar privacyDialog = {\n    init, show, hide\n}\nexport default privacyDialog;","import pbfe from \"./pbfe.js\";\nimport toast from \"./toast.js\";\nimport { _ } from \"./i18n.js\";\n\nfunction dispatchImageDrop(detail, element) {\n    var idEvent = new CustomEvent(\"imagedrop\", {detail: detail});\n    element.dispatchEvent(idEvent);\n}\n\nfunction dispatchFile(file, element) {\n    if (file.type.startsWith(\"image/\")) {\n        dispatchImageDrop(file, element);\n        return true;\n    }\n    return false;\n}\n\nvar lolMessages = [\"Hey, you should drop your file into the window.\", \"Just drop it...\", \"I'm getting rather impatient.\", \"What are you doing!?\", \"Drop it now!\", \"Stop teasing me!\", \"I beg you!\", \"Please, just give me your file!!!\"];\nfunction DndHandler(container, element) {\n    this.element = element;\n    var overlay = new pbfe.Flexbox;\n    overlay.element.id = \"dndOverlay\";\n\n    var lol = 0;\n    var counter = 0;\n    element.addEventListener(\"dragenter\", function() {\n        if (counter == 0) {\n            container.appendChild(overlay);\n            if (++lol >= 10) {\n                var msg = lolMessages[Math.min(lol - 10, lolMessages.length - 1)];\n                toast.show(msg);\n            }\n        }\n        ++counter;\n    });\n\n    element.addEventListener(\"dragleave\", function() {\n        if (--counter == 0)\n            container.removeChild(overlay);\n    });\n\n    element.addEventListener(\"drop\", function(e) {\n        e.preventDefault();\n        if (lol >= 10 + lolMessages.length - 1) {\n            toast.show(\"Thank you.\");\n        }\n        lol = 0;\n\n        container.removeChild(overlay);\n        counter = 0;\n\n        var value = e.dataTransfer.getData(\"text/pain\");\n        if (value) {\n            dispatchImageDrop(value, element);\n            return;\n        }\n\n        if (e.dataTransfer.items) {\n            for (const item of e.dataTransfer.items) {\n                if (item.kind != \"file\") continue;\n                const file = item.getAsFile();\n                if (dispatchFile(file, element)) return;\n            }\n        }\n        else {\n            for (const file of e.dataTransfer.files) {\n                if (dispatchFile(file, element)) return;\n            }\n        }\n        toast.show(_(\"Invalid image file.\"));\n    });\n\n    element.addEventListener(\"dragover\", function(e) {\n        e.preventDefault();\n    });\n}\n\nDndHandler.prototype.addListener = function(listener) {\n    this.element.addEventListener(\"imagedrop\", listener);\n}\n\nexport default DndHandler;","module.exports = require('./helpers/bundle-url').getBundleURL('6gEBg') + \"sw.js\";"],"names":["$0544d5bc706c7688$var$notifBox","$0544d5bc706c7688$var$renderCanvas","$0544d5bc706c7688$var$renderCtx","$0544d5bc706c7688$var$previewBox","$0544d5bc706c7688$var$previewImages","$0544d5bc706c7688$var$saveDialog","$0544d5bc706c7688$var$gifOptionsDialog","$0544d5bc706c7688$var$rotateDialog","$0544d5bc706c7688$var$tutorialDialog","$0544d5bc706c7688$var$demoVideo","$0544d5bc706c7688$var$prevShapeBtn","$0544d5bc706c7688$var$gifFilters","$0544d5bc706c7688$var$rotateCanvas","$0544d5bc706c7688$var$rotateCtx","$0544d5bc706c7688$var$rotateSlider","$0544d5bc706c7688$var$angleLabel","$0544d5bc706c7688$var$origImg","$0544d5bc706c7688$var$origFrames","$0544d5bc706c7688$var$rotateCanvasInit","$0544d5bc706c7688$var$img","$0544d5bc706c7688$var$currentName","$0544d5bc706c7688$var$prevRect","$0544d5bc706c7688$var$prevTouchDist","$8fbe71eb0c76eaad$var$dialog","$5e2a4df4dcef8b9d$var$dialog","$fac49d8f1486f244$var$container","$fac49d8f1486f244$var$box","$fac49d8f1486f244$var$urlDialog","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","$21104bc65c54f4d6$var$inherit","cls","className","proto","Object","create","prototype","$21104bc65c54f4d6$var$addElementProperty","name","defineProperty","get","element","set","value","$21104bc65c54f4d6$var$addStyleProperty","style","text","$21104bc65c54f4d6$var$Widget","document","createElement","body","classList","add","$21104bc65c54f4d6$var$Container","appendChild","call","$21104bc65c54f4d6$var$Flexbox","direction","display","flexDirection","$21104bc65c54f4d6$var$Floatbox","position","$21104bc65c54f4d6$var$Label","innerText","$21104bc65c54f4d6$var$Button","type","$21104bc65c54f4d6$var$Dialog","titleText","zIndex","title","buttons","$21104bc65c54f4d6$var$Input","inner","_checked","remove","dispatchEvent","Event","addEventListener","checked","$21104bc65c54f4d6$var$ProgressBar","width","height","$21104bc65c54f4d6$var$Canvas","$21104bc65c54f4d6$var$Toast","$21104bc65c54f4d6$var$Selector","id","exports","init","module","err","Error","code","register","widget","appendChildren","array","i","length","removeChild","removeChildAfterTransition","callback","listener","removeEventListener","apply","arguments","contains","parentNode","createShadow","getElementById","div","cssText","showToast","timeout","waitHideTransition","toast","setTimeout","show","bind","hide","shadow","appendButton","removeButton","appendHideButton","btnText","btn","_title","setProgress","removeProperty","getContext","addOption","isPlaceholder","option","hidden","disabled","selected","$21104bc65c54f4d6$export$2e2bcd8739ae039","Container","Widget","Flexbox","Floatbox","Label","Button","Dialog","Input","ProgressBar","Selector","$313f6ce5359206e9$var$strings","$313f6ce5359206e9$var$langs","$313f6ce5359206e9$var$getString","str","$313f6ce5359206e9$export$2e2bcd8739ae039","res","fetch","json","loadLanguage","lang","getLanguages","$4244c5b4a8c0a9c7$export$2e2bcd8739ae039","container","$4244c5b4a8c0a9c7$var$dialog","$4244c5b4a8c0a9c7$var$progressBar","$cff5b25a521f554e$export$2e2bcd8739ae039","_container","$cff5b25a521f554e$var$container","$71041c0c6f4131a3$var$GifReaderLZWOutputIndexStream","code_stream","p","output","output_length","min_code_size","clear_code","eoi_code","next_code","cur_code_size","code_mask","cur_shift","cur","op","subblock_size","code_table","Int32Array","prev_code","chase_code","chase_length","chase","k","op_end","console","log","b","$71041c0c6f4131a3$export$47e375f7f82a91ef","buf","gopts","undefined","loop_count","loop","global_palette","palette","check_palette_and_num_colors","num_colors","gp_num_colors_pow2","background","gp_num_colors","il","rgb","ended","addFrame","x","y","w","h","indexed_pixels","opts","using_local_palette","delay","disposal","use_transparency","transparent_index","transparent","$71041c0c6f4131a3$var$GifWriterOutputLZWCodeStream","index_stream","cur_subblock","emit_bytes_to_buffer","bit_block_size","emit_code","c","ib_code","cur_key","cur_code","end","getOutputBuffer","setOutputBuffer","v","getOutputBufferPosition","setOutputBufferPosition","$71041c0c6f4131a3$export$c4cdd6730c8d089c","pf0","num_global_colors","num_global_colors_pow2","global_palette_offset","global_palette_size","no_eof","frames","block_size","pf1","toString","pf2","local_palette_flag","interlace_flag","num_local_colors","num_local_colors_pow2","palette_offset","palette_size","has_local_palette","data_offset","push","data_length","interlaced","numFrames","loopCount","frameInfo","frame_num","decodeAndBlitFrameBGRA","pixels","frame","num_pixels","Uint8Array","trans","framewidth","framestride","xleft","opbeg","opend","scanstride","interlaceskip","index","r","g","decodeAndBlitFrameRGBA","e","$3816ae512892ed40$var$frames","$3816ae512892ed40$var$Renderer","buffer","writer","imageData","keepColors","indexedPixels","$3816ae512892ed40$var$createFrame","px","transparentIndex","a","lastDiff","prgb","diff","Math","abs","tolerance","pow","needed","data","getUint8Array","from","$3816ae512892ed40$var$gif","Renderer","load","file","inputs","reader","FileReader","onloadend","error","_","gifReader","ndFrameData","lastFrameData","clearBg","view","result","message","inheritFrame","info","ImageData","Uint8ClampedArray","bitmap","createImageBitmap","lastFrame","min","max","endFrame","keepGifColors","readAsArrayBuffer","reset","isAnimated","$81b042702cd50b64$export$f98ed0023cec5998","draw","frameRequested","requestAnimationFrame","$81b042702cd50b64$var$currentTouchId","$81b042702cd50b64$export$b9d4e1086abc9c4d","touch","touches","changedTouches","identifier","simulatedEvent","MouseEvent","bubbles","cancelable","screenX","screenY","clientX","clientY","ctrlKey","altKey","metaKey","button","relatedTarget","$81b042702cd50b64$export$36d6422802a3582","$81b042702cd50b64$export$95ffc9bdbe14045b","values","detents","$81b042702cd50b64$export$3ed9b644ed65412a","rect","$81b042702cd50b64$export$98e4a82bd6040cf1","touch1","touch2","hypot","pageX","pageY","$81b042702cd50b64$export$d015f26f64ff14db","ctx","x1","y1","x2","y2","moveTo","lineTo","labelText","inputType","split","input","label","setAttribute","$63fd6a7b35566806$var$edActive","$63fd6a7b35566806$var$modeInfo","hsl","maxValues","toCss","$63fd6a7b35566806$var$cssHsla","toHex","s","l","$63fd6a7b35566806$var$rgbToHex","$63fd6a7b35566806$var$hslToRgb","convFunc","$63fd6a7b35566806$var$cssRgba","$b05e2e02f9695b71$exports","$63fd6a7b35566806$var$createValuePicker","flex","slider","point","$63fd6a7b35566806$var$pickers","num","$63fd6a7b35566806$var$setInputValue","round","dataset","$63fd6a7b35566806$var$getInputValue","$63fd6a7b35566806$var$setMode","$63fd6a7b35566806$var$mode","prevMode","p0","p1","p2","p3","toUpperCase","$63fd6a7b35566806$var$setSliderGradient","$63fd6a7b35566806$var$hslModeBtn","$63fd6a7b35566806$var$rgbModeBtn","$63fd6a7b35566806$var$setColor","list","backgroundImage","join","v1","v2","v3","left","$63fd6a7b35566806$var$hexInput","$63fd6a7b35566806$var$currentElement","backgroundColor","$63fd6a7b35566806$var$updateColor","$63fd6a7b35566806$var$sliderMouseDown","$63fd6a7b35566806$var$currentPicker","$63fd6a7b35566806$var$mouseMoveListener","preventDefault","sliderEl","getBoundingClientRect","rx","right","$63fd6a7b35566806$var$mouseUpListener","getBundleURL","$63fd6a7b35566806$var$hiding","$63fd6a7b35566806$var$hide","$63fd6a7b35566806$var$container","$63fd6a7b35566806$var$box","$63fd6a7b35566806$var$currentEdElement","$63fd6a7b35566806$var$setEyeDropperActive","active","$63fd6a7b35566806$var$edButton","$63fd6a7b35566806$var$eyeDropListener","CustomEvent","detail","mode","color","n","f","$63fd6a7b35566806$var$numToHex","hex","floor","$63fd6a7b35566806$var$hexToRgb","parseInt","slice","$8432c3b0480904ec$var$dialog","$63fd6a7b35566806$export$2e2bcd8739ae039","rootFlex","gap","modeFlex","marginBottom","hexFlex","justifyContent","alignItems","hexLabel","placeholder","fontFamily","edIcon","src","URL","closeBtn","marginTop","passive","hexColorRegexp","test","colorEl","eyeDropEl","colorCss","startsWith","replace","boxEl","pickerRect","top","innerHeight","innerWidth","isEyeDropperActive","$8432c3b0480904ec$var$inputs","$8432c3b0480904ec$var$canvas","$8432c3b0480904ec$var$ctx","$8432c3b0480904ec$var$inputsInfo","unit","$8432c3b0480904ec$var$defaultInit","$8432c3b0480904ec$var$redrawCanvas","clearRect","filter","$8432c3b0480904ec$var$optionsToFilter","$8432c3b0480904ec$var$currentOptions","drawImage","$8432c3b0480904ec$var$imgSrc","options","func","textAlign","minWidth","detent0","detent100","inputWidgets","defaultValue","inputsBox","resetBtn","marginRight","okBtn","$8432c3b0480904ec$var$callback","imgSrc_","callback_","$87450d491c8f5778$var$templates","discord","$0642ffacf1be9380$exports","$87450d491c8f5778$var$injectImages","iDocument","$87450d491c8f5778$var$iframe","contentDocument","getElementsByClassName","imgUrls","img","size","$87450d491c8f5778$var$renderScaledImage","$87450d491c8f5778$var$onImageLoadOnce","Promise","resolve","once","draggable","revokeObjectURL","$87450d491c8f5778$var$renderCanvas","$87450d491c8f5778$var$renderCtx","imageSmoothingQuality","$87450d491c8f5778$var$imgSrc","blob","toBlob","createObjectURL","$87450d491c8f5778$var$dialog","$87450d491c8f5778$var$selector","$87450d491c8f5778$var$loadNotif","$87450d491c8f5778$var$callback","$0544d5bc706c7688$var$container","$0544d5bc706c7688$var$box","$0544d5bc706c7688$var$innerBox","$0544d5bc706c7688$var$canvasBox","$0544d5bc706c7688$var$editorCanvas","$0544d5bc706c7688$var$editorCtx","$0544d5bc706c7688$var$imgCanvas","$0544d5bc706c7688$var$imgCtx","$0544d5bc706c7688$var$menuBox","marginLeft","wrapper","loadSpinner","alt","loadLabel","site","loadNotifEl","$0544d5bc706c7688$var$inputs","$0544d5bc706c7688$var$saveAnchor","$0544d5bc706c7688$var$cropShapes","CIRCLE","SQUARE","FREEFORM","$0544d5bc706c7688$var$cropShape","$0544d5bc706c7688$var$previewSizes","$0c94e84fe6f93206$exports","$0544d5bc706c7688$var$showTutorialDialog","play","$0544d5bc706c7688$var$updateSizeInputValue","$0544d5bc706c7688$var$parseInputValue","$0544d5bc706c7688$var$crop","$0544d5bc706c7688$var$setCropSize","$0544d5bc706c7688$var$redrawEditor","showPreview","$0544d5bc706c7688$var$updatePreview","$0544d5bc706c7688$var$updatePosInputValue","$0544d5bc706c7688$var$setCropPosition","$0544d5bc706c7688$var$createSectionTitle","el","Number","isNaN","$0544d5bc706c7688$var$showNotification","$0544d5bc706c7688$var$createMenuButton","chosen","classes","$0544d5bc706c7688$var$createShapeButton","icon","prepend","parent","borderRadius","$0544d5bc706c7688$var$notifTimeout","time","clearTimeout","notifEl","$0544d5bc706c7688$var$showGifOptions","$0544d5bc706c7688$var$showSaveDialog","$0544d5bc706c7688$var$render","$0544d5bc706c7688$var$showRotateDialog","$0544d5bc706c7688$var$renderRotatedImg","angle","absSin","sin","absCos","cos","rw","ceil","rh","translate","rotate","getImageData","$0544d5bc706c7688$var$openRotatedImg","PI","rotBitmap","currentFrame","$0544d5bc706c7688$var$setMainCanvasesSize","$0544d5bc706c7688$var$editorCanvasInit","$0544d5bc706c7688$var$show","$0544d5bc706c7688$var$reset","$0544d5bc706c7688$var$previewCanvas","$0544d5bc706c7688$var$usingObjectUrl","localStorage","getItem","setItem","$0544d5bc706c7688$var$hide","playGif","$0544d5bc706c7688$var$isHidden","$0544d5bc706c7688$var$fitImageToViewport","flipH","flipV","$0544d5bc706c7688$var$updateImgRenders","innerEl","vpWidth","offsetWidth","vpHeight","offsetHeight","imgAspectRatio","ratio","scaleDevicePixel","devicePixelRatio","$0544d5bc706c7688$var$setCanvasScale","vpAspectRatio","$0544d5bc706c7688$var$setCanvasMargins","allowOffscreen","xPos","yPos","preferHigher","$0544d5bc706c7688$var$canvasX","$0544d5bc706c7688$var$canvasY","$0544d5bc706c7688$var$canvasScale","scale","realScale","transform","toFixed","zoom","newLineWidth","lineWidth","mScale","$0544d5bc706c7688$var$applyFlipTransform","canvas","sx","sy","maskRect","cx","cy","globalCompositeOperation","fillStyle","fillRect","lw","strokeStyle","strokeRect","beginPath","arc","save","stroke","restore","fill","showGuidelines","setLineDash","guideColor","bottom","$0544d5bc706c7688$var$redrawImgCanvas","bgColor","resetTransform","$0544d5bc706c7688$var$pvRedrawing","$0544d5bc706c7688$var$pvRedrawNext","$0544d5bc706c7688$var$redrawPreview","isBlob","Image","$0544d5bc706c7688$var$previewCtx","count","pImage","$0544d5bc706c7688$var$drawCroppedImage","$0544d5bc706c7688$var$saveFile","href","filename","download","click","$0544d5bc706c7688$var$saveImage","url","$0544d5bc706c7688$var$renderAndSaveGif","renderer","start","startFrame","speedMult","Blob","$0544d5bc706c7688$var$isInSelection","$0544d5bc706c7688$var$isResizing","$0544d5bc706c7688$var$resizeFromLeft","$0544d5bc706c7688$var$resizeFromTop","$0544d5bc706c7688$var$checkMousePos","cursor","$0544d5bc706c7688$var$touchPinching","$0544d5bc706c7688$var$mouseDown","$0544d5bc706c7688$var$innerBoxFocused","$0544d5bc706c7688$var$mouseDownListener","$0544d5bc706c7688$var$unfocusInnerBox","$0544d5bc706c7688$var$prevX","$0544d5bc706c7688$var$prevY","$0544d5bc706c7688$var$mouseMoveListener","dx","dy","shiftKey","sign","py","xSign","ySign","delta","hDelta","vDelta","d","$0544d5bc706c7688$var$mouseUpListener","$0544d5bc706c7688$var$wheelListener","incr","deltaY","$0544d5bc706c7688$var$touchStartListener","$0544d5bc706c7688$var$touchMoveListener","dist","$0544d5bc706c7688$var$touchEndListener","$0544d5bc706c7688$var$keyDownListener","keyCode","$0544d5bc706c7688$export$2e2bcd8739ae039","saveBtn","saveGifBtn","fitBtn","rotateBtn","shapeBtnContainer","circleBtn","squareBtn","freeformBtn","returnBtn","hideBtn","innerStyle","zoomDetents","zoomInput","actionsContainer","filtersBtn","previewBtn","filtersLabel","rotateDetents","applyBtn","$0544d5bc706c7688$var$initInnerBox","text1","text2","fullscreenBtn","lineHeight","tutorialBtn","fullscreenElement","exitFullscreen","requestFullscreen","pointerEvents","poster","$0544d5bc706c7688$var$playNextGifFrame","nextFrame","parentStyle","willReadFrequently","step","paddingTop","open","successCb","loadCb","errorCb","File","lastIndexOf","$c33aa7f6b2b897c2$exports","$8fbe71eb0c76eaad$var$hide","$8fbe71eb0c76eaad$export$2e2bcd8739ae039","banner","srcLink","target","text3","langs","entry","author","dataTransfer","setData","$5e2a4df4dcef8b9d$var$hide","$5e2a4df4dcef8b9d$export$2e2bcd8739ae039","$fac49d8f1486f244$var$hide","$fac49d8f1486f244$var$welcomeScreen","shown","$fac49d8f1486f244$var$inputEl","$fac49d8f1486f244$var$openFilePicker","accept","fileList","files","hint","titleBox","onload","versionLabel","aboutBtn","createTextNode","privacyBtn","changelogLink","langSelector","buttonsBox","openButton","urlButton","fontStyle","clipboardData","originalEvent","items","item","kind","getAsFile","$fac49d8f1486f244$export$2e2bcd8739ae039","$c96730ec68fc0f7f$var$dispatchImageDrop","idEvent","$c96730ec68fc0f7f$var$dispatchFile","$c96730ec68fc0f7f$var$lolMessages","$c96730ec68fc0f7f$var$DndHandler","overlay","lol","counter","msg","getData","addListener","$e8ba750d6580a72a$exports","$bd5af8eefd2d0f75$var$appInit","navigator","serviceWorker","innerHTML","$bd5af8eefd2d0f75$var$getLang","preferredLang","language","toLowerCase","indexOf","dnd","scrollTo","$bd5af8eefd2d0f75$export$2e2bcd8739ae039"],"version":3,"file":"index.1836cb60.js.map"}